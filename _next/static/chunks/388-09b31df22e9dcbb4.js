(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[388],{4595:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},6775:(e,t,n)=>{"use strict";n.d(t,{sw:()=>C});var r=n(82267),i=n(55337),o=n(31296),a=(0,r.ID)(()=>(0,r.jN)(o.z.object({error:o.z.object({code:o.z.number().nullable(),message:o.z.string(),status:o.z.string()})}))),s=(0,r.sl)({errorSchema:a,errorToMessage:e=>e.error.message}),l=(0,r.ID)(()=>(0,r.jN)(o.z.object({outputDimensionality:o.z.number().optional(),taskType:o.z.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),u=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:o}){let a=await (0,r.xI)({provider:"google",providerOptions:o,schema:l});if(e.length>this.maxEmbeddingsPerCall)throw new i.Ch({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let u=(0,r.m2)(await (0,r.hd)(this.config.headers),t);if(1===e.length){let{responseHeaders:t,value:i,rawValue:o}=await (0,r.GU)({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:u,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:null==a?void 0:a.outputDimensionality,taskType:null==a?void 0:a.taskType},failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(d),abortSignal:n,fetch:this.config.fetch});return{embeddings:[i.embedding.values],usage:void 0,response:{headers:t,body:o}}}let{responseHeaders:p,value:h,rawValue:f}=await (0,r.GU)({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:u,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:null==a?void 0:a.outputDimensionality,taskType:null==a?void 0:a.taskType}))},failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(c),abortSignal:n,fetch:this.config.fetch});return{embeddings:h.embeddings.map(e=>e.values),usage:void 0,response:{headers:p,body:f}}}},c=(0,r.ID)(()=>(0,r.jN)(o.z.object({embeddings:o.z.array(o.z.object({values:o.z.array(o.z.number())}))}))),d=(0,r.ID)(()=>(0,r.jN)(o.z.object({embedding:o.z.object({values:o.z.array(o.z.number())})})));function p(e){var t;if(null==e||null!=(t=e)&&"object"==typeof t&&"object"===t.type&&(null==t.properties||0===Object.keys(t.properties).length)&&!t.additionalProperties)return;if("boolean"==typeof e)return{type:"boolean",properties:{}};let{type:n,description:r,required:i,properties:o,items:a,allOf:s,anyOf:l,oneOf:u,format:c,const:d,minLength:h,enum:f}=e,m={};if(r&&(m.description=r),i&&(m.required=i),c&&(m.format=c),void 0!==d&&(m.enum=[d]),n&&(Array.isArray(n)?n.includes("null")?(m.type=n.filter(e=>"null"!==e)[0],m.nullable=!0):m.type=n:"null"===n?m.type="null":m.type=n),void 0!==f&&(m.enum=f),null!=o&&(m.properties=Object.entries(o).reduce((e,[t,n])=>(e[t]=p(n),e),{})),a&&(m.items=Array.isArray(a)?a.map(p):p(a)),s&&(m.allOf=s.map(p)),l)if(l.some(e=>"object"==typeof e&&(null==e?void 0:e.type)==="null")){let e=l.filter(e=>"object"!=typeof e||(null==e?void 0:e.type)!=="null");if(1===e.length){let t=p(e[0]);"object"==typeof t&&(m.nullable=!0,Object.assign(m,t))}else m.anyOf=e.map(p),m.nullable=!0}else m.anyOf=l.map(p);return u&&(m.oneOf=u.map(p)),void 0!==h&&(m.minLength=h),m}function h(e){return e.includes("/")?e:`models/${e}`}var f=(0,r.ID)(()=>(0,r.jN)(o.z.object({responseModalities:o.z.array(o.z.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:o.z.object({thinkingBudget:o.z.number().optional(),includeThoughts:o.z.boolean().optional()}).optional(),cachedContent:o.z.string().optional(),structuredOutputs:o.z.boolean().optional(),safetySettings:o.z.array(o.z.object({category:o.z.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:o.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:o.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:o.z.boolean().optional(),labels:o.z.record(o.z.string(),o.z.string()).optional(),mediaResolution:o.z.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional()})));function m({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var g=class{constructor(e,t){var n;this.specificationVersion="v2",this.modelId=e,this.config=t,this.generateId=null!=(n=t.generateId)?n:r.$C}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return null!=(n=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d,tools:h,toolChoice:m,providerOptions:g}){var y,_;let v=[],b=await (0,r.xI)({provider:"google",providerOptions:g,schema:f});(null==(y=null==b?void 0:b.thinkingConfig)?void 0:y.includeThoughts)!==!0||this.config.provider.startsWith("google.vertex.")||v.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let z=this.modelId.toLowerCase().startsWith("gemma-"),{contents:w,systemInstruction:k}=function(e,t){var n;let o=[],a=[],s=!0,l=null!=(n=null==t?void 0:t.isGemmaModel)&&n;for(let{role:t,content:n}of e)switch(t){case"system":if(!s)throw new i.b8({functionality:"system messages are only supported at the beginning of the conversation"});o.push({text:n});break;case"user":{s=!1;let e=[];for(let t of n)switch(t.type){case"text":e.push({text:t.text});break;case"file":{let n="image/*"===t.mediaType?"image/jpeg":t.mediaType;e.push(t.data instanceof URL?{fileData:{mimeType:n,fileUri:t.data.toString()}}:{inlineData:{mimeType:n,data:(0,r.ej)(t.data)}})}}a.push({role:"user",parts:e});break}case"assistant":s=!1,a.push({role:"model",parts:n.map(e=>{var t,n,o,a,s,l;switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text,thoughtSignature:null==(n=null==(t=e.providerOptions)?void 0:t.google)?void 0:n.thoughtSignature};case"reasoning":return 0===e.text.length?void 0:{text:e.text,thought:!0,thoughtSignature:null==(a=null==(o=e.providerOptions)?void 0:o.google)?void 0:a.thoughtSignature};case"file":if("image/png"!==e.mediaType)throw new i.b8({functionality:"Only PNG images are supported in assistant messages"});if(e.data instanceof URL)throw new i.b8({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:e.mediaType,data:(0,r.ej)(e.data)}};case"tool-call":return{functionCall:{name:e.toolName,args:e.input},thoughtSignature:null==(l=null==(s=e.providerOptions)?void 0:s.google)?void 0:l.thoughtSignature}}}).filter(e=>void 0!==e)});break;case"tool":{s=!1;let e=[];for(let t of n){let n=t.output;if("content"===n.type)for(let r of n.value)switch(r.type){case"text":e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:r.text}}});break;case"media":e.push({inlineData:{mimeType:r.mediaType,data:r.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:e.push({text:JSON.stringify(r)})}else e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:n.value}}})}a.push({role:"user",parts:e})}}if(l&&o.length>0&&a.length>0&&"user"===a[0].role){let e=o.map(e=>e.text).join("\n\n");a[0].parts.unshift({text:e+"\n\n"})}return{systemInstruction:o.length>0&&!l?{parts:o}:void 0,contents:a}}(e,{isGemmaModel:z}),{tools:x,toolConfig:I,toolWarnings:T}=function({tools:e,toolChoice:t,modelId:n}){var r;e=(null==e?void 0:e.length)?e:void 0;let o=[],a=n.includes("gemini-2"),s=n.includes("gemini-1.5-flash")&&!n.includes("-8b");if(null==e)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let l=e.some(e=>"function"===e.type),u=e.some(e=>"provider-defined"===e.type);if(l&&u&&o.push({type:"unsupported-tool",tool:e.find(e=>"function"===e.type),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."}),u){let t={};return e.filter(e=>"provider-defined"===e.type).forEach(e=>{switch(e.id){case"google.google_search":a?t.googleSearch={}:s?t.googleSearchRetrieval={dynamicRetrievalConfig:{mode:e.args.mode,dynamicThreshold:e.args.dynamicThreshold}}:t.googleSearchRetrieval={};break;case"google.url_context":a?t.urlContext={}:o.push({type:"unsupported-tool",tool:e,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":a?t.codeExecution={}:o.push({type:"unsupported-tool",tool:e,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:e})}}),{tools:Object.keys(t).length>0?t:void 0,toolConfig:void 0,toolWarnings:o}}let c=[];for(let t of e)"function"===t.type?c.push({name:t.name,description:null!=(r=t.description)?r:"",parameters:p(t.inputSchema)}):o.push({type:"unsupported-tool",tool:t});if(null==t)return{tools:{functionDeclarations:c},toolConfig:void 0,toolWarnings:o};let d=t.type;switch(d){case"auto":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:o};default:throw new i.b8({functionality:`tool choice type: ${d}`})}}({tools:h,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:a,topP:o,frequencyPenalty:s,presencePenalty:l,stopSequences:u,seed:d,responseMimeType:(null==c?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(null==c?void 0:c.type)==="json"&&null!=c.schema&&(null==(_=null==b?void 0:b.structuredOutputs)||_)?p(c.schema):void 0,...(null==b?void 0:b.audioTimestamp)&&{audioTimestamp:b.audioTimestamp},responseModalities:null==b?void 0:b.responseModalities,thinkingConfig:null==b?void 0:b.thinkingConfig},contents:w,systemInstruction:z?void 0:k,safetySettings:null==b?void 0:b.safetySettings,tools:x,toolConfig:I,cachedContent:null==b?void 0:b.cachedContent,labels:null==b?void 0:b.labels},warnings:[...v,...T]}}async doGenerate(e){var t,n,i,o,a,l,u,c,d,p,f,g,_;let v,{args:b,warnings:z}=await this.getArgs(e),w=JSON.stringify(b),x=(0,r.m2)(await (0,r.hd)(this.config.headers),e.headers),{responseHeaders:I,value:T,rawValue:j}=await (0,r.GU)({url:`${this.config.baseURL}/${h(this.modelId)}:generateContent`,headers:x,body:b,failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(k),abortSignal:e.abortSignal,fetch:this.config.fetch}),E=T.candidates[0],S=[],C=null!=(n=null==(t=E.content)?void 0:t.parts)?n:[],O=T.usageMetadata;for(let e of C)if("executableCode"in e&&(null==(i=e.executableCode)?void 0:i.code)){let t=this.config.generateId();v=t,S.push({type:"tool-call",toolCallId:t,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0})}else"codeExecutionResult"in e&&e.codeExecutionResult?(S.push({type:"tool-result",toolCallId:v,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output},providerExecuted:!0}),v=void 0):"text"in e&&null!=e.text&&e.text.length>0?S.push({type:!0===e.thought?"reasoning":"text",text:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}):"functionCall"in e?S.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:e.functionCall.name,input:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}):"inlineData"in e&&S.push({type:"file",data:e.inlineData.data,mediaType:e.inlineData.mimeType});for(let e of null!=(o=y({groundingMetadata:E.groundingMetadata,generateId:this.config.generateId}))?o:[])S.push(e);return{content:S,finishReason:m({finishReason:E.finishReason,hasToolCalls:S.some(e=>"tool-call"===e.type)}),usage:{inputTokens:null!=(a=null==O?void 0:O.promptTokenCount)?a:void 0,outputTokens:null!=(l=null==O?void 0:O.candidatesTokenCount)?l:void 0,totalTokens:null!=(u=null==O?void 0:O.totalTokenCount)?u:void 0,reasoningTokens:null!=(c=null==O?void 0:O.thoughtsTokenCount)?c:void 0,cachedInputTokens:null!=(d=null==O?void 0:O.cachedContentTokenCount)?d:void 0},warnings:z,providerMetadata:{google:{promptFeedback:null!=(p=T.promptFeedback)?p:null,groundingMetadata:null!=(f=E.groundingMetadata)?f:null,urlContextMetadata:null!=(g=E.urlContextMetadata)?g:null,safetyRatings:null!=(_=E.safetyRatings)?_:null,usageMetadata:null!=O?O:null}},request:{body:w},response:{headers:I,body:j}}}async doStream(e){let t,n,{args:i,warnings:o}=await this.getArgs(e),a=JSON.stringify(i),l=(0,r.m2)(await (0,r.hd)(this.config.headers),e.headers),{responseHeaders:u,value:c}=await (0,r.GU)({url:`${this.config.baseURL}/${h(this.modelId)}:streamGenerateContent?alt=sse`,headers:l,body:i,failedResponseHandler:s,successfulResponseHandler:(0,r.Ds)(x),abortSignal:e.abortSignal,fetch:this.config.fetch}),d="unknown",p={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},f=this.config.generateId,g=!1,_=null,v=null,b=0,z=new Set;return{stream:c.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:o})},transform(r,i){var o,a,s,l,u,c,h,w,k,x,I,T,j;if(e.includeRawChunks&&i.enqueue({type:"raw",rawValue:r.rawValue}),!r.success)return void i.enqueue({type:"error",error:r.error});let E=r.value,S=E.usageMetadata;null!=S&&(p.inputTokens=null!=(o=S.promptTokenCount)?o:void 0,p.outputTokens=null!=(a=S.candidatesTokenCount)?a:void 0,p.totalTokens=null!=(s=S.totalTokenCount)?s:void 0,p.reasoningTokens=null!=(l=S.thoughtsTokenCount)?l:void 0,p.cachedInputTokens=null!=(u=S.cachedContentTokenCount)?u:void 0);let C=null==(c=E.candidates)?void 0:c[0];if(null==C)return;let O=C.content,A=y({groundingMetadata:C.groundingMetadata,generateId:f});if(null!=A)for(let e of A)"url"!==e.sourceType||z.has(e.url)||(z.add(e.url),i.enqueue(e));if(null!=O){for(let e of null!=(h=O.parts)?h:[])if("executableCode"in e&&(null==(w=e.executableCode)?void 0:w.code)){let n=f();t=n,i.enqueue({type:"tool-call",toolCallId:n,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0}),g=!0}else if("codeExecutionResult"in e&&e.codeExecutionResult){let n=t;n&&(i.enqueue({type:"tool-result",toolCallId:n,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output},providerExecuted:!0}),t=void 0)}else"text"in e&&null!=e.text&&e.text.length>0&&(!0===e.thought?(null!==_&&(i.enqueue({type:"text-end",id:_}),_=null),null===v&&(v=String(b++),i.enqueue({type:"reasoning-start",id:v,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})),i.enqueue({type:"reasoning-delta",id:v,delta:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})):(null!==v&&(i.enqueue({type:"reasoning-end",id:v}),v=null),null===_&&(_=String(b++),i.enqueue({type:"text-start",id:_,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})),i.enqueue({type:"text-delta",id:_,delta:e.text,providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0})));let e=null==(j=O.parts)?void 0:j.filter(e=>"inlineData"in e);if(null!=e)for(let t of e)i.enqueue({type:"file",mediaType:t.inlineData.mimeType,data:t.inlineData.data});let n=function({parts:e,generateId:t}){let n=null==e?void 0:e.filter(e=>"functionCall"in e);return null==n||0===n.length?void 0:n.map(e=>({type:"tool-call",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{google:{thoughtSignature:e.thoughtSignature}}:void 0}))}({parts:O.parts,generateId:f});if(null!=n)for(let e of n)i.enqueue({type:"tool-input-start",id:e.toolCallId,toolName:e.toolName,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e.args,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-input-end",id:e.toolCallId,providerMetadata:e.providerMetadata}),i.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.args,providerMetadata:e.providerMetadata}),g=!0}null!=C.finishReason&&(d=m({finishReason:C.finishReason,hasToolCalls:g}),n={google:{promptFeedback:null!=(k=E.promptFeedback)?k:null,groundingMetadata:null!=(x=C.groundingMetadata)?x:null,urlContextMetadata:null!=(I=C.urlContextMetadata)?I:null,safetyRatings:null!=(T=C.safetyRatings)?T:null}},null!=S&&(n.google.usageMetadata=S))},flush(e){null!==_&&e.enqueue({type:"text-end",id:_}),null!==v&&e.enqueue({type:"reasoning-end",id:v}),e.enqueue({type:"finish",finishReason:d,usage:p,providerMetadata:n})}})),response:{headers:u},request:{body:a}}}};function y({groundingMetadata:e,generateId:t}){var n;return null==(n=null==e?void 0:e.groundingChunks)?void 0:n.filter(e=>null!=e.web).map(e=>({type:"source",sourceType:"url",id:t(),url:e.web.uri,title:e.web.title}))}var _=()=>o.z.object({webSearchQueries:o.z.array(o.z.string()).nullish(),retrievalQueries:o.z.array(o.z.string()).nullish(),searchEntryPoint:o.z.object({renderedContent:o.z.string()}).nullish(),groundingChunks:o.z.array(o.z.object({web:o.z.object({uri:o.z.string(),title:o.z.string()}).nullish(),retrievedContext:o.z.object({uri:o.z.string(),title:o.z.string()}).nullish()})).nullish(),groundingSupports:o.z.array(o.z.object({segment:o.z.object({startIndex:o.z.number().nullish(),endIndex:o.z.number().nullish(),text:o.z.string().nullish()}),segment_text:o.z.string().nullish(),groundingChunkIndices:o.z.array(o.z.number()).nullish(),supportChunkIndices:o.z.array(o.z.number()).nullish(),confidenceScores:o.z.array(o.z.number()).nullish(),confidenceScore:o.z.array(o.z.number()).nullish()})).nullish(),retrievalMetadata:o.z.union([o.z.object({webDynamicRetrievalScore:o.z.number()}),o.z.object({})]).nullish()}),v=()=>o.z.object({parts:o.z.array(o.z.union([o.z.object({functionCall:o.z.object({name:o.z.string(),args:o.z.unknown()}),thoughtSignature:o.z.string().nullish()}),o.z.object({inlineData:o.z.object({mimeType:o.z.string(),data:o.z.string()})}),o.z.object({executableCode:o.z.object({language:o.z.string(),code:o.z.string()}).nullish(),codeExecutionResult:o.z.object({outcome:o.z.string(),output:o.z.string()}).nullish(),text:o.z.string().nullish(),thought:o.z.boolean().nullish(),thoughtSignature:o.z.string().nullish()})])).nullish()}),b=()=>o.z.object({category:o.z.string().nullish(),probability:o.z.string().nullish(),probabilityScore:o.z.number().nullish(),severity:o.z.string().nullish(),severityScore:o.z.number().nullish(),blocked:o.z.boolean().nullish()}),z=o.z.object({cachedContentTokenCount:o.z.number().nullish(),thoughtsTokenCount:o.z.number().nullish(),promptTokenCount:o.z.number().nullish(),candidatesTokenCount:o.z.number().nullish(),totalTokenCount:o.z.number().nullish()}),w=()=>o.z.object({urlMetadata:o.z.array(o.z.object({retrievedUrl:o.z.string(),urlRetrievalStatus:o.z.string()}))}),k=(0,r.ID)(()=>(0,r.jN)(o.z.object({candidates:o.z.array(o.z.object({content:v().nullish().or(o.z.object({}).strict()),finishReason:o.z.string().nullish(),safetyRatings:o.z.array(b()).nullish(),groundingMetadata:_().nullish(),urlContextMetadata:w().nullish()})),usageMetadata:z.nullish(),promptFeedback:o.z.object({blockReason:o.z.string().nullish(),safetyRatings:o.z.array(b()).nullish()}).nullish()}))),x=(0,r.ID)(()=>(0,r.jN)(o.z.object({candidates:o.z.array(o.z.object({content:v().nullish(),finishReason:o.z.string().nullish(),safetyRatings:o.z.array(b()).nullish(),groundingMetadata:_().nullish(),urlContextMetadata:w().nullish()})).nullish(),usageMetadata:z.nullish(),promptFeedback:o.z.object({blockReason:o.z.string().nullish(),safetyRatings:o.z.array(b()).nullish()}).nullish()}))),I=(0,r.J2)({id:"google.code_execution",name:"code_execution",inputSchema:o.z.object({language:o.z.string().describe("The programming language of the code."),code:o.z.string().describe("The code to be executed.")}),outputSchema:o.z.object({outcome:o.z.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:o.z.string().describe("The output from the code execution.")})}),T={googleSearch:(0,r.hL)({id:"google.google_search",name:"google_search",inputSchema:(0,r.ID)(()=>(0,r.jN)(o.z.object({mode:o.z.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:o.z.number().default(1)})))}),urlContext:(0,r.hL)({id:"google.url_context",name:"url_context",inputSchema:(0,r.ID)(()=>(0,r.jN)(o.z.object({})))}),codeExecution:I},j=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return null!=(e=this.settings.maxImagesPerCall)?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,i;let{prompt:o,n:a=1,size:l="1024x1024",aspectRatio:u="1:1",seed:c,providerOptions:d,headers:p,abortSignal:h}=e,f=[];null!=l&&f.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),null!=c&&f.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let m=await (0,r.xI)({provider:"google",providerOptions:d,schema:S}),g=null!=(i=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?i:new Date,y={sampleCount:a};null!=u&&(y.aspectRatio=u),m&&Object.assign(y,m);let{responseHeaders:_,value:v}=await (0,r.GU)({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:(0,r.m2)(await (0,r.hd)(this.config.headers),p),body:{instances:[{prompt:o}],parameters:y},failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(E),abortSignal:h,fetch:this.config.fetch});return{images:v.predictions.map(e=>e.bytesBase64Encoded),warnings:null!=f?f:[],providerMetadata:{google:{images:v.predictions.map(e=>({}))}},response:{timestamp:g,modelId:this.modelId,headers:_}}}},E=(0,r.ID)(()=>(0,r.jN)(o.z.object({predictions:o.z.array(o.z.object({bytesBase64Encoded:o.z.string()})).default([])}))),S=(0,r.ID)(()=>(0,r.jN)(o.z.object({personGeneration:o.z.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:o.z.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function C(e={}){var t;let n=null!=(t=(0,r.ae)(e.baseURL))?t:"https://generativelanguage.googleapis.com/v1beta",i=()=>(0,r.WZ)({"x-goog-api-key":(0,r.WL)({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},"ai-sdk/google/2.0.20"),o=t=>{var o;return new g(t,{provider:"google.generative-ai",baseURL:n,headers:i,generateId:null!=(o=e.generateId)?o:r.$C,supportedUrls:()=>({"*":[RegExp(`^${n}/files/.*$`),RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},a=t=>new u(t,{provider:"google.generative-ai",baseURL:n,headers:i,fetch:e.fetch}),s=(t,r={})=>new j(t,r,{provider:"google.generative-ai",baseURL:n,headers:i,fetch:e.fetch}),l=function(e){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return o(e)};return l.languageModel=o,l.chat=o,l.generativeAI=o,l.embedding=a,l.textEmbedding=a,l.textEmbeddingModel=a,l.image=s,l.imageModel=s,l.tools=T,l}C()},8024:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]])},8405:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]])},12833:(e,t,n)=>{"use strict";n.d(t,{jr:()=>j});var r=n(55337),i=n(82267),o=n(31296);function a(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.providerOptions)?void 0:t.openaiCompatible)?n:{}}function s({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function l(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var u=o.z.object({user:o.z.string().optional(),reasoningEffort:o.z.string().optional(),textVerbosity:o.z.string().optional()}),c={errorSchema:o.z.object({error:o.z.object({message:o.z.string(),type:o.z.string().nullish(),param:o.z.any().nullish(),code:o.z.union([o.z.string(),o.z.number()]).nullish()})}),errorToMessage:e=>e.error.message},d=class{constructor(e,t){var n,r;this.specificationVersion="v2",this.modelId=e,this.config=t;let o=null!=(n=t.errorStructure)?n:c;this.chunkSchema=f(o.errorSchema),this.failedResponseHandler=(0,i.sl)(o),this.supportsStructuredOutputs=null!=(r=t.supportsStructuredOutputs)&&r}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,n;return null!=(n=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:s,frequencyPenalty:l,presencePenalty:c,providerOptions:d,stopSequences:p,responseFormat:h,seed:f,toolChoice:m,tools:g}){var y,_,v,b;let z=[],w=Object.assign(null!=(y=await (0,i.xI)({provider:"openai-compatible",providerOptions:d,schema:u}))?y:{},null!=(_=await (0,i.xI)({provider:this.providerOptionsName,providerOptions:d,schema:u}))?_:{});null!=s&&z.push({type:"unsupported-setting",setting:"topK"}),(null==h?void 0:h.type)!=="json"||null==h.schema||this.supportsStructuredOutputs||z.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{tools:k,toolChoice:x,toolWarnings:I}=function({tools:e,toolChoice:t}){e=(null==e?void 0:e.length)?e:void 0;let n=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let i=[];for(let t of e)"provider-defined"===t.type?n.push({type:"unsupported-tool",tool:t}):i.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(null==t)return{tools:i,toolChoice:void 0,toolWarnings:n};let o=t.type;switch(o){case"auto":case"none":case"required":return{tools:i,toolChoice:o,toolWarnings:n};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:n};default:throw new r.b8({functionality:`tool choice type: ${o}`})}}({tools:g,toolChoice:m});return{args:{model:this.modelId,user:w.user,max_tokens:t,temperature:n,top_p:o,frequency_penalty:l,presence_penalty:c,response_format:(null==h?void 0:h.type)==="json"?!0===this.supportsStructuredOutputs&&null!=h.schema?{type:"json_schema",json_schema:{schema:h.schema,name:null!=(v=h.name)?v:"response",description:h.description}}:{type:"json_object"}:void 0,stop:p,seed:f,...Object.fromEntries(Object.entries(null!=(b=null==d?void 0:d[this.providerOptionsName])?b:{}).filter(([e])=>!Object.keys(u.shape).includes(e))),reasoning_effort:w.reasoningEffort,verbosity:w.textVerbosity,messages:function(e){let t=[];for(let{role:n,content:o,...s}of e){let e=a({...s});switch(n){case"system":t.push({role:"system",content:o,...e});break;case"user":if(1===o.length&&"text"===o[0].type){t.push({role:"user",content:o[0].text,...a(o[0])});break}t.push({role:"user",content:o.map(e=>{let t=a(e);switch(e.type){case"text":return{type:"text",text:e.text,...t};case"file":if(e.mediaType.startsWith("image/")){let n="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${n};base64,${(0,i.ej)(e.data)}`},...t}}throw new r.b8({functionality:`file part media type ${e.mediaType}`})}}),...e});break;case"assistant":{let n="",r=[];for(let e of o){let t=a(e);switch(e.type){case"text":n+=e.text;break;case"tool-call":r.push({id:e.toolCallId,type:"function",function:{name:e.toolName,arguments:JSON.stringify(e.input)},...t})}}t.push({role:"assistant",content:n,tool_calls:r.length>0?r:void 0,...e});break}case"tool":for(let e of o){let n,r=e.output;switch(r.type){case"text":case"error-text":n=r.value;break;case"content":case"json":case"error-json":n=JSON.stringify(r.value)}let i=a(e);t.push({role:"tool",tool_call_id:e.toolCallId,content:n,...i})}break;default:throw Error(`Unsupported role: ${n}`)}}return t}(e),tools:k,tool_choice:x},warnings:[...z,...I]}}async doGenerate(e){var t,n,r,o,a,u,c,d,p,f,m,g,y,_,v,b,z;let{args:w,warnings:k}=await this.getArgs({...e}),x=JSON.stringify(w),{responseHeaders:I,value:T,rawValue:j}=await (0,i.GU)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),e.headers),body:w,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,i.cV)(h),abortSignal:e.abortSignal,fetch:this.config.fetch}),E=T.choices[0],S=[],C=E.message.content;null!=C&&C.length>0&&S.push({type:"text",text:C});let O=null!=(t=E.message.reasoning_content)?t:E.message.reasoning;if(null!=O&&O.length>0&&S.push({type:"reasoning",text:O}),null!=E.message.tool_calls)for(let e of E.message.tool_calls)S.push({type:"tool-call",toolCallId:null!=(n=e.id)?n:(0,i.$C)(),toolName:e.function.name,input:e.function.arguments});let A={[this.providerOptionsName]:{},...await (null==(o=null==(r=this.config.metadataExtractor)?void 0:r.extractMetadata)?void 0:o.call(r,{parsedBody:j}))},N=null==(a=T.usage)?void 0:a.completion_tokens_details;return(null==N?void 0:N.accepted_prediction_tokens)!=null&&(A[this.providerOptionsName].acceptedPredictionTokens=null==N?void 0:N.accepted_prediction_tokens),(null==N?void 0:N.rejected_prediction_tokens)!=null&&(A[this.providerOptionsName].rejectedPredictionTokens=null==N?void 0:N.rejected_prediction_tokens),{content:S,finishReason:l(E.finish_reason),usage:{inputTokens:null!=(c=null==(u=T.usage)?void 0:u.prompt_tokens)?c:void 0,outputTokens:null!=(p=null==(d=T.usage)?void 0:d.completion_tokens)?p:void 0,totalTokens:null!=(m=null==(f=T.usage)?void 0:f.total_tokens)?m:void 0,reasoningTokens:null!=(_=null==(y=null==(g=T.usage)?void 0:g.completion_tokens_details)?void 0:y.reasoning_tokens)?_:void 0,cachedInputTokens:null!=(z=null==(b=null==(v=T.usage)?void 0:v.prompt_tokens_details)?void 0:b.cached_tokens)?z:void 0},providerMetadata:A,request:{body:x},response:{...s(T),headers:I,body:j},warnings:k}}async doStream(e){var t;let{args:n,warnings:o}=await this.getArgs({...e}),a={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},u=null==(t=this.config.metadataExtractor)?void 0:t.createStreamExtractor(),{responseHeaders:c,value:d}=await (0,i.GU)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),e.headers),body:a,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,i.Ds)(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=[],h="unknown",f={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0},m=!0,g=this.providerOptionsName,y=!1,_=!1;return{stream:d.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:o})},transform(t,n){var o,a,c,d,g,v,b,z,w,k,x,I,T;if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){h="error",n.enqueue({type:"error",error:t.error});return}let j=t.value;if(null==u||u.processChunk(t.rawValue),"error"in j){h="error",n.enqueue({type:"error",error:j.error.message});return}if(m&&(m=!1,n.enqueue({type:"response-metadata",...s(j)})),null!=j.usage){let{prompt_tokens:e,completion_tokens:t,total_tokens:n,prompt_tokens_details:r,completion_tokens_details:i}=j.usage;f.promptTokens=null!=e?e:void 0,f.completionTokens=null!=t?t:void 0,f.totalTokens=null!=n?n:void 0,(null==i?void 0:i.reasoning_tokens)!=null&&(f.completionTokensDetails.reasoningTokens=null==i?void 0:i.reasoning_tokens),(null==i?void 0:i.accepted_prediction_tokens)!=null&&(f.completionTokensDetails.acceptedPredictionTokens=null==i?void 0:i.accepted_prediction_tokens),(null==i?void 0:i.rejected_prediction_tokens)!=null&&(f.completionTokensDetails.rejectedPredictionTokens=null==i?void 0:i.rejected_prediction_tokens),(null==r?void 0:r.cached_tokens)!=null&&(f.promptTokensDetails.cachedTokens=null==r?void 0:r.cached_tokens)}let E=j.choices[0];if((null==E?void 0:E.finish_reason)!=null&&(h=l(E.finish_reason)),(null==E?void 0:E.delta)==null)return;let S=E.delta,C=null!=(o=S.reasoning_content)?o:S.reasoning;if(C&&(y||(n.enqueue({type:"reasoning-start",id:"reasoning-0"}),y=!0),n.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:C})),S.content&&(_||(n.enqueue({type:"text-start",id:"txt-0"}),_=!0),n.enqueue({type:"text-delta",id:"txt-0",delta:S.content})),null!=S.tool_calls)for(let e of S.tool_calls){let t=e.index;if(null==p[t]){if(null==e.id)throw new r.xn({data:e,message:"Expected 'id' to be a string."});if((null==(a=e.function)?void 0:a.name)==null)throw new r.xn({data:e,message:"Expected 'function.name' to be a string."});n.enqueue({type:"tool-input-start",id:e.id,toolName:e.function.name}),p[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(c=e.function.arguments)?c:""},hasFinished:!1};let o=p[t];(null==(d=o.function)?void 0:d.name)!=null&&(null==(g=o.function)?void 0:g.arguments)!=null&&(o.function.arguments.length>0&&n.enqueue({type:"tool-input-delta",id:o.id,delta:o.function.arguments}),(0,i.v0)(o.function.arguments)&&(n.enqueue({type:"tool-input-end",id:o.id}),n.enqueue({type:"tool-call",toolCallId:null!=(v=o.id)?v:(0,i.$C)(),toolName:o.function.name,input:o.function.arguments}),o.hasFinished=!0));continue}let o=p[t];!o.hasFinished&&((null==(b=e.function)?void 0:b.arguments)!=null&&(o.function.arguments+=null!=(w=null==(z=e.function)?void 0:z.arguments)?w:""),n.enqueue({type:"tool-input-delta",id:o.id,delta:null!=(k=e.function.arguments)?k:""}),(null==(x=o.function)?void 0:x.name)!=null&&(null==(I=o.function)?void 0:I.arguments)!=null&&(0,i.v0)(o.function.arguments)&&(n.enqueue({type:"tool-input-end",id:o.id}),n.enqueue({type:"tool-call",toolCallId:null!=(T=o.id)?T:(0,i.$C)(),toolName:o.function.name,input:o.function.arguments}),o.hasFinished=!0))}},flush(e){var t,n,r,o,a,s;for(let n of(y&&e.enqueue({type:"reasoning-end",id:"reasoning-0"}),_&&e.enqueue({type:"text-end",id:"txt-0"}),p.filter(e=>!e.hasFinished)))e.enqueue({type:"tool-input-end",id:n.id}),e.enqueue({type:"tool-call",toolCallId:null!=(t=n.id)?t:(0,i.$C)(),toolName:n.function.name,input:n.function.arguments});let l={[g]:{},...null==u?void 0:u.buildMetadata()};null!=f.completionTokensDetails.acceptedPredictionTokens&&(l[g].acceptedPredictionTokens=f.completionTokensDetails.acceptedPredictionTokens),null!=f.completionTokensDetails.rejectedPredictionTokens&&(l[g].rejectedPredictionTokens=f.completionTokensDetails.rejectedPredictionTokens),e.enqueue({type:"finish",finishReason:h,usage:{inputTokens:null!=(n=f.promptTokens)?n:void 0,outputTokens:null!=(r=f.completionTokens)?r:void 0,totalTokens:null!=(o=f.totalTokens)?o:void 0,reasoningTokens:null!=(a=f.completionTokensDetails.reasoningTokens)?a:void 0,cachedInputTokens:null!=(s=f.promptTokensDetails.cachedTokens)?s:void 0},providerMetadata:l})}})),request:{body:a},response:{headers:c}}}},p=o.z.object({prompt_tokens:o.z.number().nullish(),completion_tokens:o.z.number().nullish(),total_tokens:o.z.number().nullish(),prompt_tokens_details:o.z.object({cached_tokens:o.z.number().nullish()}).nullish(),completion_tokens_details:o.z.object({reasoning_tokens:o.z.number().nullish(),accepted_prediction_tokens:o.z.number().nullish(),rejected_prediction_tokens:o.z.number().nullish()}).nullish()}).nullish(),h=o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({message:o.z.object({role:o.z.literal("assistant").nullish(),content:o.z.string().nullish(),reasoning_content:o.z.string().nullish(),reasoning:o.z.string().nullish(),tool_calls:o.z.array(o.z.object({id:o.z.string().nullish(),function:o.z.object({name:o.z.string(),arguments:o.z.string()})})).nullish()}),finish_reason:o.z.string().nullish()})),usage:p}),f=e=>o.z.union([o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({delta:o.z.object({role:o.z.enum(["assistant"]).nullish(),content:o.z.string().nullish(),reasoning_content:o.z.string().nullish(),reasoning:o.z.string().nullish(),tool_calls:o.z.array(o.z.object({index:o.z.number(),id:o.z.string().nullish(),function:o.z.object({name:o.z.string().nullish(),arguments:o.z.string().nullish()})})).nullish()}).nullish(),finish_reason:o.z.string().nullish()})),usage:p}),e]);function m({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function g(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var y=o.z.object({echo:o.z.boolean().optional(),logitBias:o.z.record(o.z.string(),o.z.number()).optional(),suffix:o.z.string().optional(),user:o.z.string().optional()}),_=class{constructor(e,t){var n;this.specificationVersion="v2",this.modelId=e,this.config=t;let r=null!=(n=t.errorStructure)?n:c;this.chunkSchema=z(r.errorSchema),this.failedResponseHandler=(0,i.sl)(r)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,n;return null!=(n=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d,providerOptions:p,tools:h,toolChoice:f}){var m;let g=[],_=null!=(m=await (0,i.xI)({provider:this.providerOptionsName,providerOptions:p,schema:y}))?m:{};null!=a&&g.push({type:"unsupported-setting",setting:"topK"}),(null==h?void 0:h.length)&&g.push({type:"unsupported-setting",setting:"tools"}),null!=f&&g.push({type:"unsupported-setting",setting:"toolChoice"}),null!=c&&"text"!==c.type&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:v,stopSequences:b}=function({prompt:e,user:t="user",assistant:n="assistant"}){let i="";for(let{role:o,content:a}of("system"===e[0].role&&(i+=`${e[0].content}

`,e=e.slice(1)),e))switch(o){case"system":throw new r.M3({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=a.map(e=>{if("text"===e.type)return e.text}).filter(Boolean).join("");i+=`${t}:
${e}

`;break}case"assistant":{let e=a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new r.b8({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${e}

`;break}case"tool":throw new r.b8({functionality:"tool messages"});default:throw Error(`Unsupported role: ${o}`)}return{prompt:i+=`${n}:
`,stopSequences:[`
${t}:`]}}({prompt:e}),z=[...null!=b?b:[],...null!=u?u:[]];return{args:{model:this.modelId,echo:_.echo,logit_bias:_.logitBias,suffix:_.suffix,user:_.user,max_tokens:t,temperature:n,top_p:o,frequency_penalty:s,presence_penalty:l,seed:d,...null==p?void 0:p[this.providerOptionsName],prompt:v,stop:z.length>0?z:void 0},warnings:g}}async doGenerate(e){var t,n,r,o,a,s;let{args:l,warnings:u}=await this.getArgs(e),{responseHeaders:c,value:d,rawValue:p}=await (0,i.GU)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),e.headers),body:l,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,i.cV)(b),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=d.choices[0],f=[];return null!=h.text&&h.text.length>0&&f.push({type:"text",text:h.text}),{content:f,usage:{inputTokens:null!=(n=null==(t=d.usage)?void 0:t.prompt_tokens)?n:void 0,outputTokens:null!=(o=null==(r=d.usage)?void 0:r.completion_tokens)?o:void 0,totalTokens:null!=(s=null==(a=d.usage)?void 0:a.total_tokens)?s:void 0},finishReason:g(h.finish_reason),request:{body:l},response:{...m(d),headers:c,body:p},warnings:u}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:o,value:a}=await (0,i.GU)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,i.Ds)(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),s="unknown",l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},u=!0;return{stream:a.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,n){var r,i,o;if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){s="error",n.enqueue({type:"error",error:t.error});return}let a=t.value;if("error"in a){s="error",n.enqueue({type:"error",error:a.error});return}u&&(u=!1,n.enqueue({type:"response-metadata",...m(a)}),n.enqueue({type:"text-start",id:"0"})),null!=a.usage&&(l.inputTokens=null!=(r=a.usage.prompt_tokens)?r:void 0,l.outputTokens=null!=(i=a.usage.completion_tokens)?i:void 0,l.totalTokens=null!=(o=a.usage.total_tokens)?o:void 0);let c=a.choices[0];(null==c?void 0:c.finish_reason)!=null&&(s=g(c.finish_reason)),(null==c?void 0:c.text)!=null&&n.enqueue({type:"text-delta",id:"0",delta:c.text})},flush(e){u||e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:s,usage:l})}})),request:{body:r},response:{headers:o}}}},v=o.z.object({prompt_tokens:o.z.number(),completion_tokens:o.z.number(),total_tokens:o.z.number()}),b=o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({text:o.z.string(),finish_reason:o.z.string()})),usage:v.nullish()}),z=e=>o.z.union([o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({text:o.z.string(),finish_reason:o.z.string().nullish(),index:o.z.number()})),usage:v.nullish()}),e]),w=o.z.object({dimensions:o.z.number().optional(),user:o.z.string().optional()}),k=class{constructor(e,t){this.specificationVersion="v2",this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.config.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.config.supportsParallelCalls)||e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:o}){var a,s,l;let u=Object.assign(null!=(a=await (0,i.xI)({provider:"openai-compatible",providerOptions:o,schema:w}))?a:{},null!=(s=await (0,i.xI)({provider:this.providerOptionsName,providerOptions:o,schema:w}))?s:{});if(e.length>this.maxEmbeddingsPerCall)throw new r.Ch({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:d,value:p,rawValue:h}=await (0,i.GU)({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:u.dimensions,user:u.user},failedResponseHandler:(0,i.sl)(null!=(l=this.config.errorStructure)?l:c),successfulResponseHandler:(0,i.cV)(x),abortSignal:n,fetch:this.config.fetch});return{embeddings:p.data.map(e=>e.embedding),usage:p.usage?{tokens:p.usage.prompt_tokens}:void 0,providerMetadata:p.providerMetadata,response:{headers:d,body:h}}}},x=o.z.object({data:o.z.array(o.z.object({embedding:o.z.array(o.z.number())})),usage:o.z.object({prompt_tokens:o.z.number()}).nullish(),providerMetadata:o.z.record(o.z.string(),o.z.record(o.z.string(),o.z.any())).optional()}),I=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:o,providerOptions:a,headers:s,abortSignal:l}){var u,d,p,h,f;let m=[];null!=r&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=o&&m.push({type:"unsupported-setting",setting:"seed"});let g=null!=(p=null==(d=null==(u=this.config._internal)?void 0:u.currentDate)?void 0:d.call(u))?p:new Date,{value:y,responseHeaders:_}=await (0,i.GU)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,i.m2)(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...null!=(h=a.openai)?h:{},response_format:"b64_json"},failedResponseHandler:(0,i.sl)(null!=(f=this.config.errorStructure)?f:c),successfulResponseHandler:(0,i.cV)(T),abortSignal:l,fetch:this.config.fetch});return{images:y.data.map(e=>e.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:_}}}},T=o.z.object({data:o.z.array(o.z.object({b64_json:o.z.string()}))});function j(e){let t=(0,i.ae)(e.baseURL),n=e.name,r={...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers},o=()=>(0,i.WZ)(r,"ai-sdk/openai-compatible/1.0.22"),a=r=>({provider:`${n}.${r}`,url:({path:n})=>{let r=new URL(`${t}${n}`);return e.queryParams&&(r.search=new URLSearchParams(e.queryParams).toString()),r.toString()},headers:o,fetch:e.fetch}),s=e=>l(e),l=t=>new d(t,{...a("chat"),includeUsage:e.includeUsage,supportsStructuredOutputs:e.supportsStructuredOutputs}),u=e=>s(e);return u.languageModel=s,u.chatModel=l,u.completionModel=t=>new _(t,{...a("completion"),includeUsage:e.includeUsage}),u.textEmbeddingModel=e=>new k(e,{...a("embedding")}),u.imageModel=e=>new I(e,a("image")),u}},13444:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},19594:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24508:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},28442:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},31296:(e,t,n)=>{"use strict";n.d(t,{bpZ:()=>r.safeParseAsync,blZ:()=>r.toJSONSchema,z:()=>r});var r=n(17050)},39020:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,o=l(e),a=o[0],s=o[1],u=new i((a+s)*3/4-s),c=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(function(e,t,r){for(var i,o=[],a=t;a<r;a+=3)i=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,a,a+16383>s?s:a+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r[45]=62,r[95]=63},39530:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},39690:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},43755:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},46098:(e,t,n)=>{"use strict";n.d(t,{nM:()=>W});var r=n(55337),i=n(82267),o=n(31296),a=n(50887).hp,s=(0,i.ID)(()=>(0,i.jN)(o.z.object({type:o.z.literal("error"),error:o.z.object({type:o.z.string(),message:o.z.string()})}))),l=(0,i.sl)({errorSchema:s,errorToMessage:e=>e.error.message}),u=(0,i.ID)(()=>(0,i.jN)(o.z.object({type:o.z.literal("message"),id:o.z.string().nullish(),model:o.z.string().nullish(),content:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("text"),text:o.z.string(),citations:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("web_search_result_location"),cited_text:o.z.string(),url:o.z.string(),title:o.z.string(),encrypted_index:o.z.string()}),o.z.object({type:o.z.literal("page_location"),cited_text:o.z.string(),document_index:o.z.number(),document_title:o.z.string().nullable(),start_page_number:o.z.number(),end_page_number:o.z.number()}),o.z.object({type:o.z.literal("char_location"),cited_text:o.z.string(),document_index:o.z.number(),document_title:o.z.string().nullable(),start_char_index:o.z.number(),end_char_index:o.z.number()})])).optional()}),o.z.object({type:o.z.literal("thinking"),thinking:o.z.string(),signature:o.z.string()}),o.z.object({type:o.z.literal("redacted_thinking"),data:o.z.string()}),o.z.object({type:o.z.literal("tool_use"),id:o.z.string(),name:o.z.string(),input:o.z.unknown()}),o.z.object({type:o.z.literal("server_tool_use"),id:o.z.string(),name:o.z.string(),input:o.z.record(o.z.string(),o.z.unknown()).nullish()}),o.z.object({type:o.z.literal("web_fetch_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.object({type:o.z.literal("web_fetch_result"),url:o.z.string(),retrieved_at:o.z.string(),content:o.z.object({type:o.z.literal("document"),title:o.z.string().nullable(),citations:o.z.object({enabled:o.z.boolean()}).optional(),source:o.z.object({type:o.z.literal("text"),media_type:o.z.string(),data:o.z.string()})})}),o.z.object({type:o.z.literal("web_fetch_tool_result_error"),error_code:o.z.string()})])}),o.z.object({type:o.z.literal("web_search_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.array(o.z.object({type:o.z.literal("web_search_result"),url:o.z.string(),title:o.z.string(),encrypted_content:o.z.string(),page_age:o.z.string().nullish()})),o.z.object({type:o.z.literal("web_search_tool_result_error"),error_code:o.z.string()})])}),o.z.object({type:o.z.literal("code_execution_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.object({type:o.z.literal("code_execution_result"),stdout:o.z.string(),stderr:o.z.string(),return_code:o.z.number()}),o.z.object({type:o.z.literal("code_execution_tool_result_error"),error_code:o.z.string()})])})])),stop_reason:o.z.string().nullish(),stop_sequence:o.z.string().nullish(),usage:o.z.looseObject({input_tokens:o.z.number(),output_tokens:o.z.number(),cache_creation_input_tokens:o.z.number().nullish(),cache_read_input_tokens:o.z.number().nullish()})}))),c=(0,i.ID)(()=>(0,i.jN)(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("message_start"),message:o.z.object({id:o.z.string().nullish(),model:o.z.string().nullish(),usage:o.z.looseObject({input_tokens:o.z.number(),cache_creation_input_tokens:o.z.number().nullish(),cache_read_input_tokens:o.z.number().nullish()})})}),o.z.object({type:o.z.literal("content_block_start"),index:o.z.number(),content_block:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("text"),text:o.z.string()}),o.z.object({type:o.z.literal("thinking"),thinking:o.z.string()}),o.z.object({type:o.z.literal("tool_use"),id:o.z.string(),name:o.z.string()}),o.z.object({type:o.z.literal("redacted_thinking"),data:o.z.string()}),o.z.object({type:o.z.literal("server_tool_use"),id:o.z.string(),name:o.z.string(),input:o.z.record(o.z.string(),o.z.unknown()).nullish()}),o.z.object({type:o.z.literal("web_fetch_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.object({type:o.z.literal("web_fetch_result"),url:o.z.string(),retrieved_at:o.z.string(),content:o.z.object({type:o.z.literal("document"),title:o.z.string().nullable(),citations:o.z.object({enabled:o.z.boolean()}).optional(),source:o.z.object({type:o.z.literal("text"),media_type:o.z.string(),data:o.z.string()})})}),o.z.object({type:o.z.literal("web_fetch_tool_result_error"),error_code:o.z.string()})])}),o.z.object({type:o.z.literal("web_search_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.array(o.z.object({type:o.z.literal("web_search_result"),url:o.z.string(),title:o.z.string(),encrypted_content:o.z.string(),page_age:o.z.string().nullish()})),o.z.object({type:o.z.literal("web_search_tool_result_error"),error_code:o.z.string()})])}),o.z.object({type:o.z.literal("code_execution_tool_result"),tool_use_id:o.z.string(),content:o.z.union([o.z.object({type:o.z.literal("code_execution_result"),stdout:o.z.string(),stderr:o.z.string(),return_code:o.z.number()}),o.z.object({type:o.z.literal("code_execution_tool_result_error"),error_code:o.z.string()})])})])}),o.z.object({type:o.z.literal("content_block_delta"),index:o.z.number(),delta:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("input_json_delta"),partial_json:o.z.string()}),o.z.object({type:o.z.literal("text_delta"),text:o.z.string()}),o.z.object({type:o.z.literal("thinking_delta"),thinking:o.z.string()}),o.z.object({type:o.z.literal("signature_delta"),signature:o.z.string()}),o.z.object({type:o.z.literal("citations_delta"),citation:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("web_search_result_location"),cited_text:o.z.string(),url:o.z.string(),title:o.z.string(),encrypted_index:o.z.string()}),o.z.object({type:o.z.literal("page_location"),cited_text:o.z.string(),document_index:o.z.number(),document_title:o.z.string().nullable(),start_page_number:o.z.number(),end_page_number:o.z.number()}),o.z.object({type:o.z.literal("char_location"),cited_text:o.z.string(),document_index:o.z.number(),document_title:o.z.string().nullable(),start_char_index:o.z.number(),end_char_index:o.z.number()})])})])}),o.z.object({type:o.z.literal("content_block_stop"),index:o.z.number()}),o.z.object({type:o.z.literal("error"),error:o.z.object({type:o.z.string(),message:o.z.string()})}),o.z.object({type:o.z.literal("message_delta"),delta:o.z.object({stop_reason:o.z.string().nullish(),stop_sequence:o.z.string().nullish()}),usage:o.z.looseObject({output_tokens:o.z.number(),cache_creation_input_tokens:o.z.number().nullish()})}),o.z.object({type:o.z.literal("message_stop")}),o.z.object({type:o.z.literal("ping")})]))),d=(0,i.ID)(()=>(0,i.jN)(o.z.object({signature:o.z.string().optional(),redactedData:o.z.string().optional()}))),p=o.z.object({citations:o.z.object({enabled:o.z.boolean()}).optional(),title:o.z.string().optional(),context:o.z.string().optional()}),h=o.z.object({sendReasoning:o.z.boolean().optional(),thinking:o.z.object({type:o.z.union([o.z.literal("enabled"),o.z.literal("disabled")]),budgetTokens:o.z.number().optional()}).optional(),disableParallelToolUse:o.z.boolean().optional(),cacheControl:o.z.object({type:o.z.literal("ephemeral"),ttl:o.z.union([o.z.literal("5m"),o.z.literal("1h")]).optional()}).optional()});function f(e){var t;let n=null==e?void 0:e.anthropic;return null!=(t=null==n?void 0:n.cacheControl)?t:null==n?void 0:n.cache_control}var m=(0,i.ID)(()=>(0,i.jN)(o.z.object({maxCharacters:o.z.number().optional()}))),g=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.enum(["view","create","str_replace","insert"]),path:o.z.string(),file_text:o.z.string().optional(),insert_line:o.z.number().int().optional(),new_str:o.z.string().optional(),old_str:o.z.string().optional(),view_range:o.z.array(o.z.number().int()).optional()}))),y=(0,i.hL)({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:g}),_=(0,i.ID)(()=>(0,i.jN)(o.z.object({maxUses:o.z.number().optional(),allowedDomains:o.z.array(o.z.string()).optional(),blockedDomains:o.z.array(o.z.string()).optional(),userLocation:o.z.object({type:o.z.literal("approximate"),city:o.z.string().optional(),region:o.z.string().optional(),country:o.z.string().optional(),timezone:o.z.string().optional()}).optional()}))),v=(0,i.ID)(()=>(0,i.jN)(o.z.array(o.z.object({url:o.z.string(),title:o.z.string(),pageAge:o.z.string().nullable(),encryptedContent:o.z.string(),type:o.z.literal("web_search_result")})))),b=(0,i.ID)(()=>(0,i.jN)(o.z.object({query:o.z.string()}))),z=(0,i.J2)({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:b,outputSchema:v}),w=(0,i.ID)(()=>(0,i.jN)(o.z.object({maxUses:o.z.number().optional(),allowedDomains:o.z.array(o.z.string()).optional(),blockedDomains:o.z.array(o.z.string()).optional(),citations:o.z.object({enabled:o.z.boolean()}).optional(),maxContentTokens:o.z.number().optional()}))),k=(0,i.ID)(()=>(0,i.jN)(o.z.object({type:o.z.literal("web_fetch_result"),url:o.z.string(),content:o.z.object({type:o.z.literal("document"),title:o.z.string(),citations:o.z.object({enabled:o.z.boolean()}).optional(),source:o.z.union([o.z.object({type:o.z.literal("base64"),mediaType:o.z.literal("application/pdf"),data:o.z.string()}),o.z.object({type:o.z.literal("text"),mediaType:o.z.literal("text/plain"),data:o.z.string()})])}),retrievedAt:o.z.string().nullable()}))),x=(0,i.ID)(()=>(0,i.jN)(o.z.object({url:o.z.string()}))),I=(0,i.J2)({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:x,outputSchema:k});async function T({tools:e,toolChoice:t,disableParallelToolUse:n}){e=(null==e?void 0:e.length)?e:void 0;let o=[],a=new Set;if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:a};let s=[];for(let t of e)switch(t.type){case"function":{let e=f(t.providerOptions);s.push({name:t.name,description:t.description,input_schema:t.inputSchema,cache_control:e});break}case"provider-defined":switch(t.id){case"anthropic.code_execution_20250522":a.add("code-execution-2025-05-22"),s.push({type:"code_execution_20250522",name:"code_execution"});break;case"anthropic.computer_20250124":a.add("computer-use-2025-01-24"),s.push({name:"computer",type:"computer_20250124",display_width_px:t.args.displayWidthPx,display_height_px:t.args.displayHeightPx,display_number:t.args.displayNumber});break;case"anthropic.computer_20241022":a.add("computer-use-2024-10-22"),s.push({name:"computer",type:"computer_20241022",display_width_px:t.args.displayWidthPx,display_height_px:t.args.displayHeightPx,display_number:t.args.displayNumber});break;case"anthropic.text_editor_20250124":a.add("computer-use-2025-01-24"),s.push({name:"str_replace_editor",type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":a.add("computer-use-2024-10-22"),s.push({name:"str_replace_editor",type:"text_editor_20241022"});break;case"anthropic.text_editor_20250429":a.add("computer-use-2025-01-24"),s.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429"});break;case"anthropic.text_editor_20250728":{let e=await (0,i.k5)({value:t.args,schema:m});s.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:e.maxCharacters});break}case"anthropic.bash_20250124":a.add("computer-use-2025-01-24"),s.push({name:"bash",type:"bash_20250124"});break;case"anthropic.bash_20241022":a.add("computer-use-2024-10-22"),s.push({name:"bash",type:"bash_20241022"});break;case"anthropic.web_fetch_20250910":{a.add("web-fetch-2025-09-10");let e=await (0,i.k5)({value:t.args,schema:w});s.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:e.maxUses,allowed_domains:e.allowedDomains,blocked_domains:e.blockedDomains,citations:e.citations,max_content_tokens:e.maxContentTokens});break}case"anthropic.web_search_20250305":{let e=await (0,i.k5)({value:t.args,schema:_});s.push({type:"web_search_20250305",name:"web_search",max_uses:e.maxUses,allowed_domains:e.allowedDomains,blocked_domains:e.blockedDomains,user_location:e.userLocation});break}default:o.push({type:"unsupported-tool",tool:t})}break;default:o.push({type:"unsupported-tool",tool:t})}if(null==t)return{tools:s,toolChoice:n?{type:"auto",disable_parallel_tool_use:n}:void 0,toolWarnings:o,betas:a};let l=t.type;switch(l){case"auto":return{tools:s,toolChoice:{type:"auto",disable_parallel_tool_use:n},toolWarnings:o,betas:a};case"required":return{tools:s,toolChoice:{type:"any",disable_parallel_tool_use:n},toolWarnings:o,betas:a};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:o,betas:a};case"tool":return{tools:s,toolChoice:{type:"tool",name:t.toolName,disable_parallel_tool_use:n},toolWarnings:o,betas:a};default:throw new r.b8({functionality:`tool choice type: ${l}`})}}var j=(0,i.ID)(()=>(0,i.jN)(o.z.object({type:o.z.literal("code_execution_result"),stdout:o.z.string(),stderr:o.z.string(),return_code:o.z.number()}))),E=(0,i.ID)(()=>(0,i.jN)(o.z.object({code:o.z.string()}))),S=(0,i.J2)({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:E,outputSchema:j});async function C({prompt:e,sendReasoning:t,warnings:n}){var o,s,l,u,c;let h,m=new Set,g=function(e){let t,n=[];for(let r of e){let{role:e}=r;switch(e){case"system":(null==t?void 0:t.type)!=="system"&&(t={type:"system",messages:[]},n.push(t)),t.messages.push(r);break;case"assistant":(null==t?void 0:t.type)!=="assistant"&&(t={type:"assistant",messages:[]},n.push(t)),t.messages.push(r);break;case"user":case"tool":(null==t?void 0:t.type)!=="user"&&(t={type:"user",messages:[]},n.push(t)),t.messages.push(r);break;default:throw Error(`Unsupported role: ${e}`)}}return n}(e),y=[];async function _(e){var t,n;let r=await (0,i.xI)({provider:"anthropic",providerOptions:e,schema:p});return null!=(n=null==(t=null==r?void 0:r.citations)?void 0:t.enabled)&&n}async function b(e){let t=await (0,i.xI)({provider:"anthropic",providerOptions:e,schema:p});return{title:null==t?void 0:t.title,context:null==t?void 0:t.context}}for(let e=0;e<g.length;e++){let p=g[e],z=e===g.length-1,w=p.type;switch(w){case"system":if(null!=h)throw new r.b8({functionality:"Multiple system messages that are separated by user/assistant messages"});h=p.messages.map(({content:e,providerOptions:t})=>({type:"text",text:e,cache_control:f(t)}));break;case"user":{let e=[];for(let t of p.messages){let{role:n,content:c}=t;switch(n){case"user":for(let n=0;n<c.length;n++){let u=c[n],d=n===c.length-1,p=null!=(o=f(u.providerOptions))?o:d?f(t.providerOptions):void 0;switch(u.type){case"text":e.push({type:"text",text:u.text,cache_control:p});break;case"file":if(u.mediaType.startsWith("image/"))e.push({type:"image",source:u.data instanceof URL?{type:"url",url:u.data.toString()}:{type:"base64",media_type:"image/*"===u.mediaType?"image/jpeg":u.mediaType,data:(0,i.ej)(u.data)},cache_control:p});else if("application/pdf"===u.mediaType){m.add("pdfs-2024-09-25");let t=await _(u.providerOptions),n=await b(u.providerOptions);e.push({type:"document",source:u.data instanceof URL?{type:"url",url:u.data.toString()}:{type:"base64",media_type:"application/pdf",data:(0,i.ej)(u.data)},title:null!=(s=n.title)?s:u.filename,...n.context&&{context:n.context},...t&&{citations:{enabled:!0}},cache_control:p})}else if("text/plain"===u.mediaType){let t=await _(u.providerOptions),n=await b(u.providerOptions);e.push({type:"document",source:u.data instanceof URL?{type:"url",url:u.data.toString()}:{type:"text",media_type:"text/plain",data:function(e){if("string"==typeof e)return a.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);if(e instanceof URL)throw new r.b8({functionality:"URL-based text documents are not supported for citations"});throw new r.b8({functionality:`unsupported data type for text documents: ${typeof e}`})}(u.data)},title:null!=(l=n.title)?l:u.filename,...n.context&&{context:n.context},...t&&{citations:{enabled:!0}},cache_control:p})}else throw new r.b8({functionality:`media type: ${u.mediaType}`})}}break;case"tool":for(let n=0;n<c.length;n++){let i,o=c[n],a=n===c.length-1,s=null!=(u=f(o.providerOptions))?u:a?f(t.providerOptions):void 0,l=o.output;switch(l.type){case"content":i=l.value.map(e=>{switch(e.type){case"text":return{type:"text",text:e.text,cache_control:void 0};case"media":if(e.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:e.mediaType,data:e.data},cache_control:void 0};if("application/pdf"===e.mediaType)return m.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:e.mediaType,data:e.data},cache_control:void 0};throw new r.b8({functionality:`media type: ${e.mediaType}`})}});break;case"text":case"error-text":i=l.value;break;default:i=JSON.stringify(l.value)}e.push({type:"tool_result",tool_use_id:o.toolCallId,content:i,is_error:"error-text"===l.type||"error-json"===l.type||void 0,cache_control:s})}break;default:throw Error(`Unsupported role: ${n}`)}}y.push({role:"user",content:e});break}case"assistant":{let e=[];for(let r=0;r<p.messages.length;r++){let o=p.messages[r],a=r===p.messages.length-1,{content:s}=o;for(let r=0;r<s.length;r++){let l=s[r],u=r===s.length-1,p=null!=(c=f(l.providerOptions))?c:u?f(o.providerOptions):void 0;switch(l.type){case"text":e.push({type:"text",text:z&&a&&u?l.text.trim():l.text,cache_control:p});break;case"reasoning":if(t){let t=await (0,i.xI)({provider:"anthropic",providerOptions:l.providerOptions,schema:d});null!=t?null!=t.signature?e.push({type:"thinking",thinking:l.text,signature:t.signature,cache_control:p}):null!=t.redactedData?e.push({type:"redacted_thinking",data:t.redactedData,cache_control:p}):n.push({type:"other",message:"unsupported reasoning metadata"}):n.push({type:"other",message:"unsupported reasoning metadata"})}else n.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"tool-call":if(l.providerExecuted){"code_execution"===l.toolName||"web_fetch"===l.toolName||"web_search"===l.toolName?e.push({type:"server_tool_use",id:l.toolCallId,name:l.toolName,input:l.input,cache_control:p}):n.push({type:"other",message:`provider executed tool call for tool ${l.toolName} is not supported`});break}e.push({type:"tool_use",id:l.toolCallId,name:l.toolName,input:l.input,cache_control:p});break;case"tool-result":if("code_execution"===l.toolName){let t=l.output;if("json"!==t.type){n.push({type:"other",message:`provider executed tool result output type ${t.type} for tool ${l.toolName} is not supported`});break}let r=await (0,i.k5)({value:t.value,schema:j});e.push({type:"code_execution_tool_result",tool_use_id:l.toolCallId,content:{type:r.type,stdout:r.stdout,stderr:r.stderr,return_code:r.return_code},cache_control:p});break}if("web_fetch"===l.toolName){let t=l.output;if("json"!==t.type){n.push({type:"other",message:`provider executed tool result output type ${t.type} for tool ${l.toolName} is not supported`});break}let r=await (0,i.k5)({value:t.value,schema:k});e.push({type:"web_fetch_tool_result",tool_use_id:l.toolCallId,content:{type:"web_fetch_result",url:r.url,retrieved_at:r.retrievedAt,content:{type:"document",title:r.content.title,citations:r.content.citations,source:{type:r.content.source.type,media_type:r.content.source.mediaType,data:r.content.source.data}}},cache_control:p});break}if("web_search"===l.toolName){let t=l.output;if("json"!==t.type){n.push({type:"other",message:`provider executed tool result output type ${t.type} for tool ${l.toolName} is not supported`});break}let r=await (0,i.k5)({value:t.value,schema:v});e.push({type:"web_search_tool_result",tool_use_id:l.toolCallId,content:r.map(e=>({url:e.url,title:e.title,page_age:e.pageAge,encrypted_content:e.encryptedContent,type:e.type})),cache_control:p});break}n.push({type:"other",message:`provider executed tool result for tool ${l.toolName} is not supported`})}}}y.push({role:"assistant",content:e});break}default:throw Error(`content type: ${w}`)}}return{prompt:{system:h,messages:y},betas:m}}function O({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function A(e,t,n){var r;if("page_location"!==e.type&&"char_location"!==e.type)return;let i=t[e.document_index];if(i)return{type:"source",sourceType:"document",id:n(),mediaType:i.mediaType,title:null!=(r=e.document_title)?r:i.title,filename:i.filename,providerMetadata:{anthropic:"page_location"===e.type?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}var N=class{constructor(e,t){var n;this.specificationVersion="v2",this.modelId=e,this.config=t,this.generateId=null!=(n=t.generateId)?n:i.$C}supportsUrl(e){return"https:"===e.protocol}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return null!=(n=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?n:{}}async getArgs({prompt:e,maxOutputTokens:t=4096,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d,tools:p,toolChoice:f,providerOptions:m}){var g,y,_;let v=[];null!=s&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=l&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=d&&v.push({type:"unsupported-setting",setting:"seed"}),(null==c?void 0:c.type)==="json"&&(null==c.schema?v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):null!=p&&v.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));let b=(null==c?void 0:c.type)==="json"&&null!=c.schema?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:c.schema}:void 0,z=await (0,i.xI)({provider:"anthropic",providerOptions:m,schema:h}),{prompt:w,betas:k}=await C({prompt:e,sendReasoning:null==(g=null==z?void 0:z.sendReasoning)||g,warnings:v}),x=(null==(y=null==z?void 0:z.thinking)?void 0:y.type)==="enabled",I=null==(_=null==z?void 0:z.thinking)?void 0:_.budgetTokens,j={model:this.modelId,max_tokens:t,temperature:n,top_k:a,top_p:o,stop_sequences:u,...x&&{thinking:{type:"enabled",budget_tokens:I}},system:w.system,messages:w.messages};if(x){if(null==I)throw new r.b8({functionality:"thinking requires a budget"});null!=j.temperature&&(j.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),null!=a&&(j.top_k=void 0,v.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),null!=o&&(j.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),j.max_tokens=t+I}let{tools:E,toolChoice:S,toolWarnings:O,betas:A}=await T(null!=b?{tools:[b],toolChoice:{type:"tool",toolName:b.name},disableParallelToolUse:!0}:{tools:null!=p?p:[],toolChoice:f,disableParallelToolUse:null==z?void 0:z.disableParallelToolUse});return{args:{...j,tools:E,tool_choice:S},warnings:[...v,...O],betas:new Set([...k,...A]),usesJsonResponseTool:null!=b}}async getHeaders({betas:e,headers:t}){return(0,i.m2)(await (0,i.hd)(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,n,r;return null!=(r=null==(n=(t=this.config).buildRequestUrl)?void 0:n.call(t,this.config.baseURL,e))?r:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,n,r;return null!=(r=null==(n=(t=this.config).transformRequestBody)?void 0:n.call(t,e))?r:e}extractCitationDocuments(e){return e.filter(e=>"user"===e.role).flatMap(e=>e.content).filter(e=>{var t,n;if("file"!==e.type||"application/pdf"!==e.mediaType&&"text/plain"!==e.mediaType)return!1;let r=null==(t=e.providerOptions)?void 0:t.anthropic,i=null==r?void 0:r.citations;return null!=(n=null==i?void 0:i.enabled)&&n}).map(e=>{var t;return{title:null!=(t=e.filename)?t:"Untitled Document",filename:e.filename,mediaType:e.mediaType}})}async doGenerate(e){var t,n,r,o,a,s;let{args:c,warnings:d,betas:p,usesJsonResponseTool:h}=await this.getArgs(e),f=this.extractCitationDocuments(e.prompt),{responseHeaders:m,value:g,rawValue:y}=await (0,i.GU)({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:p,headers:e.headers}),body:this.transformRequestBody(c),failedResponseHandler:l,successfulResponseHandler:(0,i.cV)(u),abortSignal:e.abortSignal,fetch:this.config.fetch}),_=[];for(let e of g.content)switch(e.type){case"text":if(!h&&(_.push({type:"text",text:e.text}),e.citations))for(let t of e.citations){let e=A(t,f,this.generateId);e&&_.push(e)}break;case"thinking":_.push({type:"reasoning",text:e.thinking,providerMetadata:{anthropic:{signature:e.signature}}});break;case"redacted_thinking":_.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:e.data}}});break;case"tool_use":_.push(h?{type:"text",text:JSON.stringify(e.input)}:{type:"tool-call",toolCallId:e.id,toolName:e.name,input:JSON.stringify(e.input)});break;case"server_tool_use":("web_search"===e.name||"code_execution"===e.name||"web_fetch"===e.name)&&_.push({type:"tool-call",toolCallId:e.id,toolName:e.name,input:JSON.stringify(e.input),providerExecuted:!0});break;case"web_fetch_tool_result":"web_fetch_result"===e.content.type?_.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:e.content.url,retrievedAt:e.content.retrieved_at,content:{type:e.content.content.type,title:e.content.content.title,citations:e.content.content.citations,source:{type:e.content.content.source.type,mediaType:e.content.content.source.media_type,data:e.content.content.source.data}}},providerExecuted:!0}):"web_fetch_tool_result_error"===e.content.type&&_.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0});break;case"web_search_tool_result":if(Array.isArray(e.content))for(let n of(_.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_search",result:e.content.map(e=>{var t;return{url:e.url,title:e.title,pageAge:null!=(t=e.page_age)?t:null,encryptedContent:e.encrypted_content,type:e.type}}),providerExecuted:!0}),e.content))_.push({type:"source",sourceType:"url",id:this.generateId(),url:n.url,title:n.title,providerMetadata:{anthropic:{pageAge:null!=(t=n.page_age)?t:null}}});else _.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0});break;case"code_execution_tool_result":"code_execution_result"===e.content.type?_.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"code_execution",result:{type:e.content.type,stdout:e.content.stdout,stderr:e.content.stderr,return_code:e.content.return_code},providerExecuted:!0}):"code_execution_tool_result_error"===e.content.type&&_.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0})}return{content:_,finishReason:O({finishReason:g.stop_reason,isJsonResponseFromTool:h}),usage:{inputTokens:g.usage.input_tokens,outputTokens:g.usage.output_tokens,totalTokens:g.usage.input_tokens+g.usage.output_tokens,cachedInputTokens:null!=(n=g.usage.cache_read_input_tokens)?n:void 0},request:{body:c},response:{id:null!=(r=g.id)?r:void 0,modelId:null!=(o=g.model)?o:void 0,headers:m,body:y},warnings:d,providerMetadata:{anthropic:{usage:g.usage,cacheCreationInputTokens:null!=(a=g.usage.cache_creation_input_tokens)?a:null,stopSequence:null!=(s=g.stop_sequence)?s:null}}}}async doStream(e){let t,n,{args:r,warnings:o,betas:a,usesJsonResponseTool:s}=await this.getArgs(e),u=this.extractCitationDocuments(e.prompt),d={...r,stream:!0},{responseHeaders:p,value:h}=await (0,i.GU)({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:a,headers:e.headers}),body:this.transformRequestBody(d),failedResponseHandler:l,successfulResponseHandler:(0,i.Ds)(c),abortSignal:e.abortSignal,fetch:this.config.fetch}),f="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},g={},y=null,_=null,v=this.generateId;return{stream:h.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:o})},transform(r,i){var o,a,l,c,d,p,h,b;if(e.includeRawChunks&&i.enqueue({type:"raw",rawValue:r.rawValue}),!r.success)return void i.enqueue({type:"error",error:r.error});let z=r.value;switch(z.type){case"ping":return;case"content_block_start":{let e=z.content_block.type;switch(n=e,e){case"text":g[z.index]={type:"text"},i.enqueue({type:"text-start",id:String(z.index)});return;case"thinking":g[z.index]={type:"reasoning"},i.enqueue({type:"reasoning-start",id:String(z.index)});return;case"redacted_thinking":g[z.index]={type:"reasoning"},i.enqueue({type:"reasoning-start",id:String(z.index),providerMetadata:{anthropic:{redactedData:z.content_block.data}}});return;case"tool_use":g[z.index]=s?{type:"text"}:{type:"tool-call",toolCallId:z.content_block.id,toolName:z.content_block.name,input:""},i.enqueue(s?{type:"text-start",id:String(z.index)}:{type:"tool-input-start",id:z.content_block.id,toolName:z.content_block.name});return;case"server_tool_use":("web_fetch"===z.content_block.name||"web_search"===z.content_block.name||"code_execution"===z.content_block.name)&&(g[z.index]={type:"tool-call",toolCallId:z.content_block.id,toolName:z.content_block.name,input:"",providerExecuted:!0},i.enqueue({type:"tool-input-start",id:z.content_block.id,toolName:z.content_block.name,providerExecuted:!0}));return;case"web_fetch_tool_result":{let e=z.content_block;"web_fetch_result"===e.content.type?i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:e.content.url,retrievedAt:e.content.retrieved_at,content:{type:e.content.content.type,title:e.content.content.title,citations:e.content.content.citations,source:{type:e.content.content.source.type,mediaType:e.content.content.source.media_type,data:e.content.content.source.data}}}}):"web_fetch_tool_result_error"===e.content.type&&i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let e=z.content_block;if(Array.isArray(e.content))for(let t of(i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_search",result:e.content.map(e=>{var t;return{url:e.url,title:e.title,pageAge:null!=(t=e.page_age)?t:null,encryptedContent:e.encrypted_content,type:e.type}}),providerExecuted:!0}),e.content))i.enqueue({type:"source",sourceType:"url",id:v(),url:t.url,title:t.title,providerMetadata:{anthropic:{pageAge:null!=(o=t.page_age)?o:null}}});else i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let e=z.content_block;"code_execution_result"===e.content.type?i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"code_execution",result:{type:e.content.type,stdout:e.content.stdout,stderr:e.content.stderr,return_code:e.content.return_code},providerExecuted:!0}):"code_execution_tool_result_error"===e.content.type&&i.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:e.content.error_code},providerExecuted:!0});return}default:throw Error(`Unsupported content block type: ${e}`)}}case"content_block_stop":if(null!=g[z.index]){let e=g[z.index];switch(e.type){case"text":i.enqueue({type:"text-end",id:String(z.index)});break;case"reasoning":i.enqueue({type:"reasoning-end",id:String(z.index)});break;case"tool-call":s||(i.enqueue({type:"tool-input-end",id:e.toolCallId}),i.enqueue(e))}delete g[z.index]}n=void 0;return;case"content_block_delta":{let e=z.delta.type;switch(e){case"text_delta":if(s)return;i.enqueue({type:"text-delta",id:String(z.index),delta:z.delta.text});return;case"thinking_delta":return void i.enqueue({type:"reasoning-delta",id:String(z.index),delta:z.delta.thinking});case"signature_delta":"thinking"===n&&i.enqueue({type:"reasoning-delta",id:String(z.index),delta:"",providerMetadata:{anthropic:{signature:z.delta.signature}}});return;case"input_json_delta":{let e=g[z.index],t=z.delta.partial_json;if(s){if((null==e?void 0:e.type)!=="text")return;i.enqueue({type:"text-delta",id:String(z.index),delta:t})}else{if((null==e?void 0:e.type)!=="tool-call")return;i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:t}),e.input+=t}return}case"citations_delta":{let e=A(z.delta.citation,u,v);e&&i.enqueue(e);return}default:throw Error(`Unsupported delta type: ${e}`)}}case"message_start":m.inputTokens=z.message.usage.input_tokens,m.cachedInputTokens=null!=(a=z.message.usage.cache_read_input_tokens)?a:void 0,t={...z.message.usage},y=null!=(l=z.message.usage.cache_creation_input_tokens)?l:null,i.enqueue({type:"response-metadata",id:null!=(c=z.message.id)?c:void 0,modelId:null!=(d=z.message.model)?d:void 0});return;case"message_delta":m.outputTokens=z.usage.output_tokens,m.totalTokens=(null!=(p=m.inputTokens)?p:0)+(null!=(h=z.usage.output_tokens)?h:0),f=O({finishReason:z.delta.stop_reason,isJsonResponseFromTool:s}),_=null!=(b=z.delta.stop_sequence)?b:null,t={...t,...z.usage};return;case"message_stop":return void i.enqueue({type:"finish",finishReason:f,usage:m,providerMetadata:{anthropic:{usage:null!=t?t:null,cacheCreationInputTokens:y,stopSequence:_}}});case"error":return void i.enqueue({type:"error",error:z.error});default:throw Error(`Unsupported chunk type: ${z}`)}}})),request:{body:d},response:{headers:p}}}},$=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.string(),restart:o.z.boolean().optional()}))),R=(0,i.hL)({id:"anthropic.bash_20241022",name:"bash",inputSchema:$}),P=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.string(),restart:o.z.boolean().optional()}))),M=(0,i.hL)({id:"anthropic.bash_20250124",name:"bash",inputSchema:P}),U=(0,i.ID)(()=>(0,i.jN)(o.z.object({action:o.z.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:o.z.array(o.z.number().int()).optional(),text:o.z.string().optional()}))),Z=(0,i.hL)({id:"anthropic.computer_20241022",name:"computer",inputSchema:U}),q=(0,i.ID)(()=>(0,i.jN)(o.z.object({action:o.z.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:o.z.tuple([o.z.number().int(),o.z.number().int()]).optional(),duration:o.z.number().optional(),scroll_amount:o.z.number().optional(),scroll_direction:o.z.enum(["up","down","left","right"]).optional(),start_coordinate:o.z.tuple([o.z.number().int(),o.z.number().int()]).optional(),text:o.z.string().optional()}))),L=(0,i.hL)({id:"anthropic.computer_20250124",name:"computer",inputSchema:q}),D=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.enum(["view","create","str_replace","insert","undo_edit"]),path:o.z.string(),file_text:o.z.string().optional(),insert_line:o.z.number().int().optional(),new_str:o.z.string().optional(),old_str:o.z.string().optional(),view_range:o.z.array(o.z.number().int()).optional()}))),B=(0,i.hL)({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:D}),F=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.enum(["view","create","str_replace","insert","undo_edit"]),path:o.z.string(),file_text:o.z.string().optional(),insert_line:o.z.number().int().optional(),new_str:o.z.string().optional(),old_str:o.z.string().optional(),view_range:o.z.array(o.z.number().int()).optional()}))),V=(0,i.hL)({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:F}),H=(0,i.ID)(()=>(0,i.jN)(o.z.object({command:o.z.enum(["view","create","str_replace","insert"]),path:o.z.string(),file_text:o.z.string().optional(),insert_line:o.z.number().int().optional(),new_str:o.z.string().optional(),old_str:o.z.string().optional(),view_range:o.z.array(o.z.number().int()).optional()}))),G={bash_20241022:R,bash_20250124:M,codeExecution_20250522:(e={})=>S(e),computer_20241022:Z,computer_20250124:L,textEditor_20241022:B,textEditor_20250124:V,textEditor_20250429:(0,i.hL)({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:H}),textEditor_20250728:(e={})=>y(e),webFetch_20250910:(e={})=>I(e),webSearch_20250305:(e={})=>z(e)};function W(e={}){var t;let n=null!=(t=(0,i.ae)(e.baseURL))?t:"https://api.anthropic.com/v1",o=()=>(0,i.WZ)({"anthropic-version":"2023-06-01","x-api-key":(0,i.WL)({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers},"ai-sdk/anthropic/2.0.27"),a=t=>{var r;return new N(t,{provider:"anthropic.messages",baseURL:n,headers:o,fetch:e.fetch,generateId:null!=(r=e.generateId)?r:i.$C,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})})},s=function(e){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return a(e)};return s.languageModel=a,s.chat=a,s.messages=a,s.textEmbeddingModel=e=>{throw new r.eM({modelId:e,modelType:"textEmbeddingModel"})},s.imageModel=e=>{throw new r.eM({modelId:e,modelType:"imageModel"})},s.tools=G,s}W()},48976:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},49212:(e,t,n)=>{"use strict";n.d(t,{JS:()=>en,jN:()=>T,vj:()=>P});var r,i,o,a,s,l,u,c,d,p,h,f,m,g,y=n(55337),_=n(82267),v=n(31296),b=n(73166),z=n(50887).hp,w=Symbol.for("vercel.ai.gateway.error"),k=class e extends(i=Error,r=w,i){constructor({message:e,statusCode:t=500,cause:n}){super(e),this[r]=!0,this.statusCode=t,this.cause=n}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return"object"==typeof e&&null!==e&&w in e&&!0===e[w]}},x="GatewayAuthenticationError",I=Symbol.for(`vercel.ai.gateway.error.${x}`),T=class e extends(a=k,o=I,a){constructor({message:e="Authentication failed",statusCode:t=401,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[o]=!0,this.name=x,this.type="authentication_error"}static isInstance(e){return k.hasMarker(e)&&I in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:i=401,cause:o}){let a;return new e({message:t?`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,statusCode:i,cause:o})}},j="GatewayInvalidRequestError",E=Symbol.for(`vercel.ai.gateway.error.${j}`),S=class extends(l=k,s=E,l){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[s]=!0,this.name=j,this.type="invalid_request_error"}static isInstance(e){return k.hasMarker(e)&&E in e}},C="GatewayRateLimitError",O=Symbol.for(`vercel.ai.gateway.error.${C}`),A=class extends(c=k,u=O,c){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[u]=!0,this.name=C,this.type="rate_limit_exceeded"}static isInstance(e){return k.hasMarker(e)&&O in e}},N="GatewayModelNotFoundError",$=Symbol.for(`vercel.ai.gateway.error.${N}`),R=(0,_.fE)(()=>(0,_.jN)(v.z.object({modelId:v.z.string()}))),P=class extends(p=k,d=$,p){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[d]=!0,this.name=N,this.type="model_not_found",this.modelId=n}static isInstance(e){return k.hasMarker(e)&&$ in e}},M="GatewayInternalServerError",U=Symbol.for(`vercel.ai.gateway.error.${M}`),Z=class extends(f=k,h=U,f){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[h]=!0,this.name=M,this.type="internal_server_error"}static isInstance(e){return k.hasMarker(e)&&U in e}},q="GatewayResponseError",L=Symbol.for(`vercel.ai.gateway.error.${q}`),D=class extends(g=k,m=L,g){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:i}={}){super({message:e,statusCode:t,cause:i}),this[m]=!0,this.name=q,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return k.hasMarker(e)&&L in e}};async function B({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:i}){let o=await (0,_.ZZ)({value:e,schema:F});if(!o.success)return new D({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:o.error,cause:r});let a=o.value,s=a.error.type,l=a.error.message;switch(s){case"authentication_error":return T.createContextualError({apiKeyProvided:"api-key"===i,oidcTokenProvided:"oidc"===i,statusCode:t,cause:r});case"invalid_request_error":return new S({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new A({message:l,statusCode:t,cause:r});case"model_not_found":{let e=await (0,_.ZZ)({value:a.error.param,schema:R});return new P({message:l,statusCode:t,modelId:e.success?e.value.modelId:void 0,cause:r})}default:return new Z({message:l,statusCode:t,cause:r})}}var F=(0,_.fE)(()=>(0,_.jN)(v.z.object({error:v.z.object({message:v.z.string(),type:v.z.string().nullish(),param:v.z.unknown().nullish(),code:v.z.union([v.z.string(),v.z.number()]).nullish()})})));function V(e,t){var n;return k.isInstance(e)?e:y.hL.isInstance(e)?B({response:function(e){if(void 0!==e.data)return e.data;if(null!=e.responseBody)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}(e),statusCode:null!=(n=e.statusCode)?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):B({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}var H="ai-gateway-auth-method";async function G(e){let t=await (0,_.ZZ)({value:e[H],schema:W});return t.success?t.value:void 0}var W=(0,_.fE)(()=>(0,_.jN)(v.z.union([v.z.literal("api-key"),v.z.literal("oidc")]))),K=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await (0,_.$b)({url:`${this.config.baseURL}/config`,headers:await (0,_.hd)(this.config.headers()),successfulResponseHandler:(0,_.cV)(J),failedResponseHandler:(0,_.sl)({errorSchema:v.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await V(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await (0,_.$b)({url:`${e.origin}/v1/credits`,headers:await (0,_.hd)(this.config.headers()),successfulResponseHandler:(0,_.cV)(Q),failedResponseHandler:(0,_.sl)({errorSchema:v.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return t}catch(e){throw await V(e)}}},J=(0,_.fE)(()=>(0,_.jN)(v.z.object({models:v.z.array(v.z.object({id:v.z.string(),name:v.z.string(),description:v.z.string().nullish(),pricing:v.z.object({input:v.z.string(),output:v.z.string(),input_cache_read:v.z.string().nullish(),input_cache_write:v.z.string().nullish()}).transform(({input:e,output:t,input_cache_read:n,input_cache_write:r})=>({input:e,output:t,...n?{cachedInputTokens:n}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:v.z.object({specificationVersion:v.z.literal("v2"),provider:v.z.string(),modelId:v.z.string()}),modelType:v.z.enum(["language","embedding","image"]).nullish()}))}))),Q=(0,_.fE)(()=>(0,_.jN)(v.z.object({balance:v.z.string(),total_used:v.z.string()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),Y=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await (0,_.hd)(this.config.headers());try{let{responseHeaders:o,value:a,rawValue:s}=await (0,_.GU)({url:this.getUrl(),headers:(0,_.m2)(i,e.headers,this.getModelConfigHeaders(this.modelId,!1),await (0,_.hd)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,_.cV)(v.z.any()),failedResponseHandler:(0,_.sl)({errorSchema:v.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...a,request:{body:t},response:{headers:o,body:s},warnings:n}}catch(e){throw await V(e,await G(i))}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await (0,_.hd)(this.config.headers());try{let{value:o,responseHeaders:a}=await (0,_.GU)({url:this.getUrl(),headers:(0,_.m2)(i,e.headers,this.getModelConfigHeaders(this.modelId,!0),await (0,_.hd)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,_.Ds)(v.z.any()),failedResponseHandler:(0,_.sl)({errorSchema:v.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:o.pipeThrough(new TransformStream({start(e){n.length>0&&e.enqueue({type:"stream-start",warnings:n})},transform(t,n){if(t.success){let r=t.value;("raw"!==r.type||e.includeRawChunks)&&("response-metadata"===r.type&&r.timestamp&&"string"==typeof r.timestamp&&(r.timestamp=new Date(r.timestamp)),n.enqueue(r))}else n.error(t.error)}})),request:{body:t},response:{headers:a}}}catch(e){throw await V(e,await G(i))}}isFilePart(e){return e&&"object"==typeof e&&"type"in e&&"file"===e.type}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)&&e.data instanceof Uint8Array){let t=Uint8Array.from(e.data),n=z.from(t).toString("base64");e.data=new URL(`data:${e.mediaType||"application/octet-stream"};base64,${n}`)}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},X=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var i;let o=await (0,_.hd)(this.config.headers());try{let{responseHeaders:a,value:s,rawValue:l}=await (0,_.GU)({url:this.getUrl(),headers:(0,_.m2)(o,null!=t?t:{},this.getModelConfigHeaders(),await (0,_.hd)(this.config.o11yHeaders)),body:{input:1===e.length?e[0]:e,...r?{providerOptions:r}:{}},successfulResponseHandler:(0,_.cV)(ee),failedResponseHandler:(0,_.sl)({errorSchema:v.z.any(),errorToMessage:e=>e}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:s.embeddings,usage:null!=(i=s.usage)?i:void 0,providerMetadata:s.providerMetadata,response:{headers:a,body:l}}}catch(e){throw await V(e,await G(o))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},ee=(0,_.fE)(()=>(0,_.jN)(v.z.object({embeddings:v.z.array(v.z.array(v.z.number())),usage:v.z.object({tokens:v.z.number()}).nullish(),providerMetadata:v.z.record(v.z.string(),v.z.record(v.z.string(),v.z.unknown())).optional()})));async function et(){var e;return null==(e=(0,b.getContext)().headers)?void 0:e["x-vercel-id"]}var en=function(e={}){var t,n;let r=null,i=null,o=null!=(t=e.metadataCacheRefreshMillis)?t:3e5,a=0,s=null!=(n=(0,_.ae)(e.baseURL))?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{let t=await er(e);if(t)return(0,_.WZ)({Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":"0.0.1",[H]:t.authMethod,...e.headers},"ai-sdk/gateway/1.0.39");throw T.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},u=()=>{let e=(0,_.x3)({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),t=(0,_.x3)({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),n=(0,_.x3)({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let r=await et();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...n&&{"ai-o11y-region":n},...r&&{"ai-o11y-request-id":r}}}},c=t=>new Y(t,{provider:"gateway",baseURL:s,headers:l,fetch:e.fetch,o11yHeaders:u()}),d=async()=>new K({baseURL:s,headers:l,fetch:e.fetch}).getCredits().catch(async e=>{throw await V(e,await G(await l()))}),p=function(e){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return c(e)};return p.getAvailableModels=async()=>{var t,n,u;let c=null!=(u=null==(n=null==(t=e._internal)?void 0:t.currentDate)?void 0:n.call(t).getTime())?u:Date.now();return(!r||c-a>o)&&(a=c,r=new K({baseURL:s,headers:l,fetch:e.fetch}).getAvailableModels().then(e=>(i=e,e)).catch(async e=>{throw await V(e,await G(await l()))})),i?Promise.resolve(i):r},p.getCredits=d,p.imageModel=e=>{throw new y.eM({modelId:e,modelType:"imageModel"})},p.languageModel=c,p.textEmbeddingModel=t=>new X(t,{provider:"gateway",baseURL:s,headers:l,fetch:e.fetch,o11yHeaders:u()}),p}();async function er(e){let t=(0,_.x3)({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await (0,b.getVercelOidcToken)(),authMethod:"oidc"}}catch(e){return null}}},49565:e=>{"use strict";var t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={};((e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})})(o,{SYMBOL_FOR_REQ_CONTEXT:()=>a,getContext:()=>s}),e.exports=((e,o,a,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of r(o))i.call(e,l)||l===a||t(e,l,{get:()=>o[l],enumerable:!(s=n(o,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),o);let a=Symbol.for("@vercel/request-context");function s(){let e=globalThis;return e[a]?.get?.()??{}}},50887:(e,t,n)=>{"use strict";let r=n(39020),i=n(93765),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e){var r=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);let n=0|f(r,i),o=a(n),l=o.write(r,i);return l!==n&&(o=o.slice(0,l)),o}if(ArrayBuffer.isView(e)){var o=e;if(M(o,Uint8Array)){let e=new Uint8Array(o);return p(e.buffer,e.byteOffset,e.byteLength)}return d(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(M(e,SharedArrayBuffer)||e&&M(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let l=e.valueOf&&e.valueOf();if(null!=l&&l!==e)return s.from(l,t,n);let u=function(e){if(s.isBuffer(e)){let t=0|h(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),a(e<0?0:0|h(e))}function d(e){let t=e.length<0?0:0|h(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),s.prototype),r}function h(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(i)return r?-1:$(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=U[e[r]];return i}(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":var o,a,s;return o=this,a=t,s=n,0===a&&s===o.length?r.fromByteArray(o):r.fromByteArray(o.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let r=e.slice(t,n),i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}(this,t,n);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){var o;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(o=n*=1)!=o&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length)if(i)return -1;else n=e.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,n);else return Uint8Array.prototype.lastIndexOf.call(e,t,n);return _(e,[t],n,r,i)}throw TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){let o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*a}else -1!==r&&(o-=o-r),r=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return -1}function v(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(n=e[i+1]))==128&&(l=(31&t)<<6|63&n)>127&&(o=l);break;case 3:n=e[i+1],r=e[i+2],(192&n)==128&&(192&r)==128&&(l=(15&t)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],(192&n)==128&&(192&r)==128&&(192&s)==128&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}var o=r;let a=o.length;if(a<=4096)return String.fromCharCode.apply(String,o);let s="",l=0;for(;l<a;)s+=String.fromCharCode.apply(String,o.slice(l,l+=4096));return s}function b(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,o){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function w(e,t,n,r,i){C(t,r,i,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function k(e,t,n,r,i){C(t,r,i,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function x(e,t,n,r,i,o){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function I(e,t,n,r,o){return t*=1,n>>>=0,o||x(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function T(e,t,n,r,o){return t*=1,n>>>=0,o||x(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}t.hp=s,t.IS=50,s.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return(u(e),e<=0)?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(M(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(M(t,Uint8Array))i+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(s.isBuffer(t))t.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):m.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(M(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let o=i-r,a=n-t,l=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n);for(let e=0;e<l;++e)if(u[e]!==c[e]){o=u[e],a=c[e];break}return o<a?-1:+(a<o)},s.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){var i,o,a,s,l,u,c,d;if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-t;if((void 0===n||n>p)&&(n=p),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let h=!1;for(;;)switch(r){case"hex":return function(e,t,n,r){let i;n=Number(n)||0;let o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;let a=t.length;for(r>a/2&&(r=a/2),i=0;i<r;++i){var s;let r=parseInt(t.substr(2*i,2),16);if((s=r)!=s)break;e[n+i]=r}return i}(this,e,t,n);case"utf8":case"utf-8":return i=t,o=n,P($(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return a=t,s=n,P(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,a,s);case"base64":return l=t,u=n,P(R(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=n,P(function(e,t){let n,r,i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-c),this,c,d);default:if(h)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Z(function(e){O(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&A(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),s.prototype.readBigUInt64BE=Z(function(e){O(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&A(e,this.length-8);let r=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Z(function(e){O(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&A(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),s.prototype.readBigInt64BE=Z(function(e){O(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&A(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;z(this,e,t,n,r,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;z(this,e,t,n,r,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=Z(function(e,t=0){return w(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Z(function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);z(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);z(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||z(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=Z(function(e,t=0){return w(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Z(function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return T(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return T(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},s.prototype.fill=function(e,t,n,r){let i;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{let o=s.isBuffer(e)?e:s.from(e,r),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};let j={};function E(e,t,n){j[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function S(e){let t="",n=e.length,r=+("-"===e[0]);for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function C(e,t,n,r,i,o){if(e>n||e<t){let r,i="bigint"==typeof t?"n":"";throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new j.ERR_OUT_OF_RANGE("value",r,e)}O(i,"offset"),(void 0===r[i]||void 0===r[i+o])&&A(i,r.length-(o+1))}function O(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function A(e,t,n){if(Math.floor(e)!==e)throw O(e,n),new j.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(n||"offset",`>= ${+!!n} and <= ${t}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),E("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?i=S(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=S(i)),i+="n"),r+=` It must be ${t}. Received ${i}`},RangeError);let N=/[^+/0-9A-Za-z-_]/g;function $(e,t){let n;t=t||1/0;let r=e.length,i=null,o=[];for(let a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319||a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function R(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?q:e}function q(){throw Error("BigInt not supported")}},51778:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},53950:(e,t,n)=>{"use strict";n.d(t,{TG:()=>b});var r=n(55337),i=n(82267),o=n(31296);function a({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function s(e){switch(e){case"stop":return"stop";case"length":case"model_length":return"length";case"tool_calls":return"tool-calls";default:return"unknown"}}var l=o.z.object({safePrompt:o.z.boolean().optional(),documentImageLimit:o.z.number().optional(),documentPageLimit:o.z.number().optional(),structuredOutputs:o.z.boolean().optional(),strictJsonSchema:o.z.boolean().optional(),parallelToolCalls:o.z.boolean().optional()}),u=o.z.object({object:o.z.literal("error"),message:o.z.string(),type:o.z.string(),param:o.z.string().nullable(),code:o.z.string().nullable()}),c=(0,i.sl)({errorSchema:u,errorToMessage:e=>e.message}),d=class{constructor(e,t){var n;this.specificationVersion="v2",this.supportedUrls={"application/pdf":[/^https:\/\/.*$/]},this.modelId=e,this.config=t,this.generateId=null!=(n=t.generateId)?n:i.$C}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:d,seed:p,providerOptions:h,tools:f,toolChoice:m}){var g,y,_,v;let b=[],z=null!=(g=await (0,i.xI)({provider:"mistral",providerOptions:h,schema:l}))?g:{};null!=a&&b.push({type:"unsupported-setting",setting:"topK"}),null!=s&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=u&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=c&&b.push({type:"unsupported-setting",setting:"stopSequences"});let w=null==(y=z.structuredOutputs)||y,k=null!=(_=z.strictJsonSchema)&&_;(null==d?void 0:d.type)!=="json"||(null==d?void 0:d.schema)||(e=(0,i._s)({messages:e,schema:d.schema}));let x={model:this.modelId,safe_prompt:z.safePrompt,max_tokens:t,temperature:n,top_p:o,random_seed:p,response_format:(null==d?void 0:d.type)==="json"?w&&(null==d?void 0:d.schema)!=null?{type:"json_schema",json_schema:{schema:d.schema,strict:k,name:null!=(v=d.name)?v:"response",description:d.description}}:{type:"json_object"}:void 0,document_image_limit:z.documentImageLimit,document_page_limit:z.documentPageLimit,messages:function(e){let t=[];for(let n=0;n<e.length;n++){let{role:o,content:a}=e[n],s=n===e.length-1;switch(o){case"system":t.push({role:"system",content:a});break;case"user":t.push({role:"user",content:a.map(e=>{switch(e.type){case"text":return{type:"text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let t="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:e.data instanceof URL?e.data.toString():`data:${t};base64,${(0,i.ej)(e.data)}`}}if("application/pdf"===e.mediaType)return{type:"document_url",document_url:e.data.toString()};throw new r.b8({functionality:"Only images and PDF file parts are supported"})}})});break;case"assistant":{let e="",n=[];for(let t of a)switch(t.type){case"text":case"reasoning":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.input)}});break;default:throw Error(`Unsupported content type in assistant message: ${t.type}`)}t.push({role:"assistant",content:e,prefix:!!s||void 0,tool_calls:n.length>0?n:void 0});break}case"tool":for(let e of a){let n,r=e.output;switch(r.type){case"text":case"error-text":n=r.value;break;case"content":case"json":case"error-json":n=JSON.stringify(r.value)}t.push({role:"tool",name:e.toolName,tool_call_id:e.toolCallId,content:n})}break;default:throw Error(`Unsupported role: ${o}`)}}return t}(e)},{tools:I,toolChoice:T,toolWarnings:j}=function({tools:e,toolChoice:t}){e=(null==e?void 0:e.length)?e:void 0;let n=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let i=[];for(let t of e)"provider-defined"===t.type?n.push({type:"unsupported-tool",tool:t}):i.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(null==t)return{tools:i,toolChoice:void 0,toolWarnings:n};let o=t.type;switch(o){case"auto":case"none":return{tools:i,toolChoice:o,toolWarnings:n};case"required":return{tools:i,toolChoice:"any",toolWarnings:n};case"tool":return{tools:i.filter(e=>e.function.name===t.toolName),toolChoice:"any",toolWarnings:n};default:throw new r.b8({functionality:`tool choice type: ${o}`})}}({tools:f,toolChoice:m});return{args:{...x,tools:I,tool_choice:T,...null!=I&&void 0!==z.parallelToolCalls?{parallel_tool_calls:z.parallelToolCalls}:{}},warnings:[...b,...j]}}async doGenerate(e){let{args:t,warnings:n}=await this.getArgs(e),{responseHeaders:r,value:o,rawValue:l}=await (0,i.GU)({url:`${this.config.baseURL}/chat/completions`,headers:(0,i.m2)(this.config.headers(),e.headers),body:t,failedResponseHandler:c,successfulResponseHandler:(0,i.cV)(g),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=o.choices[0],d=[];if(null!=u.message.content&&Array.isArray(u.message.content))for(let e of u.message.content)if("thinking"===e.type){let t=p(e.thinking);t.length>0&&d.push({type:"reasoning",text:t})}else"text"===e.type&&e.text.length>0&&d.push({type:"text",text:e.text});else{let e=h(u.message.content);null!=e&&e.length>0&&d.push({type:"text",text:e})}if(null!=u.message.tool_calls)for(let e of u.message.tool_calls)d.push({type:"tool-call",toolCallId:e.id,toolName:e.function.name,input:e.function.arguments});return{content:d,finishReason:s(u.finish_reason),usage:{inputTokens:o.usage.prompt_tokens,outputTokens:o.usage.completion_tokens,totalTokens:o.usage.total_tokens},request:{body:t},response:{...a(o),headers:r,body:l},warnings:n}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),r={...t,stream:!0},{responseHeaders:o,value:l}=await (0,i.GU)({url:`${this.config.baseURL}/chat/completions`,headers:(0,i.m2)(this.config.headers(),e.headers),body:r,failedResponseHandler:c,successfulResponseHandler:(0,i.Ds)(y),abortSignal:e.abortSignal,fetch:this.config.fetch}),u="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},f=!0,m=!1,g=null,_=this.generateId;return{stream:l.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,n){if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success)return void n.enqueue({type:"error",error:t.error});let r=t.value;f&&(f=!1,n.enqueue({type:"response-metadata",...a(r)})),null!=r.usage&&(d.inputTokens=r.usage.prompt_tokens,d.outputTokens=r.usage.completion_tokens,d.totalTokens=r.usage.total_tokens);let i=r.choices[0],o=i.delta,l=h(o.content);if(null!=o.content&&Array.isArray(o.content)){for(let e of o.content)if("thinking"===e.type){let t=p(e.thinking);t.length>0&&(null==g&&(m&&(n.enqueue({type:"text-end",id:"0"}),m=!1),g=_(),n.enqueue({type:"reasoning-start",id:g})),n.enqueue({type:"reasoning-delta",id:g,delta:t}))}}if(null!=l&&l.length>0&&(m||(null!=g&&(n.enqueue({type:"reasoning-end",id:g}),g=null),n.enqueue({type:"text-start",id:"0"}),m=!0),n.enqueue({type:"text-delta",id:"0",delta:l})),(null==o?void 0:o.tool_calls)!=null)for(let e of o.tool_calls){let t=e.id,r=e.function.name,i=e.function.arguments;n.enqueue({type:"tool-input-start",id:t,toolName:r}),n.enqueue({type:"tool-input-delta",id:t,delta:i}),n.enqueue({type:"tool-input-end",id:t}),n.enqueue({type:"tool-call",toolCallId:t,toolName:r,input:i})}null!=i.finish_reason&&(u=s(i.finish_reason))},flush(e){null!=g&&e.enqueue({type:"reasoning-end",id:g}),m&&e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:u,usage:d})}})),request:{body:r},response:{headers:o}}}};function p(e){return e.filter(e=>"text"===e.type).map(e=>e.text).join("")}function h(e){if("string"==typeof e)return e;if(null==e)return;let t=[];for(let n of e){let{type:e}=n;switch(e){case"text":t.push(n.text);break;case"thinking":case"image_url":case"reference":break;default:throw Error(`Unsupported type: ${e}`)}}return t.length?t.join(""):void 0}var f=o.z.union([o.z.string(),o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("text"),text:o.z.string()}),o.z.object({type:o.z.literal("image_url"),image_url:o.z.union([o.z.string(),o.z.object({url:o.z.string(),detail:o.z.string().nullable()})])}),o.z.object({type:o.z.literal("reference"),reference_ids:o.z.array(o.z.number())}),o.z.object({type:o.z.literal("thinking"),thinking:o.z.array(o.z.object({type:o.z.literal("text"),text:o.z.string()}))})]))]).nullish(),m=o.z.object({prompt_tokens:o.z.number(),completion_tokens:o.z.number(),total_tokens:o.z.number()}),g=o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({message:o.z.object({role:o.z.literal("assistant"),content:f,tool_calls:o.z.array(o.z.object({id:o.z.string(),function:o.z.object({name:o.z.string(),arguments:o.z.string()})})).nullish()}),index:o.z.number(),finish_reason:o.z.string().nullish()})),object:o.z.literal("chat.completion"),usage:m}),y=o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({delta:o.z.object({role:o.z.enum(["assistant"]).optional(),content:f,tool_calls:o.z.array(o.z.object({id:o.z.string(),function:o.z.object({name:o.z.string(),arguments:o.z.string()})})).nullish()}),finish_reason:o.z.string().nullish(),index:o.z.number()})),usage:m.nullish()}),_=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=32,this.supportsParallelCalls=!1,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,abortSignal:t,headers:n}){if(e.length>this.maxEmbeddingsPerCall)throw new r.Ch({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:o,value:a,rawValue:s}=await (0,i.GU)({url:`${this.config.baseURL}/embeddings`,headers:(0,i.m2)(this.config.headers(),n),body:{model:this.modelId,input:e,encoding_format:"float"},failedResponseHandler:c,successfulResponseHandler:(0,i.cV)(v),abortSignal:t,fetch:this.config.fetch});return{embeddings:a.data.map(e=>e.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,response:{headers:o,body:s}}}},v=o.z.object({data:o.z.array(o.z.object({embedding:o.z.array(o.z.number())})),usage:o.z.object({prompt_tokens:o.z.number()}).nullish()});function b(e={}){var t;let n=null!=(t=(0,i.ae)(e.baseURL))?t:"https://api.mistral.ai/v1",o=()=>(0,i.WZ)({Authorization:`Bearer ${(0,i.WL)({apiKey:e.apiKey,environmentVariableName:"MISTRAL_API_KEY",description:"Mistral"})}`,...e.headers},"ai-sdk/mistral/2.0.19"),a=t=>new d(t,{provider:"mistral.chat",baseURL:n,headers:o,fetch:e.fetch,generateId:e.generateId}),s=t=>new _(t,{provider:"mistral.embedding",baseURL:n,headers:o,fetch:e.fetch}),l=function(e){if(new.target)throw Error("The Mistral model function cannot be called with the new keyword.");return a(e)};return l.languageModel=a,l.chat=a,l.embedding=s,l.textEmbedding=s,l.textEmbeddingModel=s,l.imageModel=e=>{throw new r.eM({modelId:e,modelType:"imageModel"})},l}b()},55337:(e,t,n)=>{"use strict";n.d(t,{Ch:()=>er,Di:()=>O,Kq:()=>G,M3:()=>R,Tt:()=>T,b8:()=>ep,bD:()=>_,eM:()=>X,hL:()=>w,iM:()=>el,u1:()=>j,u6:()=>B,xn:()=>Z});var r,i,o,a,s,l,u,c,d,p,h,f,m="vercel.ai.error",g=Symbol.for(m),y=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[r]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,m)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};r=g;var _=y,v="AI_APICallError",b=`vercel.ai.error.${v}`,z=Symbol.for(b),w=class extends _{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:o,responseBody:a,cause:s,isRetryable:l=null!=r&&(408===r||409===r||429===r||r>=500),data:u}){super({name:v,message:e,cause:s}),this[i]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=o,this.responseBody=a,this.isRetryable=l,this.data=u}static isInstance(e){return _.hasMarker(e,b)}};i=z;var k="AI_EmptyResponseBodyError",x=`vercel.ai.error.${k}`,I=Symbol.for(x),T=class extends _{constructor({message:e="Empty response body"}={}){super({name:k,message:e}),this[o]=!0}static isInstance(e){return _.hasMarker(e,x)}};function j(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=I;var E="AI_InvalidArgumentError",S=`vercel.ai.error.${E}`,C=Symbol.for(S),O=class extends _{constructor({message:e,cause:t,argument:n}){super({name:E,message:e,cause:t}),this[a]=!0,this.argument=n}static isInstance(e){return _.hasMarker(e,S)}};a=C;var A="AI_InvalidPromptError",N=`vercel.ai.error.${A}`,$=Symbol.for(N),R=class extends _{constructor({prompt:e,message:t,cause:n}){super({name:A,message:`Invalid prompt: ${t}`,cause:n}),this[s]=!0,this.prompt=e}static isInstance(e){return _.hasMarker(e,N)}};s=$;var P="AI_InvalidResponseDataError",M=`vercel.ai.error.${P}`,U=Symbol.for(M),Z=class extends _{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:P,message:t}),this[l]=!0,this.data=e}static isInstance(e){return _.hasMarker(e,M)}};l=U;var q="AI_JSONParseError",L=`vercel.ai.error.${q}`,D=Symbol.for(L),B=class extends _{constructor({text:e,cause:t}){super({name:q,message:`JSON parsing failed: Text: ${e}.
Error message: ${j(t)}`,cause:t}),this[u]=!0,this.text=e}static isInstance(e){return _.hasMarker(e,L)}};u=D;var F="AI_LoadAPIKeyError",V=`vercel.ai.error.${F}`,H=Symbol.for(V),G=class extends _{constructor({message:e}){super({name:F,message:e}),this[c]=!0}static isInstance(e){return _.hasMarker(e,V)}};c=H;var W=Symbol.for("vercel.ai.error.AI_LoadSettingError"),K=Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),J="AI_NoSuchModelError",Q=`vercel.ai.error.${J}`,Y=Symbol.for(Q),X=class extends _{constructor({errorName:e=J,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[d]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return _.hasMarker(e,Q)}};d=Y;var ee="AI_TooManyEmbeddingValuesForCallError",et=`vercel.ai.error.${ee}`,en=Symbol.for(et),er=class extends _{constructor(e){super({name:ee,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[p]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return _.hasMarker(e,et)}};p=en;var ei="AI_TypeValidationError",eo=`vercel.ai.error.${ei}`,ea=Symbol.for(eo),es=class e extends _{constructor({value:e,cause:t}){super({name:ei,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${j(t)}`,cause:t}),this[h]=!0,this.value=e}static isInstance(e){return _.hasMarker(e,eo)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};h=ea;var el=es,eu="AI_UnsupportedFunctionalityError",ec=`vercel.ai.error.${eu}`,ed=Symbol.for(ec),ep=class extends _{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:eu,message:t}),this[f]=!0,this.functionality=e}static isInstance(e){return _.hasMarker(e,ec)}};function eh(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(eh):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&eh(t)))}f=ed},60066:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},62501:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},68282:(e,t,n)=>{"use strict";n.d(t,{ry:()=>ef});var r=n(82267),i=n(55337),o=n(31296),a=o.z.object({error:o.z.object({message:o.z.string(),type:o.z.string().nullish(),param:o.z.any().nullish(),code:o.z.union([o.z.string(),o.z.number()]).nullish()})}),s=(0,r.sl)({errorSchema:a,errorToMessage:e=>e.error.message});function l({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function u(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var c=(0,r.fE)(()=>(0,r.jN)(o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({message:o.z.object({role:o.z.literal("assistant").nullish(),content:o.z.string().nullish(),tool_calls:o.z.array(o.z.object({id:o.z.string().nullish(),type:o.z.literal("function"),function:o.z.object({name:o.z.string(),arguments:o.z.string()})})).nullish(),annotations:o.z.array(o.z.object({type:o.z.literal("url_citation"),start_index:o.z.number(),end_index:o.z.number(),url:o.z.string(),title:o.z.string()})).nullish()}),index:o.z.number(),logprobs:o.z.object({content:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number(),top_logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number()}))})).nullish()}).nullish(),finish_reason:o.z.string().nullish()})),usage:o.z.object({prompt_tokens:o.z.number().nullish(),completion_tokens:o.z.number().nullish(),total_tokens:o.z.number().nullish(),prompt_tokens_details:o.z.object({cached_tokens:o.z.number().nullish()}).nullish(),completion_tokens_details:o.z.object({reasoning_tokens:o.z.number().nullish(),accepted_prediction_tokens:o.z.number().nullish(),rejected_prediction_tokens:o.z.number().nullish()}).nullish()}).nullish()}))),d=(0,r.fE)(()=>(0,r.jN)(o.z.union([o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({delta:o.z.object({role:o.z.enum(["assistant"]).nullish(),content:o.z.string().nullish(),tool_calls:o.z.array(o.z.object({index:o.z.number(),id:o.z.string().nullish(),type:o.z.literal("function").nullish(),function:o.z.object({name:o.z.string().nullish(),arguments:o.z.string().nullish()})})).nullish(),annotations:o.z.array(o.z.object({type:o.z.literal("url_citation"),start_index:o.z.number(),end_index:o.z.number(),url:o.z.string(),title:o.z.string()})).nullish()}).nullish(),logprobs:o.z.object({content:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number(),top_logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number()}))})).nullish()}).nullish(),finish_reason:o.z.string().nullish(),index:o.z.number()})),usage:o.z.object({prompt_tokens:o.z.number().nullish(),completion_tokens:o.z.number().nullish(),total_tokens:o.z.number().nullish(),prompt_tokens_details:o.z.object({cached_tokens:o.z.number().nullish()}).nullish(),completion_tokens_details:o.z.object({reasoning_tokens:o.z.number().nullish(),accepted_prediction_tokens:o.z.number().nullish(),rejected_prediction_tokens:o.z.number().nullish()}).nullish()}).nullish()}),a]))),p=(0,r.fE)(()=>(0,r.jN)(o.z.object({logitBias:o.z.record(o.z.coerce.number(),o.z.number()).optional(),logprobs:o.z.union([o.z.boolean(),o.z.number()]).optional(),parallelToolCalls:o.z.boolean().optional(),user:o.z.string().optional(),reasoningEffort:o.z.enum(["minimal","low","medium","high"]).optional(),maxCompletionTokens:o.z.number().optional(),store:o.z.boolean().optional(),metadata:o.z.record(o.z.string().max(64),o.z.string().max(512)).optional(),prediction:o.z.record(o.z.string(),o.z.any()).optional(),structuredOutputs:o.z.boolean().optional(),serviceTier:o.z.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:o.z.boolean().optional(),textVerbosity:o.z.enum(["low","medium","high"]).optional(),promptCacheKey:o.z.string().optional(),safetyIdentifier:o.z.string().optional()}))),h=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d,tools:h,toolChoice:g,providerOptions:y}){var _,v,b,z,w,k,x,I,T;let j=[],E=null!=(_=await (0,r.xI)({provider:"openai",providerOptions:y,schema:p}))?_:{},S=null==(v=E.structuredOutputs)||v;null!=a&&j.push({type:"unsupported-setting",setting:"topK"}),(null==c?void 0:c.type)!=="json"||null==c.schema||S||j.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:C,warnings:O}=function({prompt:e,systemMessageMode:t="system"}){let n=[],o=[];for(let{role:a,content:s}of e)switch(a){case"system":switch(t){case"system":n.push({role:"system",content:s});break;case"developer":n.push({role:"developer",content:s});break;case"remove":o.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${t}`)}break;case"user":if(1===s.length&&"text"===s[0].type){n.push({role:"user",content:s[0].text});break}n.push({role:"user",content:s.map((e,t)=>{var n,o,a;switch(e.type){case"text":return{type:"text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let t="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${t};base64,${(0,r.ej)(e.data)}`,detail:null==(o=null==(n=e.providerOptions)?void 0:n.openai)?void 0:o.imageDetail}}}if(e.mediaType.startsWith("audio/")){if(e.data instanceof URL)throw new i.b8({functionality:"audio file parts with URLs"});switch(e.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:(0,r.ej)(e.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:(0,r.ej)(e.data),format:"mp3"}};default:throw new i.b8({functionality:`audio content parts with media type ${e.mediaType}`})}}if("application/pdf"===e.mediaType){if(e.data instanceof URL)throw new i.b8({functionality:"PDF file parts with URLs"});return{type:"file",file:"string"==typeof e.data&&e.data.startsWith("file-")?{file_id:e.data}:{filename:null!=(a=e.filename)?a:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${(0,r.ej)(e.data)}`}}}else throw new i.b8({functionality:`file part media type ${e.mediaType}`})}})});break;case"assistant":{let e="",t=[];for(let n of s)switch(n.type){case"text":e+=n.text;break;case"tool-call":t.push({id:n.toolCallId,type:"function",function:{name:n.toolName,arguments:JSON.stringify(n.input)}})}n.push({role:"assistant",content:e,tool_calls:t.length>0?t:void 0});break}case"tool":for(let e of s){let t,r=e.output;switch(r.type){case"text":case"error-text":t=r.value;break;case"content":case"json":case"error-json":t=JSON.stringify(r.value)}n.push({role:"tool",tool_call_id:e.toolCallId,content:t})}break;default:throw Error(`Unsupported role: ${a}`)}return{messages:n,warnings:o}}({prompt:e,systemMessageMode:f(w=this.modelId)?null!=(x=null==(k=m[w])?void 0:k.systemMessageMode)?x:"developer":"system"});j.push(...O);let A=null!=(b=E.strictJsonSchema)&&b,N={model:this.modelId,logit_bias:E.logitBias,logprobs:!0===E.logprobs||"number"==typeof E.logprobs||void 0,top_logprobs:"number"==typeof E.logprobs?E.logprobs:"boolean"==typeof E.logprobs&&E.logprobs?0:void 0,user:E.user,parallel_tool_calls:E.parallelToolCalls,max_tokens:t,temperature:n,top_p:o,frequency_penalty:s,presence_penalty:l,response_format:(null==c?void 0:c.type)==="json"?S&&null!=c.schema?{type:"json_schema",json_schema:{schema:c.schema,strict:A,name:null!=(z=c.name)?z:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:d,verbosity:E.textVerbosity,max_completion_tokens:E.maxCompletionTokens,store:E.store,metadata:E.metadata,prediction:E.prediction,reasoning_effort:E.reasoningEffort,service_tier:E.serviceTier,prompt_cache_key:E.promptCacheKey,safety_identifier:E.safetyIdentifier,messages:C};f(this.modelId)?(null!=N.temperature&&(N.temperature=void 0,j.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=N.top_p&&(N.top_p=void 0,j.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=N.frequency_penalty&&(N.frequency_penalty=void 0,j.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=N.presence_penalty&&(N.presence_penalty=void 0,j.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=N.logit_bias&&(N.logit_bias=void 0,j.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=N.logprobs&&(N.logprobs=void 0,j.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=N.top_logprobs&&(N.top_logprobs=void 0,j.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=N.max_tokens&&(null==N.max_completion_tokens&&(N.max_completion_tokens=N.max_tokens),N.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=N.temperature&&(N.temperature=void 0,j.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),"flex"!==E.serviceTier||(I=this.modelId).startsWith("o3")||I.startsWith("o4-mini")||I.startsWith("gpt-5")&&!I.startsWith("gpt-5-chat")||(j.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),N.service_tier=void 0),"priority"!==E.serviceTier||(T=this.modelId).startsWith("gpt-4")||T.startsWith("gpt-5-mini")||T.startsWith("gpt-5")&&!T.startsWith("gpt-5-nano")&&!T.startsWith("gpt-5-chat")||T.startsWith("o3")||T.startsWith("o4-mini")||(j.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),N.service_tier=void 0);let{tools:$,toolChoice:R,toolWarnings:P}=function({tools:e,toolChoice:t,structuredOutputs:n,strictJsonSchema:r}){e=(null==e?void 0:e.length)?e:void 0;let o=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let a=[];for(let t of e)"function"===t.type?a.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema,strict:n?r:void 0}}):o.push({type:"unsupported-tool",tool:t});if(null==t)return{tools:a,toolChoice:void 0,toolWarnings:o};let s=t.type;switch(s){case"auto":case"none":case"required":return{tools:a,toolChoice:s,toolWarnings:o};case"tool":return{tools:a,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:o};default:throw new i.b8({functionality:`tool choice type: ${s}`})}}({tools:h,toolChoice:g,structuredOutputs:S,strictJsonSchema:A});return{args:{...N,tools:$,tool_choice:R},warnings:[...j,...P]}}async doGenerate(e){var t,n,i,o,a,d,p,h,f,m,g,y,_,v;let{args:b,warnings:z}=await this.getArgs(e),{responseHeaders:w,value:k,rawValue:x}=await (0,r.GU)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:b,failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(c),abortSignal:e.abortSignal,fetch:this.config.fetch}),I=k.choices[0],T=[],j=I.message.content;for(let e of(null!=j&&j.length>0&&T.push({type:"text",text:j}),null!=(t=I.message.tool_calls)?t:[]))T.push({type:"tool-call",toolCallId:null!=(n=e.id)?n:(0,r.$C)(),toolName:e.function.name,input:e.function.arguments});for(let e of null!=(i=I.message.annotations)?i:[])T.push({type:"source",sourceType:"url",id:(0,r.$C)(),url:e.url,title:e.title});let E=null==(o=k.usage)?void 0:o.completion_tokens_details,S=null==(a=k.usage)?void 0:a.prompt_tokens_details,C={openai:{}};return(null==E?void 0:E.accepted_prediction_tokens)!=null&&(C.openai.acceptedPredictionTokens=null==E?void 0:E.accepted_prediction_tokens),(null==E?void 0:E.rejected_prediction_tokens)!=null&&(C.openai.rejectedPredictionTokens=null==E?void 0:E.rejected_prediction_tokens),(null==(d=I.logprobs)?void 0:d.content)!=null&&(C.openai.logprobs=I.logprobs.content),{content:T,finishReason:u(I.finish_reason),usage:{inputTokens:null!=(h=null==(p=k.usage)?void 0:p.prompt_tokens)?h:void 0,outputTokens:null!=(m=null==(f=k.usage)?void 0:f.completion_tokens)?m:void 0,totalTokens:null!=(y=null==(g=k.usage)?void 0:g.total_tokens)?y:void 0,reasoningTokens:null!=(_=null==E?void 0:E.reasoning_tokens)?_:void 0,cachedInputTokens:null!=(v=null==S?void 0:S.cached_tokens)?v:void 0},request:{body:b},response:{...l(k),headers:w,body:x},warnings:z,providerMetadata:C}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:a,value:c}=await (0,r.GU)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:o,failedResponseHandler:s,successfulResponseHandler:(0,r.Ds)(d),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=[],h="unknown",f={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},m=!0,g=!1,y={openai:{}};return{stream:c.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,n){var o,a,s,c,d,_,v,b,z,w,k,x,I,T,j,E,S,C,O,A,N,$,R,P;if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){h="error",n.enqueue({type:"error",error:t.error});return}let M=t.value;if("error"in M){h="error",n.enqueue({type:"error",error:M.error});return}m&&(m=!1,n.enqueue({type:"response-metadata",...l(M)})),null!=M.usage&&(f.inputTokens=null!=(o=M.usage.prompt_tokens)?o:void 0,f.outputTokens=null!=(a=M.usage.completion_tokens)?a:void 0,f.totalTokens=null!=(s=M.usage.total_tokens)?s:void 0,f.reasoningTokens=null!=(d=null==(c=M.usage.completion_tokens_details)?void 0:c.reasoning_tokens)?d:void 0,f.cachedInputTokens=null!=(v=null==(_=M.usage.prompt_tokens_details)?void 0:_.cached_tokens)?v:void 0,(null==(b=M.usage.completion_tokens_details)?void 0:b.accepted_prediction_tokens)!=null&&(y.openai.acceptedPredictionTokens=null==(z=M.usage.completion_tokens_details)?void 0:z.accepted_prediction_tokens),(null==(w=M.usage.completion_tokens_details)?void 0:w.rejected_prediction_tokens)!=null&&(y.openai.rejectedPredictionTokens=null==(k=M.usage.completion_tokens_details)?void 0:k.rejected_prediction_tokens));let U=M.choices[0];if((null==U?void 0:U.finish_reason)!=null&&(h=u(U.finish_reason)),(null==(x=null==U?void 0:U.logprobs)?void 0:x.content)!=null&&(y.openai.logprobs=U.logprobs.content),(null==U?void 0:U.delta)==null)return;let Z=U.delta;if(null!=Z.content&&(g||(n.enqueue({type:"text-start",id:"0"}),g=!0),n.enqueue({type:"text-delta",id:"0",delta:Z.content})),null!=Z.tool_calls)for(let e of Z.tool_calls){let t=e.index;if(null==p[t]){if("function"!==e.type)throw new i.xn({data:e,message:"Expected 'function' type."});if(null==e.id)throw new i.xn({data:e,message:"Expected 'id' to be a string."});if((null==(I=e.function)?void 0:I.name)==null)throw new i.xn({data:e,message:"Expected 'function.name' to be a string."});n.enqueue({type:"tool-input-start",id:e.id,toolName:e.function.name}),p[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(T=e.function.arguments)?T:""},hasFinished:!1};let o=p[t];(null==(j=o.function)?void 0:j.name)!=null&&(null==(E=o.function)?void 0:E.arguments)!=null&&(o.function.arguments.length>0&&n.enqueue({type:"tool-input-delta",id:o.id,delta:o.function.arguments}),(0,r.v0)(o.function.arguments)&&(n.enqueue({type:"tool-input-end",id:o.id}),n.enqueue({type:"tool-call",toolCallId:null!=(S=o.id)?S:(0,r.$C)(),toolName:o.function.name,input:o.function.arguments}),o.hasFinished=!0));continue}let o=p[t];!o.hasFinished&&((null==(C=e.function)?void 0:C.arguments)!=null&&(o.function.arguments+=null!=(A=null==(O=e.function)?void 0:O.arguments)?A:""),n.enqueue({type:"tool-input-delta",id:o.id,delta:null!=(N=e.function.arguments)?N:""}),(null==($=o.function)?void 0:$.name)!=null&&(null==(R=o.function)?void 0:R.arguments)!=null&&(0,r.v0)(o.function.arguments)&&(n.enqueue({type:"tool-input-end",id:o.id}),n.enqueue({type:"tool-call",toolCallId:null!=(P=o.id)?P:(0,r.$C)(),toolName:o.function.name,input:o.function.arguments}),o.hasFinished=!0))}if(null!=Z.annotations)for(let e of Z.annotations)n.enqueue({type:"source",sourceType:"url",id:(0,r.$C)(),url:e.url,title:e.title})},flush(e){g&&e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:h,usage:f,...null!=y?{providerMetadata:y}:{}})}})),request:{body:o},response:{headers:a}}}};function f(e){return(e.startsWith("o")||e.startsWith("gpt-5"))&&!e.startsWith("gpt-5-chat")}var m={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function g({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function y(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var _=(0,r.fE)(()=>(0,r.jN)(o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({text:o.z.string(),finish_reason:o.z.string(),logprobs:o.z.object({tokens:o.z.array(o.z.string()),token_logprobs:o.z.array(o.z.number()),top_logprobs:o.z.array(o.z.record(o.z.string(),o.z.number())).nullish()}).nullish()})),usage:o.z.object({prompt_tokens:o.z.number(),completion_tokens:o.z.number(),total_tokens:o.z.number()}).nullish()}))),v=(0,r.fE)(()=>(0,r.jN)(o.z.union([o.z.object({id:o.z.string().nullish(),created:o.z.number().nullish(),model:o.z.string().nullish(),choices:o.z.array(o.z.object({text:o.z.string(),finish_reason:o.z.string().nullish(),index:o.z.number(),logprobs:o.z.object({tokens:o.z.array(o.z.string()),token_logprobs:o.z.array(o.z.number()),top_logprobs:o.z.array(o.z.record(o.z.string(),o.z.number())).nullish()}).nullish()})),usage:o.z.object({prompt_tokens:o.z.number(),completion_tokens:o.z.number(),total_tokens:o.z.number()}).nullish()}),a]))),b=(0,r.fE)(()=>(0,r.jN)(o.z.object({echo:o.z.boolean().optional(),logitBias:o.z.record(o.z.string(),o.z.number()).optional(),suffix:o.z.string().optional(),user:o.z.string().optional(),logprobs:o.z.union([o.z.boolean(),o.z.number()]).optional()}))),z=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,tools:d,toolChoice:p,seed:h,providerOptions:f}){let m=[],g={...await (0,r.xI)({provider:"openai",providerOptions:f,schema:b}),...await (0,r.xI)({provider:this.providerOptionsName,providerOptions:f,schema:b})};null!=a&&m.push({type:"unsupported-setting",setting:"topK"}),(null==d?void 0:d.length)&&m.push({type:"unsupported-setting",setting:"tools"}),null!=p&&m.push({type:"unsupported-setting",setting:"toolChoice"}),null!=c&&"text"!==c.type&&m.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:y,stopSequences:_}=function({prompt:e,user:t="user",assistant:n="assistant"}){let r="";for(let{role:o,content:a}of("system"===e[0].role&&(r+=`${e[0].content}

`,e=e.slice(1)),e))switch(o){case"system":throw new i.M3({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=a.map(e=>{if("text"===e.type)return e.text}).filter(Boolean).join("");r+=`${t}:
${e}

`;break}case"assistant":{let e=a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new i.b8({functionality:"tool-call messages"})}}).join("");r+=`${n}:
${e}

`;break}case"tool":throw new i.b8({functionality:"tool messages"});default:throw Error(`Unsupported role: ${o}`)}return{prompt:r+=`${n}:
`,stopSequences:[`
${t}:`]}}({prompt:e}),v=[...null!=_?_:[],...null!=u?u:[]];return{args:{model:this.modelId,echo:g.echo,logit_bias:g.logitBias,logprobs:(null==g?void 0:g.logprobs)===!0?0:(null==g?void 0:g.logprobs)===!1||null==g?void 0:g.logprobs,suffix:g.suffix,user:g.user,max_tokens:t,temperature:n,top_p:o,frequency_penalty:s,presence_penalty:l,seed:h,prompt:y,stop:v.length>0?v:void 0},warnings:m}}async doGenerate(e){var t,n,i;let{args:o,warnings:a}=await this.getArgs(e),{responseHeaders:l,value:u,rawValue:c}=await (0,r.GU)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:o,failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(_),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=u.choices[0],p={openai:{}};return null!=d.logprobs&&(p.openai.logprobs=d.logprobs),{content:[{type:"text",text:d.text}],usage:{inputTokens:null==(t=u.usage)?void 0:t.prompt_tokens,outputTokens:null==(n=u.usage)?void 0:n.completion_tokens,totalTokens:null==(i=u.usage)?void 0:i.total_tokens},finishReason:y(d.finish_reason),request:{body:o},response:{...g(u),headers:l,body:c},providerMetadata:p,warnings:a}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),i={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:o,value:a}=await (0,r.GU)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:i,failedResponseHandler:s,successfulResponseHandler:(0,r.Ds)(v),abortSignal:e.abortSignal,fetch:this.config.fetch}),l="unknown",u={openai:{}},c={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},d=!0;return{stream:a.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,n){if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){l="error",n.enqueue({type:"error",error:t.error});return}let r=t.value;if("error"in r){l="error",n.enqueue({type:"error",error:r.error});return}d&&(d=!1,n.enqueue({type:"response-metadata",...g(r)}),n.enqueue({type:"text-start",id:"0"})),null!=r.usage&&(c.inputTokens=r.usage.prompt_tokens,c.outputTokens=r.usage.completion_tokens,c.totalTokens=r.usage.total_tokens);let i=r.choices[0];(null==i?void 0:i.finish_reason)!=null&&(l=y(i.finish_reason)),(null==i?void 0:i.logprobs)!=null&&(u.openai.logprobs=i.logprobs),(null==i?void 0:i.text)!=null&&i.text.length>0&&n.enqueue({type:"text-delta",id:"0",delta:i.text})},flush(e){d||e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:l,providerMetadata:u,usage:c})}})),request:{body:i},response:{headers:o}}}},w=(0,r.fE)(()=>(0,r.jN)(o.z.object({dimensions:o.z.number().optional(),user:o.z.string().optional()}))),k=(0,r.fE)(()=>(0,r.jN)(o.z.object({data:o.z.array(o.z.object({embedding:o.z.array(o.z.number())})),usage:o.z.object({prompt_tokens:o.z.number()}).nullish()}))),x=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:o}){var a;if(e.length>this.maxEmbeddingsPerCall)throw new i.Ch({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let l=null!=(a=await (0,r.xI)({provider:"openai",providerOptions:o,schema:w}))?a:{},{responseHeaders:u,value:c,rawValue:d}=await (0,r.GU)({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:l.dimensions,user:l.user},failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(k),abortSignal:n,fetch:this.config.fetch});return{embeddings:c.data.map(e=>e.embedding),usage:c.usage?{tokens:c.usage.prompt_tokens}:void 0,response:{headers:u,body:d}}}},I=(0,r.fE)(()=>(0,r.jN)(o.z.object({data:o.z.array(o.z.object({b64_json:o.z.string(),revised_prompt:o.z.string().optional()}))}))),T={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},j=new Set(["gpt-image-1","gpt-image-1-mini"]),E=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return null!=(e=T[this.modelId])?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:i,seed:o,providerOptions:a,headers:l,abortSignal:u}){var c,d,p,h;let f=[];null!=i&&f.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=o&&f.push({type:"unsupported-setting",setting:"seed"});let m=null!=(p=null==(d=null==(c=this.config._internal)?void 0:c.currentDate)?void 0:d.call(c))?p:new Date,{value:g,responseHeaders:y}=await (0,r.GU)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),l),body:{model:this.modelId,prompt:e,n:t,size:n,...null!=(h=a.openai)?h:{},...!j.has(this.modelId)?{response_format:"b64_json"}:{}},failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(I),abortSignal:u,fetch:this.config.fetch});return{images:g.data.map(e=>e.b64_json),warnings:f,response:{timestamp:m,modelId:this.modelId,headers:y},providerMetadata:{openai:{images:g.data.map(e=>e.revised_prompt?{revisedPrompt:e.revised_prompt}:null)}}}}},S=(0,r.ID)(()=>(0,r.jN)(o.z.object({code:o.z.string().nullish(),containerId:o.z.string()}))),C=(0,r.ID)(()=>(0,r.jN)(o.z.object({outputs:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("logs"),logs:o.z.string()}),o.z.object({type:o.z.literal("image"),url:o.z.string()})])).nullish()}))),O=(0,r.ID)(()=>(0,r.jN)(o.z.object({container:o.z.union([o.z.string(),o.z.object({fileIds:o.z.array(o.z.string()).optional()})]).optional()}))),A=(0,r.J2)({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:S,outputSchema:C}),N=o.z.object({key:o.z.string(),type:o.z.enum(["eq","ne","gt","gte","lt","lte"]),value:o.z.union([o.z.string(),o.z.number(),o.z.boolean()])}),$=o.z.object({type:o.z.enum(["and","or"]),filters:o.z.array(o.z.union([N,o.z.lazy(()=>$)]))}),R=(0,r.ID)(()=>(0,r.jN)(o.z.object({vectorStoreIds:o.z.array(o.z.string()),maxNumResults:o.z.number().optional(),ranking:o.z.object({ranker:o.z.string().optional(),scoreThreshold:o.z.number().optional()}).optional(),filters:o.z.union([N,$]).optional()}))),P=(0,r.ID)(()=>(0,r.jN)(o.z.object({queries:o.z.array(o.z.string()),results:o.z.array(o.z.object({attributes:o.z.record(o.z.string(),o.z.unknown()),fileId:o.z.string(),filename:o.z.string(),score:o.z.number(),text:o.z.string()})).nullable()}))),M=(0,r.J2)({id:"openai.file_search",name:"file_search",inputSchema:o.z.object({}),outputSchema:P}),U=(0,r.ID)(()=>(0,r.jN)(o.z.object({background:o.z.enum(["auto","opaque","transparent"]).optional(),inputFidelity:o.z.enum(["low","high"]).optional(),inputImageMask:o.z.object({fileId:o.z.string().optional(),imageUrl:o.z.string().optional()}).optional(),model:o.z.string().optional(),moderation:o.z.enum(["auto"]).optional(),outputCompression:o.z.number().int().min(0).max(100).optional(),outputFormat:o.z.enum(["png","jpeg","webp"]).optional(),partialImages:o.z.number().int().min(0).max(3).optional(),quality:o.z.enum(["auto","low","medium","high"]).optional(),size:o.z.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),Z=(0,r.ID)(()=>(0,r.jN)(o.z.object({}))),q=(0,r.ID)(()=>(0,r.jN)(o.z.object({result:o.z.string()}))),L=(0,r.J2)({id:"openai.image_generation",name:"image_generation",inputSchema:Z,outputSchema:q}),D=(0,r.ID)(()=>(0,r.jN)(o.z.object({action:o.z.object({type:o.z.literal("exec"),command:o.z.array(o.z.string()),timeoutMs:o.z.number().optional(),user:o.z.string().optional(),workingDirectory:o.z.string().optional(),env:o.z.record(o.z.string(),o.z.string()).optional()})}))),B=(0,r.ID)(()=>(0,r.jN)(o.z.object({output:o.z.string()}))),F=(0,r.J2)({id:"openai.local_shell",name:"local_shell",inputSchema:D,outputSchema:B}),V=(0,r.ID)(()=>(0,r.jN)(o.z.object({filters:o.z.object({allowedDomains:o.z.array(o.z.string()).optional()}).optional(),searchContextSize:o.z.enum(["low","medium","high"]).optional(),userLocation:o.z.object({type:o.z.literal("approximate"),country:o.z.string().optional(),city:o.z.string().optional(),region:o.z.string().optional(),timezone:o.z.string().optional()}).optional()}))),H=(0,r.ID)(()=>(0,r.jN)(o.z.object({action:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("search"),query:o.z.string().nullish()}),o.z.object({type:o.z.literal("open_page"),url:o.z.string()}),o.z.object({type:o.z.literal("find"),url:o.z.string(),pattern:o.z.string()})]).nullish()}))),G=(0,r.hL)({id:"openai.web_search",name:"web_search",inputSchema:H}),W=(0,r.ID)(()=>(0,r.jN)(o.z.object({searchContextSize:o.z.enum(["low","medium","high"]).optional(),userLocation:o.z.object({type:o.z.literal("approximate"),country:o.z.string().optional(),city:o.z.string().optional(),region:o.z.string().optional(),timezone:o.z.string().optional()}).optional()}))),K=(0,r.ID)(()=>(0,r.jN)(o.z.object({action:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("search"),query:o.z.string().nullish()}),o.z.object({type:o.z.literal("open_page"),url:o.z.string()}),o.z.object({type:o.z.literal("find"),url:o.z.string(),pattern:o.z.string()})]).nullish()}))),J={codeInterpreter:(e={})=>A(e),fileSearch:M,imageGeneration:(e={})=>L(e),localShell:F,webSearchPreview:(0,r.hL)({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:K}),webSearch:(e={})=>G(e)};function Q(e,t){return!!t&&t.some(t=>e.startsWith(t))}async function Y({prompt:e,systemMessageMode:t,fileIdPrefixes:n,store:o,hasLocalShellTool:a=!1}){var s,l,u,c,d,p,h,f,m;let g=[],y=[];for(let{role:_,content:v}of e)switch(_){case"system":switch(t){case"system":g.push({role:"system",content:v});break;case"developer":g.push({role:"developer",content:v});break;case"remove":y.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${t}`)}break;case"user":g.push({role:"user",content:v.map((e,t)=>{var o,a,s;switch(e.type){case"text":return{type:"input_text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let t="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"input_image",...e.data instanceof URL?{image_url:e.data.toString()}:"string"==typeof e.data&&Q(e.data,n)?{file_id:e.data}:{image_url:`data:${t};base64,${(0,r.ej)(e.data)}`},detail:null==(a=null==(o=e.providerOptions)?void 0:o.openai)?void 0:a.imageDetail}}if("application/pdf"===e.mediaType){if(e.data instanceof URL)return{type:"input_file",file_url:e.data.toString()};return{type:"input_file",..."string"==typeof e.data&&Q(e.data,n)?{file_id:e.data}:{filename:null!=(s=e.filename)?s:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${(0,r.ej)(e.data)}`}}}throw new i.b8({functionality:`file part media type ${e.mediaType}`})}})});break;case"assistant":{let e={},t={};for(let n of v)switch(n.type){case"text":g.push({role:"assistant",content:[{type:"output_text",text:n.text}],id:null!=(u=null==(l=null==(s=n.providerOptions)?void 0:s.openai)?void 0:l.itemId)?u:void 0});break;case"tool-call":if(t[n.toolCallId]=n,n.providerExecuted)break;if(a&&"local_shell"===n.toolName){let e=await (0,r.k5)({value:n.input,schema:D});g.push({type:"local_shell_call",call_id:n.toolCallId,id:null!=(p=null==(d=null==(c=n.providerOptions)?void 0:c.openai)?void 0:d.itemId)?p:void 0,action:{type:"exec",command:e.action.command,timeout_ms:e.action.timeoutMs,user:e.action.user,working_directory:e.action.workingDirectory,env:e.action.env}});break}g.push({type:"function_call",call_id:n.toolCallId,name:n.toolName,arguments:JSON.stringify(n.input),id:null!=(m=null==(f=null==(h=n.providerOptions)?void 0:h.openai)?void 0:f.itemId)?m:void 0});break;case"tool-result":o?g.push({type:"item_reference",id:n.toolCallId}):y.push({type:"other",message:`Results for OpenAI tool ${n.toolName} are not sent to the API when store is false`});break;case"reasoning":{let t=await (0,r.xI)({provider:"openai",providerOptions:n.providerOptions,schema:X}),i=null==t?void 0:t.itemId;if(null!=i){let r=e[i];if(o)void 0===r&&(g.push({type:"item_reference",id:i}),e[i]={type:"reasoning",id:i,summary:[]});else{let o=[];n.text.length>0?o.push({type:"summary_text",text:n.text}):void 0!==r&&y.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(n)}.`}),void 0===r?(e[i]={type:"reasoning",id:i,encrypted_content:null==t?void 0:t.reasoningEncryptedContent,summary:o},g.push(e[i])):r.summary.push(...o)}}else y.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(n)}.`})}}break}case"tool":for(let e of v){let t,n=e.output;if(a&&"local_shell"===e.toolName&&"json"===n.type){let t=await (0,r.k5)({value:n.value,schema:B});g.push({type:"local_shell_call_output",call_id:e.toolCallId,output:t.output});break}switch(n.type){case"text":case"error-text":t=n.value;break;case"json":case"error-json":t=JSON.stringify(n.value);break;case"content":t=n.value.map(e=>{switch(e.type){case"text":return{type:"input_text",text:e.text};case"media":return e.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${e.mediaType};base64,${e.data}`}:{type:"input_file",filename:"data",file_data:`data:${e.mediaType};base64,${e.data}`}}})}g.push({type:"function_call_output",call_id:e.toolCallId,output:t})}break;default:throw Error(`Unsupported role: ${_}`)}return{input:g,warnings:y}}var X=o.z.object({itemId:o.z.string().nullish(),reasoningEncryptedContent:o.z.string().nullish()});function ee({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var et=(0,r.fE)(()=>(0,r.jN)(o.z.union([o.z.object({type:o.z.literal("response.output_text.delta"),item_id:o.z.string(),delta:o.z.string(),logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number(),top_logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number()}))})).nullish()}),o.z.object({type:o.z.enum(["response.completed","response.incomplete"]),response:o.z.object({incomplete_details:o.z.object({reason:o.z.string()}).nullish(),usage:o.z.object({input_tokens:o.z.number(),input_tokens_details:o.z.object({cached_tokens:o.z.number().nullish()}).nullish(),output_tokens:o.z.number(),output_tokens_details:o.z.object({reasoning_tokens:o.z.number().nullish()}).nullish()}),service_tier:o.z.string().nullish()})}),o.z.object({type:o.z.literal("response.created"),response:o.z.object({id:o.z.string(),created_at:o.z.number(),model:o.z.string(),service_tier:o.z.string().nullish()})}),o.z.object({type:o.z.literal("response.output_item.added"),output_index:o.z.number(),item:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("message"),id:o.z.string()}),o.z.object({type:o.z.literal("reasoning"),id:o.z.string(),encrypted_content:o.z.string().nullish()}),o.z.object({type:o.z.literal("function_call"),id:o.z.string(),call_id:o.z.string(),name:o.z.string(),arguments:o.z.string()}),o.z.object({type:o.z.literal("web_search_call"),id:o.z.string(),status:o.z.string(),action:o.z.object({type:o.z.literal("search"),query:o.z.string().optional()}).nullish()}),o.z.object({type:o.z.literal("computer_call"),id:o.z.string(),status:o.z.string()}),o.z.object({type:o.z.literal("file_search_call"),id:o.z.string()}),o.z.object({type:o.z.literal("image_generation_call"),id:o.z.string()}),o.z.object({type:o.z.literal("code_interpreter_call"),id:o.z.string(),container_id:o.z.string(),code:o.z.string().nullable(),outputs:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("logs"),logs:o.z.string()}),o.z.object({type:o.z.literal("image"),url:o.z.string()})])).nullable(),status:o.z.string()})])}),o.z.object({type:o.z.literal("response.output_item.done"),output_index:o.z.number(),item:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("message"),id:o.z.string()}),o.z.object({type:o.z.literal("reasoning"),id:o.z.string(),encrypted_content:o.z.string().nullish()}),o.z.object({type:o.z.literal("function_call"),id:o.z.string(),call_id:o.z.string(),name:o.z.string(),arguments:o.z.string(),status:o.z.literal("completed")}),o.z.object({type:o.z.literal("code_interpreter_call"),id:o.z.string(),code:o.z.string().nullable(),container_id:o.z.string(),outputs:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("logs"),logs:o.z.string()}),o.z.object({type:o.z.literal("image"),url:o.z.string()})])).nullable()}),o.z.object({type:o.z.literal("image_generation_call"),id:o.z.string(),result:o.z.string()}),o.z.object({type:o.z.literal("web_search_call"),id:o.z.string(),status:o.z.string(),action:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("search"),query:o.z.string().nullish()}),o.z.object({type:o.z.literal("open_page"),url:o.z.string()}),o.z.object({type:o.z.literal("find"),url:o.z.string(),pattern:o.z.string()})]).nullish()}),o.z.object({type:o.z.literal("file_search_call"),id:o.z.string(),queries:o.z.array(o.z.string()),results:o.z.array(o.z.object({attributes:o.z.record(o.z.string(),o.z.unknown()),file_id:o.z.string(),filename:o.z.string(),score:o.z.number(),text:o.z.string()})).nullish()}),o.z.object({type:o.z.literal("local_shell_call"),id:o.z.string(),call_id:o.z.string(),action:o.z.object({type:o.z.literal("exec"),command:o.z.array(o.z.string()),timeout_ms:o.z.number().optional(),user:o.z.string().optional(),working_directory:o.z.string().optional(),env:o.z.record(o.z.string(),o.z.string()).optional()})}),o.z.object({type:o.z.literal("computer_call"),id:o.z.string(),status:o.z.literal("completed")})])}),o.z.object({type:o.z.literal("response.function_call_arguments.delta"),item_id:o.z.string(),output_index:o.z.number(),delta:o.z.string()}),o.z.object({type:o.z.literal("response.image_generation_call.partial_image"),item_id:o.z.string(),output_index:o.z.number(),partial_image_b64:o.z.string()}),o.z.object({type:o.z.literal("response.code_interpreter_call_code.delta"),item_id:o.z.string(),output_index:o.z.number(),delta:o.z.string()}),o.z.object({type:o.z.literal("response.code_interpreter_call_code.done"),item_id:o.z.string(),output_index:o.z.number(),code:o.z.string()}),o.z.object({type:o.z.literal("response.output_text.annotation.added"),annotation:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("url_citation"),url:o.z.string(),title:o.z.string()}),o.z.object({type:o.z.literal("file_citation"),file_id:o.z.string(),filename:o.z.string().nullish(),index:o.z.number().nullish(),start_index:o.z.number().nullish(),end_index:o.z.number().nullish(),quote:o.z.string().nullish()})])}),o.z.object({type:o.z.literal("response.reasoning_summary_part.added"),item_id:o.z.string(),summary_index:o.z.number()}),o.z.object({type:o.z.literal("response.reasoning_summary_text.delta"),item_id:o.z.string(),summary_index:o.z.number(),delta:o.z.string()}),o.z.object({type:o.z.literal("error"),code:o.z.string(),message:o.z.string(),param:o.z.string().nullish(),sequence_number:o.z.number()}),o.z.object({type:o.z.string()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),en=(0,r.fE)(()=>(0,r.jN)(o.z.object({id:o.z.string(),created_at:o.z.number(),error:o.z.object({code:o.z.string(),message:o.z.string()}).nullish(),model:o.z.string(),output:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("message"),role:o.z.literal("assistant"),id:o.z.string(),content:o.z.array(o.z.object({type:o.z.literal("output_text"),text:o.z.string(),logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number(),top_logprobs:o.z.array(o.z.object({token:o.z.string(),logprob:o.z.number()}))})).nullish(),annotations:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("url_citation"),start_index:o.z.number(),end_index:o.z.number(),url:o.z.string(),title:o.z.string()}),o.z.object({type:o.z.literal("file_citation"),file_id:o.z.string(),filename:o.z.string().nullish(),index:o.z.number().nullish(),start_index:o.z.number().nullish(),end_index:o.z.number().nullish(),quote:o.z.string().nullish()}),o.z.object({type:o.z.literal("container_file_citation")})]))}))}),o.z.object({type:o.z.literal("web_search_call"),id:o.z.string(),status:o.z.string(),action:o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("search"),query:o.z.string().nullish()}),o.z.object({type:o.z.literal("open_page"),url:o.z.string()}),o.z.object({type:o.z.literal("find"),url:o.z.string(),pattern:o.z.string()})]).nullish()}),o.z.object({type:o.z.literal("file_search_call"),id:o.z.string(),queries:o.z.array(o.z.string()),results:o.z.array(o.z.object({attributes:o.z.record(o.z.string(),o.z.unknown()),file_id:o.z.string(),filename:o.z.string(),score:o.z.number(),text:o.z.string()})).nullish()}),o.z.object({type:o.z.literal("code_interpreter_call"),id:o.z.string(),code:o.z.string().nullable(),container_id:o.z.string(),outputs:o.z.array(o.z.discriminatedUnion("type",[o.z.object({type:o.z.literal("logs"),logs:o.z.string()}),o.z.object({type:o.z.literal("image"),url:o.z.string()})])).nullable()}),o.z.object({type:o.z.literal("image_generation_call"),id:o.z.string(),result:o.z.string()}),o.z.object({type:o.z.literal("local_shell_call"),id:o.z.string(),call_id:o.z.string(),action:o.z.object({type:o.z.literal("exec"),command:o.z.array(o.z.string()),timeout_ms:o.z.number().optional(),user:o.z.string().optional(),working_directory:o.z.string().optional(),env:o.z.record(o.z.string(),o.z.string()).optional()})}),o.z.object({type:o.z.literal("function_call"),call_id:o.z.string(),name:o.z.string(),arguments:o.z.string(),id:o.z.string()}),o.z.object({type:o.z.literal("computer_call"),id:o.z.string(),status:o.z.string().optional()}),o.z.object({type:o.z.literal("reasoning"),id:o.z.string(),encrypted_content:o.z.string().nullish(),summary:o.z.array(o.z.object({type:o.z.literal("summary_text"),text:o.z.string()}))})])),service_tier:o.z.string().nullish(),incomplete_details:o.z.object({reason:o.z.string()}).nullish(),usage:o.z.object({input_tokens:o.z.number(),input_tokens_details:o.z.object({cached_tokens:o.z.number().nullish()}).nullish(),output_tokens:o.z.number(),output_tokens_details:o.z.object({reasoning_tokens:o.z.number().nullish()}).nullish()})}))),er=(0,r.fE)(()=>(0,r.jN)(o.z.object({include:o.z.array(o.z.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:o.z.string().nullish(),logprobs:o.z.union([o.z.boolean(),o.z.number().min(1).max(20)]).optional(),maxToolCalls:o.z.number().nullish(),metadata:o.z.any().nullish(),parallelToolCalls:o.z.boolean().nullish(),previousResponseId:o.z.string().nullish(),promptCacheKey:o.z.string().nullish(),reasoningEffort:o.z.string().nullish(),reasoningSummary:o.z.string().nullish(),safetyIdentifier:o.z.string().nullish(),serviceTier:o.z.enum(["auto","flex","priority","default"]).nullish(),store:o.z.boolean().nullish(),strictJsonSchema:o.z.boolean().nullish(),textVerbosity:o.z.enum(["low","medium","high"]).nullish(),user:o.z.string().nullish()})));async function ei({tools:e,toolChoice:t,strictJsonSchema:n}){e=(null==e?void 0:e.length)?e:void 0;let o=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:o};let a=[];for(let t of e)switch(t.type){case"function":a.push({type:"function",name:t.name,description:t.description,parameters:t.inputSchema,strict:n});break;case"provider-defined":switch(t.id){case"openai.file_search":{let e=await (0,r.k5)({value:t.args,schema:R});a.push({type:"file_search",vector_store_ids:e.vectorStoreIds,max_num_results:e.maxNumResults,ranking_options:e.ranking?{ranker:e.ranking.ranker,score_threshold:e.ranking.scoreThreshold}:void 0,filters:e.filters});break}case"openai.local_shell":a.push({type:"local_shell"});break;case"openai.web_search_preview":{let e=await (0,r.k5)({value:t.args,schema:W});a.push({type:"web_search_preview",search_context_size:e.searchContextSize,user_location:e.userLocation});break}case"openai.web_search":{let e=await (0,r.k5)({value:t.args,schema:V});a.push({type:"web_search",filters:null!=e.filters?{allowed_domains:e.filters.allowedDomains}:void 0,search_context_size:e.searchContextSize,user_location:e.userLocation});break}case"openai.code_interpreter":{let e=await (0,r.k5)({value:t.args,schema:O});a.push({type:"code_interpreter",container:null==e.container?{type:"auto",file_ids:void 0}:"string"==typeof e.container?e.container:{type:"auto",file_ids:e.container.fileIds}});break}case"openai.image_generation":{let e=await (0,r.k5)({value:t.args,schema:U});a.push({type:"image_generation",background:e.background,input_fidelity:e.inputFidelity,input_image_mask:e.inputImageMask?{file_id:e.inputImageMask.fileId,image_url:e.inputImageMask.imageUrl}:void 0,model:e.model,size:e.size,quality:e.quality,moderation:e.moderation,output_format:e.outputFormat,output_compression:e.outputCompression})}}break;default:o.push({type:"unsupported-tool",tool:t})}if(null==t)return{tools:a,toolChoice:void 0,toolWarnings:o};let s=t.type;switch(s){case"auto":case"none":case"required":return{tools:a,toolChoice:s,toolWarnings:o};case"tool":return{tools:a,toolChoice:"code_interpreter"===t.toolName||"file_search"===t.toolName||"image_generation"===t.toolName||"web_search_preview"===t.toolName||"web_search"===t.toolName?{type:t.toolName}:{type:"function",name:t.toolName},toolWarnings:o};default:throw new i.b8({functionality:`tool choice type: ${s}`})}}var eo=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:t,stopSequences:n,topP:i,topK:o,presencePenalty:a,frequencyPenalty:s,seed:l,prompt:u,providerOptions:c,tools:d,toolChoice:p,responseFormat:h}){var f,m,g,y;let _=[],v=function(e){let t={requiredAutoTruncation:!1,systemMessageMode:"system",supportsFlexProcessing:e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),supportsPriorityProcessing:e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini")};return e.startsWith("gpt-5-chat")?{...t,isReasoningModel:!1}:e.startsWith("o")||e.startsWith("gpt-5")||e.startsWith("codex-")||e.startsWith("computer-use")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{...t,isReasoningModel:!0,systemMessageMode:"remove"}:{...t,isReasoningModel:!0,systemMessageMode:"developer"}:{...t,isReasoningModel:!1}}(this.modelId);null!=o&&_.push({type:"unsupported-setting",setting:"topK"}),null!=l&&_.push({type:"unsupported-setting",setting:"seed"}),null!=a&&_.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=s&&_.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=n&&_.push({type:"unsupported-setting",setting:"stopSequences"});let b=await (0,r.xI)({provider:"openai",providerOptions:c,schema:er}),{input:z,warnings:w}=await Y({prompt:u,systemMessageMode:v.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:null==(f=null==b?void 0:b.store)||f,hasLocalShellTool:T("openai.local_shell")});_.push(...w);let k=null!=(m=null==b?void 0:b.strictJsonSchema)&&m,x=null==b?void 0:b.include;function I(e){null==x?x=[e]:x.includes(e)||(x=[...x,e])}function T(e){return(null==d?void 0:d.find(t=>"provider-defined"===t.type&&t.id===e))!=null}let j="number"==typeof(null==b?void 0:b.logprobs)?null==b?void 0:b.logprobs:(null==b?void 0:b.logprobs)===!0?20:void 0;j&&I("message.output_text.logprobs");let E=null==(g=null==d?void 0:d.find(e=>"provider-defined"===e.type&&("openai.web_search"===e.id||"openai.web_search_preview"===e.id)))?void 0:g.name;E&&I("web_search_call.action.sources"),T("openai.code_interpreter")&&I("code_interpreter_call.outputs");let S=null==b?void 0:b.store;!1===S&&v.isReasoningModel&&I("reasoning.encrypted_content");let C={model:this.modelId,input:z,temperature:t,top_p:i,max_output_tokens:e,...((null==h?void 0:h.type)==="json"||(null==b?void 0:b.textVerbosity))&&{text:{...(null==h?void 0:h.type)==="json"&&{format:null!=h.schema?{type:"json_schema",strict:k,name:null!=(y=h.name)?y:"response",description:h.description,schema:h.schema}:{type:"json_object"}},...(null==b?void 0:b.textVerbosity)&&{verbosity:b.textVerbosity}}},max_tool_calls:null==b?void 0:b.maxToolCalls,metadata:null==b?void 0:b.metadata,parallel_tool_calls:null==b?void 0:b.parallelToolCalls,previous_response_id:null==b?void 0:b.previousResponseId,store:S,user:null==b?void 0:b.user,instructions:null==b?void 0:b.instructions,service_tier:null==b?void 0:b.serviceTier,include:x,prompt_cache_key:null==b?void 0:b.promptCacheKey,safety_identifier:null==b?void 0:b.safetyIdentifier,top_logprobs:j,...v.isReasoningModel&&((null==b?void 0:b.reasoningEffort)!=null||(null==b?void 0:b.reasoningSummary)!=null)&&{reasoning:{...(null==b?void 0:b.reasoningEffort)!=null&&{effort:b.reasoningEffort},...(null==b?void 0:b.reasoningSummary)!=null&&{summary:b.reasoningSummary}}},...v.requiredAutoTruncation&&{truncation:"auto"}};v.isReasoningModel?(null!=C.temperature&&(C.temperature=void 0,_.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=C.top_p&&(C.top_p=void 0,_.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):((null==b?void 0:b.reasoningEffort)!=null&&_.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),(null==b?void 0:b.reasoningSummary)!=null&&_.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),(null==b?void 0:b.serviceTier)!=="flex"||v.supportsFlexProcessing||(_.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete C.service_tier),(null==b?void 0:b.serviceTier)!=="priority"||v.supportsPriorityProcessing||(_.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete C.service_tier);let{tools:O,toolChoice:A,toolWarnings:N}=await ei({tools:d,toolChoice:p,strictJsonSchema:k});return{webSearchToolName:E,args:{...C,tools:O,tool_choice:A},warnings:[..._,...N]}}async doGenerate(e){var t,n,o,a,l,u,c,d,p,h,f,m,g,y,_,v,b,z,w;let{args:k,warnings:x,webSearchToolName:I}=await this.getArgs(e),T=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:j,value:E,rawValue:S}=await (0,r.GU)({url:T,headers:(0,r.m2)(this.config.headers(),e.headers),body:k,failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(en),abortSignal:e.abortSignal,fetch:this.config.fetch});if(E.error)throw new i.hL({message:E.error.message,url:T,requestBodyValues:k,statusCode:400,responseHeaders:j,responseBody:S,isRetryable:!1});let C=[],O=[],A=!1;for(let i of E.output)switch(i.type){case"reasoning":for(let e of(0===i.summary.length&&i.summary.push({type:"summary_text",text:""}),i.summary))C.push({type:"reasoning",text:e.text,providerMetadata:{openai:{itemId:i.id,reasoningEncryptedContent:null!=(t=i.encrypted_content)?t:null}}});break;case"image_generation_call":C.push({type:"tool-call",toolCallId:i.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),C.push({type:"tool-result",toolCallId:i.id,toolName:"image_generation",result:{result:i.result},providerExecuted:!0});break;case"local_shell_call":C.push({type:"tool-call",toolCallId:i.call_id,toolName:"local_shell",input:JSON.stringify({action:i.action}),providerMetadata:{openai:{itemId:i.id}}});break;case"message":for(let t of i.content)for(let s of((null==(o=null==(n=e.providerOptions)?void 0:n.openai)?void 0:o.logprobs)&&t.logprobs&&O.push(t.logprobs),C.push({type:"text",text:t.text,providerMetadata:{openai:{itemId:i.id}}}),t.annotations))"url_citation"===s.type?C.push({type:"source",sourceType:"url",id:null!=(u=null==(l=(a=this.config).generateId)?void 0:l.call(a))?u:(0,r.$C)(),url:s.url,title:s.title}):"file_citation"===s.type&&C.push({type:"source",sourceType:"document",id:null!=(p=null==(d=(c=this.config).generateId)?void 0:d.call(c))?p:(0,r.$C)(),mediaType:"text/plain",title:null!=(f=null!=(h=s.quote)?h:s.filename)?f:"Document",filename:null!=(m=s.filename)?m:s.file_id});break;case"function_call":A=!0,C.push({type:"tool-call",toolCallId:i.call_id,toolName:i.name,input:i.arguments,providerMetadata:{openai:{itemId:i.id}}});break;case"web_search_call":C.push({type:"tool-call",toolCallId:i.id,toolName:null!=I?I:"web_search",input:JSON.stringify({action:i.action}),providerExecuted:!0}),C.push({type:"tool-result",toolCallId:i.id,toolName:null!=I?I:"web_search",result:{status:i.status},providerExecuted:!0});break;case"computer_call":C.push({type:"tool-call",toolCallId:i.id,toolName:"computer_use",input:"",providerExecuted:!0}),C.push({type:"tool-result",toolCallId:i.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:i.status||"completed"},providerExecuted:!0});break;case"file_search_call":C.push({type:"tool-call",toolCallId:i.id,toolName:"file_search",input:"{}",providerExecuted:!0}),C.push({type:"tool-result",toolCallId:i.id,toolName:"file_search",result:{queries:i.queries,results:null!=(y=null==(g=i.results)?void 0:g.map(e=>({attributes:e.attributes,fileId:e.file_id,filename:e.filename,score:e.score,text:e.text})))?y:null},providerExecuted:!0});break;case"code_interpreter_call":C.push({type:"tool-call",toolCallId:i.id,toolName:"code_interpreter",input:JSON.stringify({code:i.code,containerId:i.container_id}),providerExecuted:!0}),C.push({type:"tool-result",toolCallId:i.id,toolName:"code_interpreter",result:{outputs:i.outputs},providerExecuted:!0})}let N={openai:{responseId:E.id}};return O.length>0&&(N.openai.logprobs=O),"string"==typeof E.service_tier&&(N.openai.serviceTier=E.service_tier),{content:C,finishReason:ee({finishReason:null==(_=E.incomplete_details)?void 0:_.reason,hasFunctionCall:A}),usage:{inputTokens:E.usage.input_tokens,outputTokens:E.usage.output_tokens,totalTokens:E.usage.input_tokens+E.usage.output_tokens,reasoningTokens:null!=(b=null==(v=E.usage.output_tokens_details)?void 0:v.reasoning_tokens)?b:void 0,cachedInputTokens:null!=(w=null==(z=E.usage.input_tokens_details)?void 0:z.cached_tokens)?w:void 0},request:{body:k},response:{id:E.id,timestamp:new Date(1e3*E.created_at),modelId:E.model,headers:j,body:S},providerMetadata:N,warnings:x}}async doStream(e){let t,{args:n,warnings:i,webSearchToolName:o}=await this.getArgs(e),{responseHeaders:a,value:l}=await (0,r.GU)({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:s,successfulResponseHandler:(0,r.Ds)(et),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=this,c="unknown",d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],h=null,f={},m=!1,g={};return{stream:l.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:i})},transform(n,i){var a,s,l,y,_,v,b,z,w,k,x,I,T,j,E,S,C,O,A,N,$,R,P,M,U,Z;if(e.includeRawChunks&&i.enqueue({type:"raw",rawValue:n.rawValue}),!n.success){c="error",i.enqueue({type:"error",error:n.error});return}let q=n.value;if(es(q)){"function_call"===q.item.type?(f[q.output_index]={toolName:q.item.name,toolCallId:q.item.call_id},i.enqueue({type:"tool-input-start",id:q.item.call_id,toolName:q.item.name})):"web_search_call"===q.item.type?(f[q.output_index]={toolName:null!=o?o:"web_search",toolCallId:q.item.id},i.enqueue({type:"tool-input-start",id:q.item.id,toolName:null!=o?o:"web_search",providerExecuted:!0})):"computer_call"===q.item.type?(f[q.output_index]={toolName:"computer_use",toolCallId:q.item.id},i.enqueue({type:"tool-input-start",id:q.item.id,toolName:"computer_use",providerExecuted:!0})):"code_interpreter_call"===q.item.type?(f[q.output_index]={toolName:"code_interpreter",toolCallId:q.item.id,codeInterpreter:{containerId:q.item.container_id}},i.enqueue({type:"tool-input-start",id:q.item.id,toolName:"code_interpreter",providerExecuted:!0}),i.enqueue({type:"tool-input-delta",id:q.item.id,delta:`{"containerId":"${q.item.container_id}","code":"`})):"file_search_call"===q.item.type?i.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):"image_generation_call"===q.item.type?i.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):"message"===q.item.type?i.enqueue({type:"text-start",id:q.item.id,providerMetadata:{openai:{itemId:q.item.id}}}):es(M=q)&&"reasoning"===M.item.type&&(g[q.item.id]={encryptedContent:q.item.encrypted_content,summaryParts:[0]},i.enqueue({type:"reasoning-start",id:`${q.item.id}:0`,providerMetadata:{openai:{itemId:q.item.id,reasoningEncryptedContent:null!=(a=q.item.encrypted_content)?a:null}}}))}else if(ea(q))if("function_call"===q.item.type)f[q.output_index]=void 0,m=!0,i.enqueue({type:"tool-input-end",id:q.item.call_id}),i.enqueue({type:"tool-call",toolCallId:q.item.call_id,toolName:q.item.name,input:q.item.arguments,providerMetadata:{openai:{itemId:q.item.id}}});else if("web_search_call"===q.item.type)f[q.output_index]=void 0,i.enqueue({type:"tool-input-end",id:q.item.id}),i.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"web_search",input:JSON.stringify({action:q.item.action}),providerExecuted:!0}),i.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"web_search",result:{status:q.item.status},providerExecuted:!0});else if("computer_call"===q.item.type)f[q.output_index]=void 0,i.enqueue({type:"tool-input-end",id:q.item.id}),i.enqueue({type:"tool-call",toolCallId:q.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),i.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:q.item.status||"completed"},providerExecuted:!0});else if("file_search_call"===q.item.type)f[q.output_index]=void 0,i.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"file_search",result:{queries:q.item.queries,results:null!=(l=null==(s=q.item.results)?void 0:s.map(e=>({attributes:e.attributes,fileId:e.file_id,filename:e.filename,score:e.score,text:e.text})))?l:null},providerExecuted:!0});else if("code_interpreter_call"===q.item.type)f[q.output_index]=void 0,i.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"code_interpreter",result:{outputs:q.item.outputs},providerExecuted:!0});else if("image_generation_call"===q.item.type)i.enqueue({type:"tool-result",toolCallId:q.item.id,toolName:"image_generation",result:{result:q.item.result},providerExecuted:!0});else if("local_shell_call"===q.item.type)f[q.output_index]=void 0,i.enqueue({type:"tool-call",toolCallId:q.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:q.item.action.command,timeoutMs:q.item.action.timeout_ms,user:q.item.action.user,workingDirectory:q.item.action.working_directory,env:q.item.action.env}}),providerMetadata:{openai:{itemId:q.item.id}}});else if("message"===q.item.type)i.enqueue({type:"text-end",id:q.item.id});else{if(ea(U=q)&&"reasoning"===U.item.type){for(let e of g[q.item.id].summaryParts)i.enqueue({type:"reasoning-end",id:`${q.item.id}:${e}`,providerMetadata:{openai:{itemId:q.item.id,reasoningEncryptedContent:null!=(y=q.item.encrypted_content)?y:null}}});delete g[q.item.id]}}else if("response.function_call_arguments.delta"===q.type){let e=f[q.output_index];null!=e&&i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:q.delta})}else if("response.code_interpreter_call_code.delta"===q.type){let e=f[q.output_index];null!=e&&i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:JSON.stringify(q.delta).slice(1,-1)})}else if("response.code_interpreter_call_code.done"===q.type){let e=f[q.output_index];null!=e&&(i.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:'"}'}),i.enqueue({type:"tool-input-end",id:e.toolCallId}),i.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:q.code,containerId:e.codeInterpreter.containerId}),providerExecuted:!0}))}else{"response.created"===q.type?(h=q.response.id,i.enqueue({type:"response-metadata",id:q.response.id,timestamp:new Date(1e3*q.response.created_at),modelId:q.response.model})):"response.output_text.delta"===q.type?(i.enqueue({type:"text-delta",id:q.item_id,delta:q.delta}),(null==(v=null==(_=e.providerOptions)?void 0:_.openai)?void 0:v.logprobs)&&q.logprobs&&p.push(q.logprobs)):"response.reasoning_summary_part.added"===q.type?q.summary_index>0&&(null==(b=g[q.item_id])||b.summaryParts.push(q.summary_index),i.enqueue({type:"reasoning-start",id:`${q.item_id}:${q.summary_index}`,providerMetadata:{openai:{itemId:q.item_id,reasoningEncryptedContent:null!=(w=null==(z=g[q.item_id])?void 0:z.encryptedContent)?w:null}}})):"response.reasoning_summary_text.delta"===q.type?i.enqueue({type:"reasoning-delta",id:`${q.item_id}:${q.summary_index}`,delta:q.delta,providerMetadata:{openai:{itemId:q.item_id}}}):"response.completed"===(Z=q).type||"response.incomplete"===Z.type?(c=ee({finishReason:null==(k=q.response.incomplete_details)?void 0:k.reason,hasFunctionCall:m}),d.inputTokens=q.response.usage.input_tokens,d.outputTokens=q.response.usage.output_tokens,d.totalTokens=q.response.usage.input_tokens+q.response.usage.output_tokens,d.reasoningTokens=null!=(I=null==(x=q.response.usage.output_tokens_details)?void 0:x.reasoning_tokens)?I:void 0,d.cachedInputTokens=null!=(j=null==(T=q.response.usage.input_tokens_details)?void 0:T.cached_tokens)?j:void 0,"string"==typeof q.response.service_tier&&(t=q.response.service_tier)):"response.output_text.annotation.added"===q.type?"url_citation"===q.annotation.type?i.enqueue({type:"source",sourceType:"url",id:null!=(C=null==(S=(E=u.config).generateId)?void 0:S.call(E))?C:(0,r.$C)(),url:q.annotation.url,title:q.annotation.title}):"file_citation"===q.annotation.type&&i.enqueue({type:"source",sourceType:"document",id:null!=(N=null==(A=(O=u.config).generateId)?void 0:A.call(O))?N:(0,r.$C)(),mediaType:"text/plain",title:null!=(R=null!=($=q.annotation.quote)?$:q.annotation.filename)?R:"Document",filename:null!=(P=q.annotation.filename)?P:q.annotation.file_id}):"error"===q.type&&i.enqueue({type:"error",error:q})}},flush(e){let n={openai:{responseId:h}};p.length>0&&(n.openai.logprobs=p),void 0!==t&&(n.openai.serviceTier=t),e.enqueue({type:"finish",finishReason:c,usage:d,providerMetadata:n})}})),request:{body:n},response:{headers:a}}}};function ea(e){return"response.output_item.done"===e.type}function es(e){return"response.output_item.added"===e.type}var el=(0,r.fE)(()=>(0,r.jN)(o.z.object({instructions:o.z.string().nullish(),speed:o.z.number().min(.25).max(4).default(1).nullish()}))),eu=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:i,instructions:o,language:a,providerOptions:s}){let l=[],u=await (0,r.xI)({provider:"openai",providerOptions:s,schema:el}),c={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:i,instructions:o};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?c.response_format=n:l.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),u){let e={};for(let t in e){let n=e[t];void 0!==n&&(c[t]=n)}}return a&&l.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${a}" was ignored.`}),{requestBody:c,warnings:l}}async doGenerate(e){var t,n,i;let o=null!=(i=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?i:new Date,{requestBody:a,warnings:l}=await this.getArgs(e),{value:u,responseHeaders:c,rawValue:d}=await (0,r.GU)({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),body:a,failedResponseHandler:s,successfulResponseHandler:(0,r.HD)(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:u,warnings:l,request:{body:JSON.stringify(a)},response:{timestamp:o,modelId:this.modelId,headers:c,body:d}}}},ec=(0,r.fE)(()=>(0,r.jN)(o.z.object({text:o.z.string(),language:o.z.string().nullish(),duration:o.z.number().nullish(),words:o.z.array(o.z.object({word:o.z.string(),start:o.z.number(),end:o.z.number()})).nullish(),segments:o.z.array(o.z.object({id:o.z.number(),seek:o.z.number(),start:o.z.number(),end:o.z.number(),text:o.z.string(),tokens:o.z.array(o.z.number()),temperature:o.z.number(),avg_logprob:o.z.number(),compression_ratio:o.z.number(),no_speech_prob:o.z.number()})).nullish()}))),ed=(0,r.fE)(()=>(0,r.jN)(o.z.object({include:o.z.array(o.z.string()).optional(),language:o.z.string().optional(),prompt:o.z.string().optional(),temperature:o.z.number().min(0).max(1).default(0).optional(),timestampGranularities:o.z.array(o.z.enum(["word","segment"])).default(["segment"]).optional()}))),ep={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},eh=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:n}){let i=await (0,r.xI)({provider:"openai",providerOptions:n,schema:ed}),o=new FormData,a=e instanceof Uint8Array?new Blob([e]):new Blob([(0,r.Z9)(e)]);o.append("model",this.modelId);let s=(0,r.HQ)(t);if(o.append("file",new File([a],"audio",{type:t}),`audio.${s}`),i){for(let[e,t]of Object.entries({include:i.include,language:i.language,prompt:i.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:i.temperature,timestamp_granularities:i.timestampGranularities}))if(null!=t)if(Array.isArray(t))for(let n of t)o.append(`${e}[]`,String(n));else o.append(e,String(t))}return{formData:o,warnings:[]}}async doGenerate(e){var t,n,i,o,a,l,u,c;let d=null!=(i=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?i:new Date,{formData:p,warnings:h}=await this.getArgs(e),{value:f,responseHeaders:m,rawValue:g}=await (0,r.S)({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:(0,r.m2)(this.config.headers(),e.headers),formData:p,failedResponseHandler:s,successfulResponseHandler:(0,r.cV)(ec),abortSignal:e.abortSignal,fetch:this.config.fetch}),y=null!=f.language&&f.language in ep?ep[f.language]:void 0;return{text:f.text,segments:null!=(u=null!=(l=null==(o=f.segments)?void 0:o.map(e=>({text:e.text,startSecond:e.start,endSecond:e.end})))?l:null==(a=f.words)?void 0:a.map(e=>({text:e.word,startSecond:e.start,endSecond:e.end})))?u:[],language:y,durationInSeconds:null!=(c=f.duration)?c:void 0,warnings:h,response:{timestamp:d,modelId:this.modelId,headers:m,body:g}}}};function ef(e={}){var t,n;let i=null!=(t=(0,r.ae)((0,r.x3)({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))?t:"https://api.openai.com/v1",o=null!=(n=e.name)?n:"openai",a=()=>(0,r.WZ)({Authorization:`Bearer ${(0,r.WL)({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},"ai-sdk/openai/2.0.49"),s=t=>new x(t,{provider:`${o}.embedding`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),l=t=>new E(t,{provider:`${o}.image`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),u=t=>new eh(t,{provider:`${o}.transcription`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),c=t=>new eu(t,{provider:`${o}.speech`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),d=e=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return p(e)},p=t=>new eo(t,{provider:`${o}.responses`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch,fileIdPrefixes:["file-"]}),f=function(e){return d(e)};return f.languageModel=d,f.chat=t=>new h(t,{provider:`${o}.chat`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),f.completion=t=>new z(t,{provider:`${o}.completion`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),f.responses=p,f.embedding=s,f.textEmbedding=s,f.textEmbeddingModel=s,f.image=l,f.imageModel=l,f.transcription=u,f.transcriptionModel=u,f.speech=c,f.speechModel=c,f.tools=J,f}ef()},73166:(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(s,{getContext:()=>l.getContext,getVercelOidcToken:()=>u,getVercelOidcTokenSync:()=>c}),e.exports=((e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e})(r({},"__esModule",{value:!0}),s);var l=n(49565);async function u(){return""}function c(){return""}},73297:(e,t,n)=>{"use strict";n.d(t,{I:()=>j});var r=n(51229),i=n(60494),o=n(42210),a=n(72327),s=n(22153),l=n(7703),u=class extends a.Q{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#n=(0,s.T)(),this.bindMethods(),this.setOptions(t)}#e;#r=void 0;#i=void 0;#o=void 0;#a;#s;#n;#t;#l;#u;#c;#d;#p;#h;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#r.addObserver(this),c(this.#r,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d(this.#r,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d(this.#r,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#_(),this.#r.removeObserver(this)}setOptions(e){let t=this.options,n=this.#r;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#r))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#v(),this.#r.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#r,observer:this});let r=this.hasListeners();r&&p(this.#r,n,this.options,t)&&this.#m(),this.updateResult(),r&&(this.#r!==n||(0,l.Eh)(this.options.enabled,this.#r)!==(0,l.Eh)(t.enabled,this.#r)||(0,l.d2)(this.options.staleTime,this.#r)!==(0,l.d2)(t.staleTime,this.#r))&&this.#b();let i=this.#z();r&&(this.#r!==n||(0,l.Eh)(this.options.enabled,this.#r)!==(0,l.Eh)(t.enabled,this.#r)||i!==this.#h)&&this.#w(i)}getOptimisticResult(e){var t,n;let r=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(r,e);return t=this,n=i,(0,l.f8)(t.getCurrentResult(),n)||(this.#o=i,this.#s=this.options,this.#a=this.#r.state),i}getCurrentResult(){return this.#o}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),t?.(n),"promise"!==n||this.options.experimental_prefetchInRender||"pending"!==this.#n.status||this.#n.reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,n))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#r}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#o))}#m(e){this.#v();let t=this.#r.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#b(){this.#y();let e=(0,l.d2)(this.options.staleTime,this.#r);if(l.S$||this.#o.isStale||!(0,l.gn)(e))return;let t=(0,l.j3)(this.#o.dataUpdatedAt,e);this.#d=setTimeout(()=>{this.#o.isStale||this.updateResult()},t+1)}#z(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#r):this.options.refetchInterval)??!1}#w(e){this.#_(),this.#h=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#r)&&(0,l.gn)(this.#h)&&0!==this.#h&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||r.m.isFocused())&&this.#m()},this.#h))}#g(){this.#b(),this.#w(this.#z())}#y(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#_(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(e,t){let n,r=this.#r,i=this.options,a=this.#o,u=this.#a,d=this.#s,f=e!==r?e.state:this.#i,{state:m}=e,g={...m},y=!1;if(t._optimisticResults){let n=this.hasListeners(),a=!n&&c(e,t),s=n&&p(e,r,t,i);(a||s)&&(g={...g,...(0,o.k)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:b}=g;n=g.data;let z=!1;if(void 0!==t.placeholderData&&void 0===n&&"pending"===b){let e;a?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(e=a.data,z=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(b="success",n=(0,l.pl)(a?.data,e,t),y=!0)}if(t.select&&void 0!==n&&!z)if(a&&n===u?.data&&t.select===this.#l)n=this.#u;else try{this.#l=t.select,n=t.select(n),n=(0,l.pl)(a?.data,n,t),this.#u=n,this.#t=null}catch(e){this.#t=e}this.#t&&(_=this.#t,n=this.#u,v=Date.now(),b="error");let w="fetching"===g.fetchStatus,k="pending"===b,x="error"===b,I=k&&w,T=void 0!==n,j={status:b,fetchStatus:g.fetchStatus,isPending:k,isSuccess:"success"===b,isError:x,isInitialLoading:I,isLoading:I,data:n,dataUpdatedAt:g.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:w,isRefetching:w&&!k,isLoadingError:x&&!T,isPaused:"paused"===g.fetchStatus,isPlaceholderData:y,isRefetchError:x&&T,isStale:h(e,t),refetch:this.refetch,promise:this.#n,isEnabled:!1!==(0,l.Eh)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===j.status?e.reject(j.error):void 0!==j.data&&e.resolve(j.data)},n=()=>{t(this.#n=j.promise=(0,s.T)())},i=this.#n;switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":("error"===j.status||j.data!==i.value)&&n();break;case"rejected":("error"!==j.status||j.error!==i.reason)&&n()}}return j}updateResult(){let e=this.#o,t=this.createResult(this.#r,this.options);this.#a=this.#r.state,this.#s=this.options,void 0!==this.#a.data&&(this.#c=this.#r),(0,l.f8)(t,e)||(this.#o=t,this.#k({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.#f.size)return!0;let r=new Set(n??this.#f);return this.options.throwOnError&&r.add("error"),Object.keys(this.#o).some(t=>this.#o[t]!==e[t]&&r.has(t))})()}))}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#r)return;let t=this.#r;this.#r=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#k(e){i.jG.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#o)}),this.#e.getQueryCache().notify({query:this.#r,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&d(e,t,t.refetchOnMount)}function d(e,t,n){if(!1!==(0,l.Eh)(t.enabled,e)&&"static"!==(0,l.d2)(t.staleTime,e)){let r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&h(e,t)}return!1}function p(e,t,n,r){return(e!==t||!1===(0,l.Eh)(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&h(e,n)}function h(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var f=n(7620),m=n(87606);n(54568);var g=f.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),y=()=>f.useContext(g),_=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},v=e=>{f.useEffect(()=>{e.clearReset()},[e])},b=e=>{let{result:t,errorResetBoundary:n,throwOnError:r,query:i,suspense:o}=e;return t.isError&&!n.isReset()&&!t.isFetching&&i&&(o&&void 0===t.data||(0,l.GU)(r,[t.error,i]))},z=f.createContext(!1),w=()=>f.useContext(z);z.Provider;var k=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>t(n(...e)):t(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},x=(e,t)=>e.isLoading&&e.isFetching&&!t,I=(e,t)=>e?.suspense&&t.isPending,T=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function j(e,t){return function(e,t,n){var r,o,a,s,u;let c=w(),d=y(),p=(0,m.jE)(n),h=p.defaultQueryOptions(e);null==(o=p.getDefaultOptions().queries)||null==(r=o._experimental_beforeQuery)||r.call(o,h),h._optimisticResults=c?"isRestoring":"optimistic",k(h),_(h,d),v(d);let g=!p.getQueryCache().get(h.queryHash),[z]=f.useState(()=>new t(p,h)),j=z.getOptimisticResult(h),E=!c&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=E?z.subscribe(i.jG.batchCalls(e)):l.lQ;return z.updateResult(),t},[z,E]),()=>z.getCurrentResult(),()=>z.getCurrentResult()),f.useEffect(()=>{z.setOptions(h)},[h,z]),I(h,j))throw T(h,z,d);if(b({result:j,errorResetBoundary:d,throwOnError:h.throwOnError,query:p.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw j.error;if(null==(s=p.getDefaultOptions().queries)||null==(a=s._experimental_afterQuery)||a.call(s,h,j),h.experimental_prefetchInRender&&!l.S$&&x(j,c)){let e=g?T(h,z,d):null==(u=p.getQueryCache().get(h.queryHash))?void 0:u.promise;null==e||e.catch(l.lQ).finally(()=>{z.updateResult()})}return h.notifyOnChangeProps?j:z.trackResult(j)}(e,u,t)}},73386:(e,t,n)=>{"use strict";function r(e,t,n){function r(n,r){var i;for(let o in Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r),a.prototype)o in n||Object.defineProperty(n,o,{value:a.prototype[o].bind(n)});n._zod.constr=a,n._zod.def=r}let i=n?.Parent??Object;class o extends i{}function a(e){var t;let i=n?.Parent?new o:this;for(let n of(r(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))n();return i}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!n?.Parent&&t instanceof n.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}n.d(t,{ER:()=>ih}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class i extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let o={};function a(e){return e&&Object.assign(o,e),o}let s=/^[cC][^\s-]{8,}$/,l=/^[0-9a-z]+$/,u=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,c=/^[0-9a-vA-V]{20}$/,d=/^[A-Za-z0-9]{27}$/,p=/^[a-zA-Z0-9_-]{21}$/,h=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,f=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,m=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,g=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,y=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,v=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,b=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,z=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,w=/^[A-Za-z0-9_-]*$/,k=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,x=/^\+(?:[0-9]){6,14}[0-9]$/,I="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",T=RegExp(`^${I}$`);function j(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}let E=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},S=/^\d+$/,C=/^-?\d+(?:\.\d+)?/i,O=/^[^A-Z]*$/,A=/^[^a-z]*$/;function N(e,t){return"bigint"==typeof t?t.toString():t}function $(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function R(e){let t=+!!e.startsWith("^"),n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function P(e,t,n){Object.defineProperty(e,t,{get(){{let r=n();return e[t]=r,r}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function M(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function U(e){return JSON.stringify(e)}let Z=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function q(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let L=$(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function D(e){if(!1===q(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!1!==q(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}let B=new Set(["string","number","symbol"]);function F(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function H(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}let G={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function W(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function K(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function J(e){return"string"==typeof e?e:e?.message}function Q(e,t,n){let r={...e,path:e.path??[]};return e.message||(r.message=J(e.inst?._zod.def?.error?.(e))??J(t?.error?.(e))??J(n.customError?.(e))??J(n.localeError?.(e))??"Invalid input"),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Y(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function X(...e){let[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}let ee=r("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),et={number:"number",bigint:"bigint",object:"date"},en=r("$ZodCheckLessThan",(e,t)=>{ee.init(e,t);let n=et[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),er=r("$ZodCheckGreaterThan",(e,t)=>{ee.init(e,t);let n=et[typeof t.value];e._zod.onattach.push(e=>{let n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ei=r("$ZodCheckMultipleOf",(e,t)=>{ee.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),eo=r("$ZodCheckNumberFormat",(e,t)=>{ee.init(e,t),t.format=t.format||"float64";let n=t.format?.includes("int"),r=n?"int":"number",[i,o]=G[t.format];e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=o,n&&(r.pattern=S)}),e._zod.check=a=>{let s=a.value;if(n){if(!Number.isInteger(s))return void a.issues.push({expected:r,format:t.format,code:"invalid_type",input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}s<i&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inst:e})}}),ea=r("$ZodCheckMaxLength",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let r=n.value;if(r.length<=t.maximum)return;let i=Y(r);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),es=r("$ZodCheckMinLength",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let r=n.value;if(r.length>=t.minimum)return;let i=Y(r);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),el=r("$ZodCheckLengthEquals",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{let r=n.value,i=r.length;if(i===t.length)return;let o=Y(r),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),eu=r("$ZodCheckStringFormat",(e,t)=>{var n,r;ee.init(e,t),e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),ec=r("$ZodCheckRegex",(e,t)=>{eu.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ed=r("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=O),eu.init(e,t)}),ep=r("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=A),eu.init(e,t)}),eh=r("$ZodCheckIncludes",(e,t)=>{ee.init(e,t);let n=F(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),ef=r("$ZodCheckStartsWith",(e,t)=>{ee.init(e,t);let n=RegExp(`^${F(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),em=r("$ZodCheckEndsWith",(e,t)=>{ee.init(e,t);let n=RegExp(`.*${F(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),eg=r("$ZodCheckOverwrite",(e,t)=>{ee.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class ey{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let e_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,N,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ev=r("$ZodError",e_),eb=r("$ZodError",e_,{Parent:Error}),ez=e=>(t,n,r)=>{let o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new i;return s.issues.length?{success:!1,error:new(e??ev)(s.issues.map(e=>Q(e,o,a())))}:{success:!0,data:s.value}},ew=ez(eb),ek=e=>async(t,n,r)=>{let i=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>Q(e,i,a())))}:{success:!0,data:o.value}},ex=ek(eb),eI={major:4,minor:0,patch:5},eT=r("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=eI;let r=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&r.unshift(e),r))for(let n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,n)=>{let r,o=W(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(o)continue;let t=e.issues.length,s=a._zod.check(e);if(s instanceof Promise&&n?.async===!1)throw new i;if(r||s instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(o||(o=W(e,t)))});else{if(e.issues.length===t)continue;o||(o=W(e,t))}}return r?r.then(()=>e):e};e._zod.run=(n,o)=>{let a=e._zod.parse(n,o);if(a instanceof Promise){if(!1===o.async)throw new i;return a.then(e=>t(e,r,o))}return t(a,r,o)}}e["~standard"]={validate:t=>{try{let n=ew(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return ex(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),ej=r("$ZodString",(e,t)=>{eT.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??E(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(e){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),eE=r("$ZodStringFormat",(e,t)=>{eu.init(e,t),ej.init(e,t)}),eS=r("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=f),eE.init(e,t)}),eC=r("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=m(e))}else t.pattern??(t.pattern=m());eE.init(e,t)}),eO=r("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=g),eE.init(e,t)}),eA=r("$ZodURL",(e,t)=>{eE.init(e,t),e._zod.check=n=>{try{let r=n.value,i=new URL(r),o=i.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:k.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o;return}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),eN=r("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eE.init(e,t)}),e$=r("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=p),eE.init(e,t)}),eR=r("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=s),eE.init(e,t)}),eP=r("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=l),eE.init(e,t)}),eM=r("$ZodULID",(e,t)=>{t.pattern??(t.pattern=u),eE.init(e,t)}),eU=r("$ZodXID",(e,t)=>{t.pattern??(t.pattern=c),eE.init(e,t)}),eZ=r("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=d),eE.init(e,t)}),eq=r("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){let t=j({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");let r=`${t}(?:${n.join("|")})`;return RegExp(`^${I}T(?:${r})$`)}(t)),eE.init(e,t)}),eL=r("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=T),eE.init(e,t)}),eD=r("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=RegExp(`^${j(t)}$`)),eE.init(e,t)}),eB=r("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=h),eE.init(e,t)}),eF=r("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=y),eE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),eV=r("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=_),eE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),eH=r("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=v),eE.init(e,t)}),eG=r("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=b),eE.init(e,t),e._zod.check=n=>{let[r,i]=n.value.split("/");try{if(!i)throw Error();let e=Number(i);if(`${e}`!==i||e<0||e>128)throw Error();new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function eW(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let eK=r("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=z),eE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{eW(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),eJ=r("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=w),eE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{!function(e){if(!w.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return eW(t.padEnd(4*Math.ceil(t.length/4),"="))}(n.value)&&n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),eQ=r("$ZodE164",(e,t)=>{t.pattern??(t.pattern=x),eE.init(e,t)}),eY=r("$ZodJWT",(e,t)=>{eE.init(e,t),e._zod.check=n=>{!function(e,t=null){try{let n=e.split(".");if(3!==n.length)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}(n.value,t.alg)&&n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),eX=r("$ZodNumber",(e,t)=>{eT.init(e,t),e._zod.pattern=e._zod.bag.pattern??C,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}let i=n.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;let o="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),n}}),e0=r("$ZodNumber",(e,t)=>{eo.init(e,t),eX.init(e,t)}),e1=r("$ZodAny",(e,t)=>{eT.init(e,t),e._zod.parse=e=>e}),e2=r("$ZodUnknown",(e,t)=>{eT.init(e,t),e._zod.parse=e=>e}),e4=r("$ZodNever",(e,t)=>{eT.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function e5(e,t,n){e.issues.length&&t.issues.push(...K(n,e.issues)),t.value[n]=e.value}let e9=r("$ZodArray",(e,t)=>{eT.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);let o=[];for(let e=0;e<i.length;e++){let a=i[e],s=t.element._zod.run({value:a,issues:[]},r);s instanceof Promise?o.push(s.then(t=>e5(t,n,e))):e5(s,n,e)}return o.length?Promise.all(o).then(()=>n):n}});function e6(e,t,n){e.issues.length&&t.issues.push(...K(n,e.issues)),t.value[n]=e.value}function e8(e,t,n,r){e.issues.length?void 0===r[n]?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...K(n,e.issues)):void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}let e3=r("$ZodObject",(e,t)=>{let n,r;eT.init(e,t);let i=$(()=>{let e=Object.keys(t.shape);for(let n of e)if(!(t.shape[n]instanceof eT))throw Error(`Invalid element at key "${n}": expected a Zod schema`);let n=function(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});P(e._zod,"propValues",()=>{let e=t.shape,n={};for(let t in e){let r=e[t]._zod;if(r.values)for(let e of(n[t]??(n[t]=new Set),r.values))n[t].add(e)}return n});let a=e=>{let t=new ey(["shape","payload","ctx"]),n=i.value,r=e=>{let t=U(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let o=Object.create(null),a=0;for(let e of n.keys)o[e]=`key_${a++}`;for(let e of(t.write("const newResult = {}"),n.keys))if(n.optionalKeys.has(e)){let n=o[e];t.write(`const ${n} = ${r(e)};`);let i=U(e);t.write(`
        if (${n}.issues.length) {
          if (input[${i}] === undefined) {
            if (${i} in input) {
              newResult[${i}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${n}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${i}, ...iss.path] : [${i}],
              }))
            );
          }
        } else if (${n}.value === undefined) {
          if (${i} in input) newResult[${i}] = undefined;
        } else {
          newResult[${i}] = ${n}.value;
        }
        `)}else{let n=o[e];t.write(`const ${n} = ${r(e)};`),t.write(`
          if (${n}.issues.length) payload.issues = payload.issues.concat(${n}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${U(e)}, ...iss.path] : [${U(e)}]
          })));`),t.write(`newResult[${U(e)}] = ${n}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,n)=>s(e,t,n)},s=!o.jitless,l=s&&L.value,u=t.catchall;e._zod.parse=(o,c)=>{r??(r=i.value);let d=o.value;if(!q(d))return o.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),o;let p=[];if(s&&l&&c?.async===!1&&!0!==c.jitless)n||(n=a(t.shape)),o=n(o,c);else{o.value={};let e=r.shape;for(let t of r.keys){let n=e[t],r=n._zod.run({value:d[t],issues:[]},c),i="optional"===n._zod.optin&&"optional"===n._zod.optout;r instanceof Promise?p.push(r.then(e=>i?e8(e,o,t,d):e6(e,o,t))):i?e8(r,o,t,d):e6(r,o,t)}}if(!u)return p.length?Promise.all(p).then(()=>o):o;let h=[],f=r.keySet,m=u._zod,g=m.def.type;for(let e of Object.keys(d)){if(f.has(e))continue;if("never"===g){h.push(e);continue}let t=m.run({value:d[e],issues:[]},c);t instanceof Promise?p.push(t.then(t=>e6(t,o,e))):e6(t,o,e)}return(h.length&&o.issues.push({code:"unrecognized_keys",keys:h,input:d,inst:e}),p.length)?Promise.all(p).then(()=>o):o}});function e7(e,t,n,r){for(let n of e)if(0===n.issues.length)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>Q(e,r,a())))}),t}let te=r("$ZodUnion",(e,t)=>{eT.init(e,t),P(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),P(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),P(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),P(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>R(e.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let i=!1,o=[];for(let e of t.options){let t=e._zod.run({value:n.value,issues:[]},r);if(t instanceof Promise)o.push(t),i=!0;else{if(0===t.issues.length)return t;o.push(t)}}return i?Promise.all(o).then(t=>e7(t,n,e,r)):e7(o,n,e,r)}}),tt=r("$ZodIntersection",(e,t)=>{eT.init(e,t),e._zod.parse=(e,n)=>{let r=e.value,i=t.left._zod.run({value:r,issues:[]},n),o=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([t,n])=>tn(e,t,n)):tn(e,i,o)}});function tn(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),W(e))return e;let r=function e(t,n){if(t===n||t instanceof Date&&n instanceof Date&&+t==+n)return{valid:!0,data:t};if(D(t)&&D(n)){let r=Object.keys(n),i=Object.keys(t).filter(e=>-1!==r.indexOf(e)),o={...t,...n};for(let r of i){let i=e(t[r],n[r]);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};o[r]=i.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let i=0;i<t.length;i++){let o=e(t[i],n[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}(t.value,n.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}let tr=r("$ZodRecord",(e,t)=>{eT.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!D(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;let o=[];if(t.keyType._zod.values){let a,s=t.keyType._zod.values;for(let e of(n.value={},s))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let a=t.valueType._zod.run({value:i[e],issues:[]},r);a instanceof Promise?o.push(a.then(t=>{t.issues.length&&n.issues.push(...K(e,t.issues)),n.value[e]=t.value})):(a.issues.length&&n.issues.push(...K(e,a.issues)),n.value[e]=a.value)}for(let e in i)s.has(e)||(a=a??[]).push(e);a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:a})}else for(let s of(n.value={},Reflect.ownKeys(i))){if("__proto__"===s)continue;let l=t.keyType._zod.run({value:s,issues:[]},r);if(l instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(l.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:l.issues.map(e=>Q(e,r,a())),input:s,path:[s],inst:e}),n.value[l.value]=l.value;continue}let u=t.valueType._zod.run({value:i[s],issues:[]},r);u instanceof Promise?o.push(u.then(e=>{e.issues.length&&n.issues.push(...K(s,e.issues)),n.value[l.value]=e.value})):(u.issues.length&&n.issues.push(...K(s,u.issues)),n.value[l.value]=u.value)}return o.length?Promise.all(o).then(()=>n):n}}),ti=r("$ZodEnum",(e,t)=>{eT.init(e,t);let n=function(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(n),e._zod.pattern=RegExp(`^(${n.filter(e=>B.has(typeof e)).map(e=>"string"==typeof e?F(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{let i=t.value;return e._zod.values.has(i)||t.issues.push({code:"invalid_value",values:n,input:i,inst:e}),t}}),to=r("$ZodLiteral",(e,t)=>{eT.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?F(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(n,r)=>{let i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),n}}),ta=r("$ZodTransform",(e,t)=>{eT.init(e,t),e._zod.parse=(e,n)=>{let r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new i;return e.value=r,e}}),ts=r("$ZodOptional",(e,t)=>{eT.init(e,t),e._zod.optin="optional",e._zod.optout="optional",P(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),P(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${R(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)}),tl=r("$ZodNullable",(e,t)=>{eT.init(e,t),P(e._zod,"optin",()=>t.innerType._zod.optin),P(e._zod,"optout",()=>t.innerType._zod.optout),P(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${R(e.source)}|null)$`):void 0}),P(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),tu=r("$ZodDefault",(e,t)=>{eT.init(e,t),e._zod.optin="optional",P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>tc(e,t)):tc(r,t)}});function tc(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let td=r("$ZodPrefault",(e,t)=>{eT.init(e,t),e._zod.optin="optional",P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),tp=r("$ZodNonOptional",(e,t)=>{eT.init(e,t),P(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>th(t,e)):th(i,e)}});function th(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let tf=r("$ZodCatch",(e,t)=>{eT.init(e,t),e._zod.optin="optional",P(e._zod,"optout",()=>t.innerType._zod.optout),P(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Q(e,n,a()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Q(e,n,a()))},input:e.value}),e.issues=[]),e)}}),tm=r("$ZodPipe",(e,t)=>{eT.init(e,t),P(e._zod,"values",()=>t.in._zod.values),P(e._zod,"optin",()=>t.in._zod.optin),P(e._zod,"optout",()=>t.out._zod.optout),P(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{let r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>tg(e,t,n)):tg(r,t,n)}});function tg(e,t,n){return W(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}let ty=r("$ZodReadonly",(e,t)=>{eT.init(e,t),P(e._zod,"propValues",()=>t.innerType._zod.propValues),P(e._zod,"values",()=>t.innerType._zod.values),P(e._zod,"optin",()=>t.innerType._zod.optin),P(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{let r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t_):t_(r)}});function t_(e){return e.value=Object.freeze(e.value),e}let tv=r("$ZodCustom",(e,t)=>{ee.init(e,t),eT.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{let r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>tb(t,n,r,e));tb(i,n,r,e)}});function tb(e,t,n,r){if(!e){let e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(X(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class tz{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}let tw=new tz;function tk(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...H(t)})}function tx(e,t){return new en({check:"less_than",...H(t),value:e,inclusive:!1})}function tI(e,t){return new en({check:"less_than",...H(t),value:e,inclusive:!0})}function tT(e,t){return new er({check:"greater_than",...H(t),value:e,inclusive:!1})}function tj(e,t){return new er({check:"greater_than",...H(t),value:e,inclusive:!0})}function tE(e,t){return new ei({check:"multiple_of",...H(t),value:e})}function tS(e,t){return new ea({check:"max_length",...H(t),maximum:e})}function tC(e,t){return new es({check:"min_length",...H(t),minimum:e})}function tO(e,t){return new el({check:"length_equals",...H(t),length:e})}function tA(e){return new eg({check:"overwrite",tx:e})}let tN=r("ZodISODateTime",(e,t)=>{eq.init(e,t),tG.init(e,t)}),t$=r("ZodISODate",(e,t)=>{eL.init(e,t),tG.init(e,t)}),tR=r("ZodISOTime",(e,t)=>{eD.init(e,t),tG.init(e,t)}),tP=r("ZodISODuration",(e,t)=>{eB.init(e,t),tG.init(e,t)}),tM=(e,t)=>{ev.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let n=t||function(e){return e.message},r={_errors:[]},i=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,i=0;for(;i<t.path.length;){let r=t.path[i];i===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(e),r})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let n={},r=[];for(let i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}})(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};r("ZodError",tM);let tU=r("ZodError",tM,{Parent:Error}),tZ=(e,t,n,r)=>{let o=n?Object.assign(n,{async:!1}):{async:!1},s=e._zod.run({value:t,issues:[]},o);if(s instanceof Promise)throw new i;if(s.issues.length){let e=new(r?.Err??tU)(s.issues.map(e=>Q(e,o,a())));throw Z(e,r?.callee),e}return s.value},tq=async(e,t,n,r)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=e._zod.run({value:t,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){let e=new(r?.Err??tU)(o.issues.map(e=>Q(e,i,a())));throw Z(e,r?.callee),e}return o.value},tL=ez(tU),tD=ek(tU),tB=r("ZodType",(e,t)=>(eT.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>V(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>tZ(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>tL(e,t,n),e.parseAsync=async(t,n)=>tq(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>tD(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(function(e,t={}){return new nR({type:"custom",check:"custom",fn:e,...H(t)})}(t,n)),e.superRefine=t=>e.check(function(e){let t=function(e){let t=new ee({check:"custom"});return t._zod.check=e,t}(n=>(n.addIssue=e=>{"string"==typeof e?n.issues.push(X(e,n.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=n.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),n.issues.push(X(e)))},e(n.value,n)));return t}(t)),e.overwrite=t=>e.check(tA(t)),e.optional=()=>nI(e),e.nullable=()=>nj(e),e.nullish=()=>nI(nj(e)),e.nonoptional=t=>new nC({type:"nonoptional",innerType:e,...H(t)}),e.array=()=>np(e),e.or=t=>ng([e,t]),e.and=t=>new ny({type:"intersection",left:e,right:t}),e.transform=t=>nN(e,function(e){return new nk({type:"transform",transform:e})}(t)),e.default=t=>(function(e,t){return new nE({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.prefault=t=>(function(e,t){return new nS({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.catch=t=>(function(e,t){return new nO({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})})(e,t),e.pipe=t=>nN(e,t),e.readonly=()=>new n$({type:"readonly",innerType:e}),e.describe=t=>{let n=e.clone();return tw.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>tw.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tw.get(e);let n=e.clone();return tw.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tF=r("_ZodString",(e,t)=>{ej.init(e,t),tB.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new ec({check:"string_format",format:"regex",...H(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new eh({check:"string_format",format:"includes",...H(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new ef({check:"string_format",format:"starts_with",...H(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new em({check:"string_format",format:"ends_with",...H(t),suffix:e})}(...t)),e.min=(...t)=>e.check(tC(...t)),e.max=(...t)=>e.check(tS(...t)),e.length=(...t)=>e.check(tO(...t)),e.nonempty=(...t)=>e.check(tC(1,...t)),e.lowercase=t=>e.check(new ed({check:"string_format",format:"lowercase",...H(t)})),e.uppercase=t=>e.check(new ep({check:"string_format",format:"uppercase",...H(t)})),e.trim=()=>e.check(tA(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return tA(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(tA(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(tA(e=>e.toUpperCase()))}),tV=r("ZodString",(e,t)=>{ej.init(e,t),tF.init(e,t),e.email=t=>e.check(new tW({type:"string",format:"email",check:"string_format",abort:!1,...H(t)})),e.url=t=>e.check(new tQ({type:"string",format:"url",check:"string_format",abort:!1,...H(t)})),e.jwt=t=>e.check(new nn({type:"string",format:"jwt",check:"string_format",abort:!1,...H(t)})),e.emoji=t=>e.check(new tY({type:"string",format:"emoji",check:"string_format",abort:!1,...H(t)})),e.guid=t=>e.check(tk(tK,t)),e.uuid=t=>e.check(new tJ({type:"string",format:"uuid",check:"string_format",abort:!1,...H(t)})),e.uuidv4=t=>e.check(new tJ({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...H(t)})),e.uuidv6=t=>e.check(new tJ({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...H(t)})),e.uuidv7=t=>e.check(new tJ({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...H(t)})),e.nanoid=t=>e.check(new tX({type:"string",format:"nanoid",check:"string_format",abort:!1,...H(t)})),e.guid=t=>e.check(tk(tK,t)),e.cuid=t=>e.check(new t0({type:"string",format:"cuid",check:"string_format",abort:!1,...H(t)})),e.cuid2=t=>e.check(new t1({type:"string",format:"cuid2",check:"string_format",abort:!1,...H(t)})),e.ulid=t=>e.check(new t2({type:"string",format:"ulid",check:"string_format",abort:!1,...H(t)})),e.base64=t=>e.check(new t7({type:"string",format:"base64",check:"string_format",abort:!1,...H(t)})),e.base64url=t=>e.check(new ne({type:"string",format:"base64url",check:"string_format",abort:!1,...H(t)})),e.xid=t=>e.check(new t4({type:"string",format:"xid",check:"string_format",abort:!1,...H(t)})),e.ksuid=t=>e.check(new t5({type:"string",format:"ksuid",check:"string_format",abort:!1,...H(t)})),e.ipv4=t=>e.check(new t9({type:"string",format:"ipv4",check:"string_format",abort:!1,...H(t)})),e.ipv6=t=>e.check(new t6({type:"string",format:"ipv6",check:"string_format",abort:!1,...H(t)})),e.cidrv4=t=>e.check(new t8({type:"string",format:"cidrv4",check:"string_format",abort:!1,...H(t)})),e.cidrv6=t=>e.check(new t3({type:"string",format:"cidrv6",check:"string_format",abort:!1,...H(t)})),e.e164=t=>e.check(new nt({type:"string",format:"e164",check:"string_format",abort:!1,...H(t)})),e.datetime=t=>e.check(new tN({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...H(t)})),e.date=t=>e.check(new t$({type:"string",format:"date",check:"string_format",...H(t)})),e.time=t=>e.check(new tR({type:"string",format:"time",check:"string_format",precision:null,...H(t)})),e.duration=t=>e.check(new tP({type:"string",format:"duration",check:"string_format",...H(t)}))});function tH(e){return new tV({type:"string",...H(e)})}let tG=r("ZodStringFormat",(e,t)=>{eE.init(e,t),tF.init(e,t)}),tW=r("ZodEmail",(e,t)=>{eO.init(e,t),tG.init(e,t)}),tK=r("ZodGUID",(e,t)=>{eS.init(e,t),tG.init(e,t)}),tJ=r("ZodUUID",(e,t)=>{eC.init(e,t),tG.init(e,t)}),tQ=r("ZodURL",(e,t)=>{eA.init(e,t),tG.init(e,t)}),tY=r("ZodEmoji",(e,t)=>{eN.init(e,t),tG.init(e,t)}),tX=r("ZodNanoID",(e,t)=>{e$.init(e,t),tG.init(e,t)}),t0=r("ZodCUID",(e,t)=>{eR.init(e,t),tG.init(e,t)}),t1=r("ZodCUID2",(e,t)=>{eP.init(e,t),tG.init(e,t)}),t2=r("ZodULID",(e,t)=>{eM.init(e,t),tG.init(e,t)}),t4=r("ZodXID",(e,t)=>{eU.init(e,t),tG.init(e,t)}),t5=r("ZodKSUID",(e,t)=>{eZ.init(e,t),tG.init(e,t)}),t9=r("ZodIPv4",(e,t)=>{eF.init(e,t),tG.init(e,t)}),t6=r("ZodIPv6",(e,t)=>{eV.init(e,t),tG.init(e,t)}),t8=r("ZodCIDRv4",(e,t)=>{eH.init(e,t),tG.init(e,t)}),t3=r("ZodCIDRv6",(e,t)=>{eG.init(e,t),tG.init(e,t)}),t7=r("ZodBase64",(e,t)=>{eK.init(e,t),tG.init(e,t)}),ne=r("ZodBase64URL",(e,t)=>{eJ.init(e,t),tG.init(e,t)}),nt=r("ZodE164",(e,t)=>{eQ.init(e,t),tG.init(e,t)}),nn=r("ZodJWT",(e,t)=>{eY.init(e,t),tG.init(e,t)}),nr=r("ZodNumber",(e,t)=>{eX.init(e,t),tB.init(e,t),e.gt=(t,n)=>e.check(tT(t,n)),e.gte=(t,n)=>e.check(tj(t,n)),e.min=(t,n)=>e.check(tj(t,n)),e.lt=(t,n)=>e.check(tx(t,n)),e.lte=(t,n)=>e.check(tI(t,n)),e.max=(t,n)=>e.check(tI(t,n)),e.int=t=>e.check(na(t)),e.safe=t=>e.check(na(t)),e.positive=t=>e.check(tT(0,t)),e.nonnegative=t=>e.check(tj(0,t)),e.negative=t=>e.check(tx(0,t)),e.nonpositive=t=>e.check(tI(0,t)),e.multipleOf=(t,n)=>e.check(tE(t,n)),e.step=(t,n)=>e.check(tE(t,n)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function ni(e){return new nr({type:"number",checks:[],...H(e)})}let no=r("ZodNumberFormat",(e,t)=>{e0.init(e,t),nr.init(e,t)});function na(e){return new no({type:"number",check:"number_format",abort:!1,format:"safeint",...H(e)})}let ns=r("ZodAny",(e,t)=>{e1.init(e,t),tB.init(e,t)}),nl=r("ZodUnknown",(e,t)=>{e2.init(e,t),tB.init(e,t)});function nu(){return new nl({type:"unknown"})}let nc=r("ZodNever",(e,t)=>{e4.init(e,t),tB.init(e,t)}),nd=r("ZodArray",(e,t)=>{e9.init(e,t),tB.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(tC(t,n)),e.nonempty=t=>e.check(tC(1,t)),e.max=(t,n)=>e.check(tS(t,n)),e.length=(t,n)=>e.check(tO(t,n)),e.unwrap=()=>e.element});function np(e,t){return new nd({type:"array",element:e,...H(t)})}let nh=r("ZodObject",(e,t)=>{e3.init(e,t),tB.init(e,t),P(e,"shape",()=>t.shape),e.keyof=()=>nb(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:nu()}),e.loose=()=>e.clone({...e._zod.def,catchall:nu()}),e.strict=()=>{var t;return e.clone({...e._zod.def,catchall:new nc({type:"never",...H(void 0)})})},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!D(t))throw Error("Invalid input to extend: expected a plain object");let n={...e._zod.def,get shape(){let n={...e._zod.def.shape,...t};return M(this,"shape",n),n},checks:[]};return V(e,n)})(e,t),e.merge=t=>(function(e,t){return V(e,{...e._zod.def,get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return M(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})})(e,t),e.pick=t=>(function(e,t){let n={},r=e._zod.def;for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(n[e]=r.shape[e])}return V(e,{...e._zod.def,shape:n,checks:[]})})(e,t),e.omit=t=>(function(e,t){let n={...e._zod.def.shape},r=e._zod.def;for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return V(e,{...e._zod.def,shape:n,checks:[]})})(e,t),e.partial=(...t)=>(function(e,t,n){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(let t in r)i[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return V(t,{...t._zod.def,shape:i,checks:[]})})(nx,e,t[0]),e.required=(...t)=>(function(e,t,n){let r=t._zod.def.shape,i={...r};if(n)for(let t in n){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);n[t]&&(i[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(let t in r)i[t]=new e({type:"nonoptional",innerType:r[t]});return V(t,{...t._zod.def,shape:i,checks:[]})})(nC,e,t[0])});function nf(e,t){return new nh({type:"object",get shape(){return M(this,"shape",{...e}),this.shape},...H(t)})}let nm=r("ZodUnion",(e,t)=>{te.init(e,t),tB.init(e,t),e.options=t.options});function ng(e,t){return new nm({type:"union",options:e,...H(t)})}let ny=r("ZodIntersection",(e,t)=>{tt.init(e,t),tB.init(e,t)}),n_=r("ZodRecord",(e,t)=>{tr.init(e,t),tB.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType}),nv=r("ZodEnum",(e,t)=>{ti.init(e,t),tB.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let i={};for(let r of e)if(n.has(r))i[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new nv({...t,checks:[],...H(r),entries:i})},e.exclude=(e,r)=>{let i={...t.entries};for(let t of e)if(n.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new nv({...t,checks:[],...H(r),entries:i})}});function nb(e,t){return new nv({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...H(t)})}let nz=r("ZodLiteral",(e,t)=>{to.init(e,t),tB.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function nw(e,t){return new nz({type:"literal",values:Array.isArray(e)?e:[e],...H(t)})}let nk=r("ZodTransform",(e,t)=>{ta.init(e,t),tB.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=r=>{"string"==typeof r?n.issues.push(X(r,n.value,t)):(r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!0),n.issues.push(X(r)))};let i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}}),nx=r("ZodOptional",(e,t)=>{ts.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nI(e){return new nx({type:"optional",innerType:e})}let nT=r("ZodNullable",(e,t)=>{tl.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nj(e){return new nT({type:"nullable",innerType:e})}let nE=r("ZodDefault",(e,t)=>{tu.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),nS=r("ZodPrefault",(e,t)=>{td.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType}),nC=r("ZodNonOptional",(e,t)=>{tp.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType}),nO=r("ZodCatch",(e,t)=>{tf.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),nA=r("ZodPipe",(e,t)=>{tm.init(e,t),tB.init(e,t),e.in=t.in,e.out=t.out});function nN(e,t){return new nA({type:"pipe",in:e,out:t})}let n$=r("ZodReadonly",(e,t)=>{ty.init(e,t),tB.init(e,t)}),nR=r("ZodCustom",(e,t)=>{tv.init(e,t),tB.init(e,t)});var nP,nM,nU,nZ,nq,nL,nD,nB,nF,nV,nH,nG,nW=n(24338),nK=Object.defineProperty,nJ=Object.defineProperties,nQ=Object.getOwnPropertyDescriptors,nY=Object.getOwnPropertySymbols,nX=Object.prototype.hasOwnProperty,n0=Object.prototype.propertyIsEnumerable,n1=(e,t,n)=>t in e?nK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n2=(e,t)=>{for(var n in t||(t={}))nX.call(t,n)&&n1(e,n,t[n]);if(nY)for(var n of nY(t))n0.call(t,n)&&n1(e,n,t[n]);return e},n4=(e,t)=>nJ(e,nQ(t)),n5="vercel.ai.error",n9=Symbol.for(n5),n6=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[nU]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,n5)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};nU=n9;var n8=n6,n3="AI_APICallError",n7=`vercel.ai.error.${n3}`,re=Symbol.for(n7),rt=class extends n8{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:o,cause:a,isRetryable:s=null!=r&&(408===r||409===r||429===r||r>=500),data:l}){super({name:n3,message:e,cause:a}),this[nZ]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=o,this.isRetryable=s,this.data=l}static isInstance(e){return n8.hasMarker(e,n7)}};nZ=re;var rn="AI_EmptyResponseBodyError",rr=`vercel.ai.error.${rn}`,ri=Symbol.for(rr),ro=class extends n8{constructor({message:e="Empty response body"}={}){super({name:rn,message:e}),this[nq]=!0}static isInstance(e){return n8.hasMarker(e,rr)}};function ra(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}nq=ri;var rs="AI_InvalidArgumentError",rl=`vercel.ai.error.${rs}`,ru=Symbol.for(rl),rc=class extends n8{constructor({message:e,cause:t,argument:n}){super({name:rs,message:e,cause:t}),this[nL]=!0,this.argument=n}static isInstance(e){return n8.hasMarker(e,rl)}};nL=ru;var rd="AI_InvalidPromptError",rp=`vercel.ai.error.${rd}`,rh=Symbol.for(rp),rf=class extends n8{constructor({prompt:e,message:t,cause:n}){super({name:rd,message:`Invalid prompt: ${t}`,cause:n}),this[nD]=!0,this.prompt=e}static isInstance(e){return n8.hasMarker(e,rp)}};nD=rh;var rm="AI_InvalidResponseDataError",rg=`vercel.ai.error.${rm}`,ry=Symbol.for(rg),r_=class extends n8{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:rm,message:t}),this[nB]=!0,this.data=e}static isInstance(e){return n8.hasMarker(e,rg)}};nB=ry;var rv="AI_JSONParseError",rb=`vercel.ai.error.${rv}`,rz=Symbol.for(rb),rw=class extends n8{constructor({text:e,cause:t}){super({name:rv,message:`JSON parsing failed: Text: ${e}.
Error message: ${ra(t)}`,cause:t}),this[nF]=!0,this.text=e}static isInstance(e){return n8.hasMarker(e,rb)}};nF=rz;var rk="AI_LoadAPIKeyError",rx=`vercel.ai.error.${rk}`,rI=Symbol.for(rx),rT=class extends n8{constructor({message:e}){super({name:rk,message:e}),this[nV]=!0}static isInstance(e){return n8.hasMarker(e,rx)}};nV=rI,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var rj="AI_TypeValidationError",rE=`vercel.ai.error.${rj}`,rS=Symbol.for(rE),rC=class e extends n8{constructor({value:e,cause:t}){super({name:rj,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${ra(t)}`,cause:t}),this[nH]=!0,this.value=e}static isInstance(e){return n8.hasMarker(e,rE)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};nH=rS;var rO="AI_UnsupportedFunctionalityError",rA=`vercel.ai.error.${rO}`,rN=Symbol.for(rA),r$=class extends n8{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:rO,message:t}),this[nG]=!0,this.functionality=e}static isInstance(e){return n8.hasMarker(e,rA)}};nG=rN;var rR=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function rP(e){}var rM=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(i){r=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=rP,onError:n=rP,onRetry:r=rP,onComment:i}=e,o="",a=!0,s,l="",u="";function c(e){if(""===e)return void(l.length>0&&t({id:s,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",u="");if(e.startsWith(":")){i&&i(e.slice(e.startsWith(": ")?2:1));return}let n=e.indexOf(":");if(-1!==n){let t=e.slice(0,n),r=" "===e[n+1]?2:1;d(t,e.slice(n+r),e);return}d(e,"",e)}function d(e,t,i){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":s=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new rR(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:i}));break;default:n(new rR(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:i}))}}return{feed:function(e){let t=a?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){let t=[],n="",r=0;for(;r<e.length;){let i=e.indexOf("\r",r),o=e.indexOf(`
`,r),a=-1;if(-1!==i&&-1!==o?a=Math.min(i,o):-1!==i?a=i:-1!==o&&(a=o),-1===a){n=e.slice(r);break}{let n=e.slice(r,a);t.push(n),"\r"===e[(r=a+1)-1]&&e[r]===`
`&&r++}}return[t,n]}(`${o}${t}`);for(let e of n)c(e);o=r,a=!1},reset:function(e={}){o&&e.consume&&c(o),a=!0,s=void 0,l="",u="",o=""}}}({onEvent:e=>{i.enqueue(e)},onError(t){"terminate"===e?i.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}};function rU(...e){return e.reduce((e,t)=>n2(n2({},e),null!=t?t:{}),{})}function rZ(e){return Object.fromEntries([...e.headers])}Symbol("Let zodToJsonSchema decide on which parser to use");var rq=(({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{let i=()=>{let e=n.length,r=Array(t);for(let i=0;i<t;i++)r[i]=n[Math.random()*e|0];return r.join("")};if(null==e)return i;if(n.includes(r))throw new rc({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${i()}`})();function rL(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var rD=["fetch failed","failed to fetch"],rB=/"__proto__"\s*:/,rF=/"constructor"\s*:/;function rV(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===rB.test(e)&&!1===rF.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let n of(t=[],e)){if(Object.prototype.hasOwnProperty.call(n,"__proto__")||Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in n){let r=n[e];r&&"object"==typeof r&&t.push(r)}}}return e}(t)}finally{Error.stackTraceLimit=t}}var rH=Symbol.for("vercel.ai.validator");async function rG({value:e,schema:t}){let n=await rW({value:e,schema:t});if(!n.success)throw rC.wrap({value:e,cause:n.error});return n.value}async function rW({value:e,schema:t}){var n;let r="object"==typeof t&&null!==t&&rH in t&&!0===t[rH]&&"validate"in t?t:(n=t,{[rH]:!0,validate:async e=>{let t=await n["~standard"].validate(e);return null==t.issues?{success:!0,value:t.value}:{success:!1,error:new rC({value:e,cause:t.issues})}}});try{if(null==r.validate)return{success:!0,value:e,rawValue:e};let t=await r.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:rC.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:rC.wrap({value:e,cause:t}),rawValue:e}}}async function rK({text:e,schema:t}){try{let n=rV(e);if(null==t)return n;return rG({value:n,schema:t})}catch(t){if(rw.isInstance(t)||rC.isInstance(t))throw t;throw new rw({text:e,cause:t})}}async function rJ({text:e,schema:t}){try{let n=rV(e);if(null==t)return{success:!0,value:n,rawValue:n};return await rW({value:n,schema:t})}catch(t){return{success:!1,error:rw.isInstance(t)?t:new rw({text:e,cause:t}),rawValue:void 0}}}function rQ(e){try{return rV(e),!0}catch(e){return!1}}var rY=()=>globalThis.fetch,rX=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>r0({url:e,headers:n2({"Content-Type":"application/json"},t),body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),r0=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:o,fetch:a=rY()})=>{try{let s=await a(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:n.content,signal:o}),l=rZ(s);if(!s.ok){let t;try{t=await i({response:s,url:e,requestBodyValues:n.values})}catch(t){if(rL(t)||rt.isInstance(t))throw t;throw new rt({message:"Failed to process error response",cause:t,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw t.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(t){if(t instanceof Error&&(rL(t)||rt.isInstance(t)))throw t;throw new rt({message:"Failed to process successful response",cause:t,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(t){throw function({error:e,url:t,requestBodyValues:n}){if(rL(e))return e;if(e instanceof TypeError&&rD.includes(e.message.toLowerCase())){let r=e.cause;if(null!=r)return new rt({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}({error:t,url:e,requestBodyValues:n.values})}},r1=e=>async({response:t})=>{let n=rZ(t);if(null==t.body)throw new ro({});return{responseHeaders:n,value:function({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new rM).pipeThrough(new TransformStream({async transform({data:e},n){"[DONE]"!==e&&n.enqueue(await rJ({text:e,schema:t}))}}))}({stream:t.body,schema:e})}},r2=e=>async({response:t,url:n,requestBodyValues:r})=>{let i=await t.text(),o=await rJ({text:i,schema:e}),a=rZ(t);if(!o.success)throw new rt({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:o.value,rawValue:o.rawValue}};Symbol.for("vercel.ai.schema");var{btoa:r4,atob:r5}=globalThis,r9=ng([nf({type:nw("reasoning.summary"),summary:tH()}),nf({type:nw("reasoning.encrypted"),data:tH()}),nf({type:nw("reasoning.text"),text:tH().nullish(),signature:tH().nullish()})]),r6=np(ng([r9,nu().transform(()=>null)])).transform(e=>e.filter(e=>!!e)),r8=nf({error:nf({code:ng([tH(),ni()]).nullable().optional().default(null),message:tH(),type:tH().nullable().optional().default(null),param:new ns({type:"any"}).nullable().optional().default(null)})}),r3=(({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:o})=>{let a=await r.text(),s=rZ(r);if(""===a.trim())return{responseHeaders:s,value:new rt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})};try{let l=await rK({text:a,schema:e});return{responseHeaders:s,value:new rt({message:t(l),url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,data:l,isRetryable:null==n?void 0:n(r,l)})}}catch(e){return{responseHeaders:s,value:new rt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})}}})({errorSchema:r8,errorToMessage:e=>e.error.message});function r7(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}function ie({url:e,protocols:t}){try{let n=new URL(e);return t.has(n.protocol)}catch(e){return!1}}function it({part:e,defaultMediaType:t}){var n,r;if(e.data instanceof Uint8Array){let r=function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return r4(t)}(e.data);return`data:${null!=(n=e.mediaType)?n:t};base64,${r}`}let i=e.data.toString();return ie({url:i,protocols:new Set(["http:","https:"])})||i.startsWith("data:")?i:`data:${null!=(r=e.mediaType)?r:t};base64,${i}`}function ir(e,t){var n;let r=e.match(/^data:([^;]+)/);return r&&null!=(n=r[1])?n:t}function ii(e){let t=e.match(/^data:[^;]*;base64,(.+)$/);return t?t[1]:e}function io(e){var t,n,r;let i=null==e?void 0:e.anthropic,o=null==e?void 0:e.openrouter;return null!=(r=null!=(n=null!=(t=null==o?void 0:o.cacheControl)?t:null==o?void 0:o.cache_control)?n:null==i?void 0:i.cacheControl)?r:null==i?void 0:i.cache_control}ng([nw("auto"),nw("none"),nw("required"),nf({type:nw("function"),function:nf({name:tH()})})]);var ia=np(ng([nf({type:nw("image_url"),image_url:nf({url:tH()})}),nu().transform(()=>null)])).transform(e=>e.filter(e=>!!e)),is=nf({id:tH().optional(),model:tH().optional(),provider:tH().optional(),usage:nf({prompt_tokens:ni(),prompt_tokens_details:nf({cached_tokens:ni()}).nullish(),completion_tokens:ni(),completion_tokens_details:nf({reasoning_tokens:ni()}).nullish(),total_tokens:ni(),cost:ni().optional(),cost_details:nf({upstream_inference_cost:ni().nullish()}).nullish()}).nullish()}),il=is.extend({choices:np(nf({message:nf({role:nw("assistant"),content:tH().nullable().optional(),reasoning:tH().nullable().optional(),reasoning_details:r6.nullish(),images:ia.nullish(),tool_calls:np(nf({id:tH().optional().nullable(),type:nw("function"),function:nf({name:tH(),arguments:tH()})})).optional(),annotations:np(nf({type:nb(["url_citation"]),url_citation:nf({end_index:ni(),start_index:ni(),title:tH(),url:tH(),content:tH().optional()})})).nullish()}),index:ni().nullish(),logprobs:nf({content:np(nf({token:tH(),logprob:ni(),top_logprobs:np(nf({token:tH(),logprob:ni()}))})).nullable()}).nullable().optional(),finish_reason:tH().optional().nullable()}))}),iu=ng([is.extend({choices:np(nf({delta:nf({role:nb(["assistant"]).optional(),content:tH().nullish(),reasoning:tH().nullish().optional(),reasoning_details:r6.nullish(),images:ia.nullish(),tool_calls:np(nf({index:ni().nullish(),id:tH().nullish(),type:nw("function").optional(),function:nf({name:tH().nullish(),arguments:tH().nullish()})})).nullish(),annotations:np(nf({type:nb(["url_citation"]),url_citation:nf({end_index:ni(),start_index:ni(),title:tH(),url:tH(),content:tH().optional()})})).nullish()}).nullish(),logprobs:nf({content:np(nf({token:tH(),logprob:ni(),top_logprobs:np(nf({token:tH(),logprob:ni()}))})).nullable()}).nullish(),finish_reason:tH().nullable().optional(),index:ni().nullish()}))}),r8]),ic=class{constructor(e,t,n){this.specificationVersion="v2",this.provider="openrouter",this.defaultObjectGenerationMode="tool",this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.modelId=e,this.settings=t,this.config=n}getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,frequencyPenalty:i,presencePenalty:o,seed:a,stopSequences:s,responseFormat:l,topK:u,tools:c,toolChoice:d}){var p;let h=n2(n2({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:t,temperature:n,top_p:r,frequency_penalty:i,presence_penalty:o,seed:a,stop:s,response_format:l,top_k:u,messages:function(e){var t,n,r,i;let o=[];for(let{role:a,content:s,providerOptions:l}of e)switch(a){case"system":o.push({role:"system",content:s,cache_control:io(l)});break;case"user":{if(1===s.length&&(null==(t=s[0])?void 0:t.type)==="text"){let e=null!=(n=io(l))?n:io(s[0].providerOptions),t=e?[{type:"text",text:s[0].text,cache_control:e}]:s[0].text;o.push({role:"user",content:t});break}let e=io(l),r=s.map(t=>{var n,r,i,o,a,s;let l=null!=(n=io(t.providerOptions))?n:e;switch(t.type){case"text":return{type:"text",text:t.text,cache_control:l};case"file":{if(null==(r=t.mediaType)?void 0:r.startsWith("image/"))return{type:"image_url",image_url:{url:it({part:t,defaultMediaType:"image/jpeg"})},cache_control:l};let e=String(null!=(s=null!=(a=null==(o=null==(i=t.providerOptions)?void 0:i.openrouter)?void 0:o.filename)?a:t.filename)?s:""),n=it({part:t,defaultMediaType:"application/pdf"});if(ie({url:n,protocols:new Set(["http:","https:"])}))return{type:"file",file:{filename:e,file_data:n}};return{type:"file",file:{filename:e,file_data:n},cache_control:l}}default:return{type:"text",text:"",cache_control:l}}});o.push({role:"user",content:r});break}case"assistant":{let e="",t="",n=[],r=[];for(let i of s)switch(i.type){case"text":e+=i.text;break;case"tool-call":r.push({id:i.toolCallId,type:"function",function:{name:i.toolName,arguments:JSON.stringify(i.input)}});break;case"reasoning":t+=i.text,n.push({type:"reasoning.text",text:i.text})}o.push({role:"assistant",content:e,tool_calls:r.length>0?r:void 0,reasoning:t||void 0,reasoning_details:n.length>0?n:void 0,cache_control:io(l)});break}case"tool":for(let e of s){let t="text"===(i=e).output.type?i.output.value:JSON.stringify(i.output.value);o.push({role:"tool",tool_call_id:e.toolCallId,content:t,cache_control:null!=(r=io(l))?r:io(e.providerOptions)})}}return o}(e),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning,usage:this.settings.usage,plugins:this.settings.plugins,web_search_options:this.settings.web_search_options,provider:this.settings.provider},this.config.extraBody),this.settings.extraBody);if((null==l?void 0:l.type)==="json"&&null!=l.schema)return n4(n2({},h),{response_format:{type:"json_schema",json_schema:n2({schema:l.schema,strict:!0,name:null!=(p=l.name)?p:"response"},l.description&&{description:l.description})}});if(c&&c.length>0){let e=c.filter(e=>"function"===e.type).map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.inputSchema}}));return n4(n2({},h),{tools:e,tool_choice:d?function(e){switch(e.type){case"auto":case"none":case"required":return e.type;case"tool":return{type:"function",function:{name:e.toolName}};default:throw Error(`Invalid tool choice type: ${e}`)}}(d):void 0})}return h}async doGenerate(e){var t,n,r,i,o,a,s,l,u,c,d,p,h,f,m,g,y,_,v,b,z,w,k,x;let I=(e.providerOptions||{}).openrouter||{},T=n2(n2({},this.getArgs(e)),I),{value:j,responseHeaders:E}=await rX({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:rU(this.config.headers(),e.headers),body:T,failedResponseHandler:r3,successfulResponseHandler:r2(il),abortSignal:e.abortSignal,fetch:this.config.fetch}),S=j.choices[0];if(!S)throw Error("No choice in response");let C=j.usage?{inputTokens:null!=(t=j.usage.prompt_tokens)?t:0,outputTokens:null!=(n=j.usage.completion_tokens)?n:0,totalTokens:(null!=(r=j.usage.prompt_tokens)?r:0)+(null!=(i=j.usage.completion_tokens)?i:0),reasoningTokens:null!=(a=null==(o=j.usage.completion_tokens_details)?void 0:o.reasoning_tokens)?a:0,cachedInputTokens:null!=(l=null==(s=j.usage.prompt_tokens_details)?void 0:s.cached_tokens)?l:0}:{inputTokens:0,outputTokens:0,totalTokens:0,reasoningTokens:0,cachedInputTokens:0},O=null!=(u=S.message.reasoning_details)?u:[],A=O.length>0?O.map(e=>{switch(e.type){case"reasoning.text":if(e.text)return{type:"reasoning",text:e.text};break;case"reasoning.summary":if(e.summary)return{type:"reasoning",text:e.summary};break;case"reasoning.encrypted":if(e.data)return{type:"reasoning",text:"[REDACTED]"}}return null}).filter(e=>null!==e):S.message.reasoning?[{type:"reasoning",text:S.message.reasoning}]:[],N=[];if(N.push(...A),S.message.content&&N.push({type:"text",text:S.message.content}),S.message.tool_calls)for(let e of S.message.tool_calls)N.push({type:"tool-call",toolCallId:null!=(c=e.id)?c:rq(),toolName:e.function.name,input:e.function.arguments});if(S.message.images)for(let e of S.message.images)N.push({type:"file",mediaType:ir(e.image_url.url,"image/jpeg"),data:ii(e.image_url.url)});if(S.message.annotations)for(let e of S.message.annotations)"url_citation"===e.type&&N.push({type:"source",sourceType:"url",id:e.url_citation.url,url:e.url_citation.url,title:e.url_citation.title,providerMetadata:{openrouter:{content:e.url_citation.content||""}}});return{content:N,finishReason:r7(S.finish_reason),usage:C,warnings:[],providerMetadata:{openrouter:{provider:null!=(d=j.provider)?d:"",usage:{promptTokens:null!=(p=C.inputTokens)?p:0,completionTokens:null!=(h=C.outputTokens)?h:0,totalTokens:null!=(f=C.totalTokens)?f:0,cost:null==(m=j.usage)?void 0:m.cost,promptTokensDetails:{cachedTokens:null!=(_=null==(y=null==(g=j.usage)?void 0:g.prompt_tokens_details)?void 0:y.cached_tokens)?_:0},completionTokensDetails:{reasoningTokens:null!=(z=null==(b=null==(v=j.usage)?void 0:v.completion_tokens_details)?void 0:b.reasoning_tokens)?z:0},costDetails:{upstreamInferenceCost:null!=(x=null==(k=null==(w=j.usage)?void 0:w.cost_details)?void 0:k.upstream_inference_cost)?x:0}}}},request:{body:T},response:{id:j.id,modelId:j.model,headers:E}}}async doStream(e){var t;let n,r,i,o,a=(e.providerOptions||{}).openrouter||{},s=n2(n2({},this.getArgs(e)),a),{value:l,responseHeaders:u}=await rX({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:rU(this.config.headers(),e.headers),body:n4(n2({},s),{stream:!0,stream_options:"strict"===this.config.compatibility?n2({include_usage:!0},(null==(t=this.settings.usage)?void 0:t.include)?{include_usage:!0}:{}):void 0}),failedResponseHandler:r3,successfulResponseHandler:r1(iu),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[],d="other",p={inputTokens:Number.NaN,outputTokens:Number.NaN,totalTokens:Number.NaN,reasoningTokens:Number.NaN,cachedInputTokens:Number.NaN},h={},f=!1,m=!1;return{stream:l.pipeThrough(new TransformStream({transform(e,t){var a,s,l,u,g,y,_,v,b,z,w,k,x,I;if(!e.success){d="error",t.enqueue({type:"error",error:e.error});return}let T=e.value;if("error"in T){d="error",t.enqueue({type:"error",error:T.error});return}if(T.provider&&(o=T.provider),T.id&&(i=T.id,t.enqueue({type:"response-metadata",id:T.id})),T.model&&t.enqueue({type:"response-metadata",modelId:T.model}),null!=T.usage){if(p.inputTokens=T.usage.prompt_tokens,p.outputTokens=T.usage.completion_tokens,p.totalTokens=T.usage.prompt_tokens+T.usage.completion_tokens,h.promptTokens=T.usage.prompt_tokens,T.usage.prompt_tokens_details){let e=null!=(a=T.usage.prompt_tokens_details.cached_tokens)?a:0;p.cachedInputTokens=e,h.promptTokensDetails={cachedTokens:e}}if(h.completionTokens=T.usage.completion_tokens,T.usage.completion_tokens_details){let e=null!=(s=T.usage.completion_tokens_details.reasoning_tokens)?s:0;p.reasoningTokens=e,h.completionTokensDetails={reasoningTokens:e}}h.cost=T.usage.cost,h.totalTokens=T.usage.total_tokens}let j=T.choices[0];if((null==j?void 0:j.finish_reason)!=null&&(d=r7(j.finish_reason)),(null==j?void 0:j.delta)==null)return;let E=j.delta,S=e=>{m||(r=i||rq(),t.enqueue({type:"reasoning-start",id:r}),m=!0),t.enqueue({type:"reasoning-delta",delta:e,id:r||rq()})};if(E.reasoning_details&&E.reasoning_details.length>0)for(let e of E.reasoning_details)switch(e.type){case"reasoning.text":e.text&&S(e.text);break;case"reasoning.encrypted":e.data&&S("[REDACTED]");break;case"reasoning.summary":e.summary&&S(e.summary)}else E.reasoning&&S(E.reasoning);if(E.content&&(m&&!f&&(t.enqueue({type:"reasoning-end",id:r||rq()}),m=!1),f||(n=i||rq(),t.enqueue({type:"text-start",id:n}),f=!0),t.enqueue({type:"text-delta",delta:E.content,id:n||rq()})),E.annotations)for(let e of E.annotations)"url_citation"===e.type&&t.enqueue({type:"source",sourceType:"url",id:e.url_citation.url,url:e.url_citation.url,title:e.url_citation.title,providerMetadata:{openrouter:{content:e.url_citation.content||""}}});if(null!=E.tool_calls)for(let e of E.tool_calls){let n=null!=(l=e.index)?l:c.length-1;if(null==c[n]){if("function"!==e.type)throw new r_({data:e,message:"Expected 'function' type."});if(null==e.id)throw new r_({data:e,message:"Expected 'id' to be a string."});if((null==(u=e.function)?void 0:u.name)==null)throw new r_({data:e,message:"Expected 'function.name' to be a string."});c[n]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(g=e.function.arguments)?g:""},inputStarted:!1,sent:!1};let r=c[n];if(null==r)throw Error("Tool call is missing");(null==(y=r.function)?void 0:y.name)!=null&&(null==(_=r.function)?void 0:_.arguments)!=null&&rQ(r.function.arguments)&&(r.inputStarted=!0,t.enqueue({type:"tool-input-start",id:r.id,toolName:r.function.name}),t.enqueue({type:"tool-input-delta",id:r.id,delta:r.function.arguments}),t.enqueue({type:"tool-input-end",id:r.id}),t.enqueue({type:"tool-call",toolCallId:r.id,toolName:r.function.name,input:r.function.arguments}),r.sent=!0);continue}let r=c[n];if(null==r)throw Error("Tool call is missing");r.inputStarted||(r.inputStarted=!0,t.enqueue({type:"tool-input-start",id:r.id,toolName:r.function.name})),(null==(v=e.function)?void 0:v.arguments)!=null&&(r.function.arguments+=null!=(z=null==(b=e.function)?void 0:b.arguments)?z:""),t.enqueue({type:"tool-input-delta",id:r.id,delta:null!=(w=e.function.arguments)?w:""}),(null==(k=r.function)?void 0:k.name)!=null&&(null==(x=r.function)?void 0:x.arguments)!=null&&rQ(r.function.arguments)&&(t.enqueue({type:"tool-call",toolCallId:null!=(I=r.id)?I:rq(),toolName:r.function.name,input:r.function.arguments}),r.sent=!0)}if(null!=E.images)for(let e of E.images)t.enqueue({type:"file",mediaType:ir(e.image_url.url,"image/jpeg"),data:ii(e.image_url.url)})},flush(e){var t;if("tool-calls"===d)for(let n of c)n&&!n.sent&&(e.enqueue({type:"tool-call",toolCallId:null!=(t=n.id)?t:rq(),toolName:n.function.name,input:rQ(n.function.arguments)?n.function.arguments:"{}"}),n.sent=!0);m&&e.enqueue({type:"reasoning-end",id:r||rq()}),f&&e.enqueue({type:"text-end",id:n||rq()});let i={usage:h};void 0!==o&&(i.provider=o),e.enqueue({type:"finish",finishReason:d,usage:p,providerMetadata:{openrouter:i}})}})),warnings:[],request:{body:s},response:{headers:u}}}},id=ng([nf({id:tH().optional(),model:tH().optional(),choices:np(nf({text:tH(),reasoning:tH().nullish().optional(),reasoning_details:r6.nullish(),finish_reason:tH().nullish(),index:ni().nullish(),logprobs:nf({tokens:np(tH()),token_logprobs:np(ni()),top_logprobs:np((nP=tH(),new n_({type:"record",keyType:nP,valueType:ni(),...H(void 0)}))).nullable()}).nullable().optional()})),usage:nf({prompt_tokens:ni(),prompt_tokens_details:nf({cached_tokens:ni()}).nullish(),completion_tokens:ni(),completion_tokens_details:nf({reasoning_tokens:ni()}).nullish(),total_tokens:ni(),cost:ni().optional()}).nullish()}),r8]),ip=class{constructor(e,t,n){this.specificationVersion="v2",this.provider="openrouter",this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"text/*":[/^data:text\//,/^https?:\/\/.+$/],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,frequencyPenalty:i,presencePenalty:o,seed:a,responseFormat:s,topK:l,stopSequences:u,tools:c,toolChoice:d}){let{prompt:p}=function({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if("prompt"===t&&1===e.length&&e[0]&&"user"===e[0].role&&1===e[0].content.length&&e[0].content[0]&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let i="";for(let{role:t,content:o}of(e[0]&&"system"===e[0].role&&(i+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new rf({message:`Unexpected system message in prompt: ${o}`,prompt:e});case"user":{let e=o.map(e=>{switch(e.type){case"text":return e.text;case"file":throw new r$({functionality:"file attachments"});default:return""}}).join("");i+=`${n}:
${e}

`;break}case"assistant":{let e=o.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new r$({functionality:"tool-call messages"});case"tool-result":throw new r$({functionality:"tool-result messages"});case"reasoning":throw new r$({functionality:"reasoning messages"});case"file":throw new r$({functionality:"file attachments"});default:return""}}).join("");i+=`${r}:
${e}

`;break}case"tool":throw new r$({functionality:"tool messages"})}return{prompt:i+=`${r}:
`}}({prompt:e,inputFormat:"prompt"});if(null==c?void 0:c.length)throw new r$({functionality:"tools"});if(d)throw new r$({functionality:"toolChoice"});return n2(n2({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:t,temperature:n,top_p:r,frequency_penalty:i,presence_penalty:o,seed:a,stop:u,response_format:s,top_k:l,prompt:p,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody)}async doGenerate(e){var t,n,r,i,o,a,s,l,u,c,d,p,h,f,m;let g=(e.providerOptions||{}).openrouter||{},y=n2(n2({},this.getArgs(e)),g),{value:_,responseHeaders:v}=await rX({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:rU(this.config.headers(),e.headers),body:y,failedResponseHandler:r3,successfulResponseHandler:r2(id),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in _)throw Error(`${_.error.message}`);let b=_.choices[0];if(!b)throw Error("No choice in OpenRouter completion response");return{content:[{type:"text",text:null!=(t=b.text)?t:""}],finishReason:r7(b.finish_reason),usage:{inputTokens:null!=(r=null==(n=_.usage)?void 0:n.prompt_tokens)?r:0,outputTokens:null!=(o=null==(i=_.usage)?void 0:i.completion_tokens)?o:0,totalTokens:(null!=(s=null==(a=_.usage)?void 0:a.prompt_tokens)?s:0)+(null!=(u=null==(l=_.usage)?void 0:l.completion_tokens)?u:0),reasoningTokens:null!=(p=null==(d=null==(c=_.usage)?void 0:c.completion_tokens_details)?void 0:d.reasoning_tokens)?p:0,cachedInputTokens:null!=(m=null==(f=null==(h=_.usage)?void 0:h.prompt_tokens_details)?void 0:f.cached_tokens)?m:0},warnings:[],response:{headers:v}}}async doStream(e){let t=(e.providerOptions||{}).openrouter||{},n=n2(n2({},this.getArgs(e)),t),{value:r,responseHeaders:i}=await rX({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:rU(this.config.headers(),e.headers),body:n4(n2({},n),{stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0}),failedResponseHandler:r3,successfulResponseHandler:r1(id),abortSignal:e.abortSignal,fetch:this.config.fetch}),o="other",a={inputTokens:Number.NaN,outputTokens:Number.NaN,totalTokens:Number.NaN,reasoningTokens:Number.NaN,cachedInputTokens:Number.NaN},s={};return{stream:r.pipeThrough(new TransformStream({transform(e,t){var n,r;if(!e.success){o="error",t.enqueue({type:"error",error:e.error});return}let i=e.value;if("error"in i){o="error",t.enqueue({type:"error",error:i.error});return}if(null!=i.usage){if(a.inputTokens=i.usage.prompt_tokens,a.outputTokens=i.usage.completion_tokens,a.totalTokens=i.usage.prompt_tokens+i.usage.completion_tokens,s.promptTokens=i.usage.prompt_tokens,i.usage.prompt_tokens_details){let e=null!=(n=i.usage.prompt_tokens_details.cached_tokens)?n:0;a.cachedInputTokens=e,s.promptTokensDetails={cachedTokens:e}}if(s.completionTokens=i.usage.completion_tokens,i.usage.completion_tokens_details){let e=null!=(r=i.usage.completion_tokens_details.reasoning_tokens)?r:0;a.reasoningTokens=e,s.completionTokensDetails={reasoningTokens:e}}s.cost=i.usage.cost,s.totalTokens=i.usage.total_tokens}let l=i.choices[0];(null==l?void 0:l.finish_reason)!=null&&(o=r7(l.finish_reason)),(null==l?void 0:l.text)!=null&&t.enqueue({type:"text-delta",delta:l.text,id:rq()})},flush(e){e.enqueue({type:"finish",finishReason:o,usage:a,providerMetadata:{openrouter:{usage:s}}})}})),response:{headers:i}}}};function ih(e={}){var t,n,r,i;let o=null!=(n=null==(i=null!=(t=e.baseURL)?t:e.baseUrl)?void 0:i.replace(/\/$/,""))?n:"https://openrouter.ai/api/v1",a=null!=(r=e.compatibility)?r:"compatible",s=()=>n2({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if("string"==typeof e)return e;if(null!=e)throw new rT({message:`${r} API key must be a string.`});if(void 0===nW)throw new rT({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(null==(e=nW.env[t]))throw new rT({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new rT({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),l=(t,n={})=>new ic(t,n,{provider:"openrouter.chat",url:({path:e})=>`${o}${e}`,headers:s,compatibility:a,fetch:e.fetch,extraBody:e.extraBody}),u=(t,n={})=>new ip(t,n,{provider:"openrouter.completion",url:({path:e})=>`${o}${e}`,headers:s,compatibility:a,fetch:e.fetch,extraBody:e.extraBody}),c=(e,t)=>{if(new.target)throw Error("The OpenRouter model function cannot be called with the new keyword.");return"openai/gpt-3.5-turbo-instruct"===e?u(e,t):l(e,t)},d=(e,t)=>c(e,t);return d.languageModel=c,d.chat=l,d.completion=u,d}ih({compatibility:"strict"})},82267:(e,t,n)=>{"use strict";let r;n.d(t,{mD:()=>tV,m2:()=>e$,Z9:()=>tW,ej:()=>tJ,n_:()=>tK,HD:()=>tp,Ds:()=>tc,hK:()=>eU,sl:()=>tu,cV:()=>td,hL:()=>ta,J2:()=>ts,cb:()=>eR,o8:()=>tY,$C:()=>eZ,u1:()=>eq,$b:()=>eW,G1:()=>eF,_s:()=>eK,zf:()=>eL,v0:()=>e7,qs:()=>eJ,ID:()=>tB,fE:()=>e5,WL:()=>eQ,x3:()=>eY,HQ:()=>eX,_Z:()=>te,xI:()=>tt,S:()=>ti,GU:()=>tr,hd:()=>tl,N8:()=>e3,ZZ:()=>e6,k5:()=>e9,WZ:()=>eV,ae:()=>tQ,jN:()=>tL});var i,o,a,s,l=n(55337);class u extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function c(e){}class d extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(i){r=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=c,onError:n=c,onRetry:r=c,onComment:i}=e,o="",a=!0,s,l="",d="";function p(e){if(""===e)return void(l.length>0&&t({id:s,event:d||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",d="");if(e.startsWith(":")){i&&i(e.slice(e.startsWith(": ")?2:1));return}let n=e.indexOf(":");if(-1!==n){let t=e.slice(0,n),r=" "===e[n+1]?2:1;h(t,e.slice(n+r),e);return}h(e,"",e)}function h(e,t,i){switch(e){case"event":d=t;break;case"data":l=`${l}${t}
`;break;case"id":s=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new u(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:i}));break;default:n(new u(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:i}))}}return{feed:function(e){let t=a?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){let t=[],n="",r=0;for(;r<e.length;){let i=e.indexOf("\r",r),o=e.indexOf(`
`,r),a=-1;if(-1!==i&&-1!==o?a=Math.min(i,o):-1!==i?a=i===e.length-1?-1:i:-1!==o&&(a=o),-1===a){n=e.slice(r);break}{let n=e.slice(r,a);t.push(n),"\r"===e[(r=a+1)-1]&&e[r]===`
`&&r++}}return[t,n]}(`${o}${t}`);for(let e of n)p(e);o=r,a=!1},reset:function(e={}){o&&e.consume&&p(o),a=!0,s=void 0,l="",d="",o=""}}}({onEvent:e=>{i.enqueue(e)},onError(t){"terminate"===e?i.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}}var p=n(31296);!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},e.getValidEnumValues=t=>{let n=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(let e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(let n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i||(i={})),(o||(o={})).mergeShapes=(e,t)=>({...e,...t});let h=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),f=e=>{switch(typeof e){case"undefined":return h.undefined;case"string":return h.string;case"number":return Number.isNaN(e)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":if(Array.isArray(e))return h.array;if(null===e)return h.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return h.promise;if("undefined"!=typeof Map&&e instanceof Map)return h.map;if("undefined"!=typeof Set&&e instanceof Set)return h.set;if("undefined"!=typeof Date&&e instanceof Date)return h.date;return h.object;default:return h.unknown}},m=i.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class g extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){let n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof g))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),n=[];for(let r of this.issues)if(r.path.length>0){let n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}g.create=e=>new g(e);let y=(e,t)=>{let n;switch(e.code){case m.invalid_type:n=e.received===h.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case m.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,i.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:n=`Unrecognized key(s) in object: ${i.joinValues(e.keys,", ")}`;break;case m.invalid_union:n="Invalid input";break;case m.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${i.joinValues(e.options)}`;break;case m.invalid_enum_value:n=`Invalid enum value. Expected ${i.joinValues(e.options)}, received '${e.received}'`;break;case m.invalid_arguments:n="Invalid function arguments";break;case m.invalid_return_type:n="Invalid function return type";break;case m.invalid_date:n="Invalid date";break;case m.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:i.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case m.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case m.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case m.custom:n="Invalid input";break;case m.invalid_intersection_types:n="Intersection results could not be merged";break;case m.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case m.not_finite:n="Number must be finite";break;default:n=t.defaultError,i.assertNever(e)}return{message:n}},_=e=>{let{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],a={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let s="";for(let e of r.filter(e=>!!e).slice().reverse())s=e(a,{data:t,defaultError:s}).message;return{...i,path:o,message:s}};function v(e,t){let n=_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,y,y==y?void 0:y].filter(e=>!!e)});e.common.issues.push(n)}class b{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return z;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let e of t){let t=await e.key,r=await e.value;n.push({key:t,value:r})}return b.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:i}=r;if("aborted"===t.status||"aborted"===i.status)return z;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||r.alwaysSet)&&(n[t.value]=i.value)}return{status:e.value,value:n}}}let z=Object.freeze({status:"aborted"}),w=e=>({status:"dirty",value:e}),k=e=>({status:"valid",value:e}),x=e=>"aborted"===e.status,I=e=>"dirty"===e.status,T=e=>"valid"===e.status,j=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(a||(a={}));class E{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let S=(e,t)=>{if(T(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new g(e.common.issues);return this._error=t,this._error}}};function C(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:o}=e;return"invalid_enum_value"===t.code?{message:o??i.defaultError}:void 0===i.data?{message:o??r??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:o??n??i.defaultError}},description:i}}class O{get description(){return this._def.description}_getType(e){return f(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(j(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){let n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},r=this._parseSync({data:e,path:n.path,parent:n});return S(n,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:t});return T(n)?{value:n.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>T(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},r=this._parse({data:e,path:n.path,parent:n});return S(n,await (j(r)?r:Promise.resolve(r)))}refine(e,t){let n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let i=e(t),o=()=>r.addIssue({code:m.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(o(),!1)):!!i||(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new ex({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eI.create(this,this._def)}nullable(){return eT.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return es.create(this)}promise(){return ek.create(this,this._def)}or(e){return eu.create([this,e],this._def)}and(e){return ep.create(this,e,this._def)}transform(e){return new ex({...C(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ej({...C(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new eC({typeName:s.ZodBranded,type:this,...C(this._def)})}catch(e){return new eE({...C(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eO.create(this,e)}readonly(){return eA.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let A=/^c[^\s-]{8,}$/i,N=/^[0-9a-z]+$/,$=/^[0-9A-HJKMNP-TV-Z]{26}$/i,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,P=/^[a-z0-9_-]{21}$/i,M=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,U=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Z=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,q=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,D=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,B=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,V=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,H="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",G=RegExp(`^${H}$`);function W(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}class K extends O{_parse(e){var t,n,o,a;let s;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.string,received:t.parsedType}),z}let l=new b;for(let u of this._def.checks)if("min"===u.kind)e.data.length<u.value&&(v(s=this._getOrReturnCtx(e,s),{code:m.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),l.dirty());else if("max"===u.kind)e.data.length>u.value&&(v(s=this._getOrReturnCtx(e,s),{code:m.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),l.dirty());else if("length"===u.kind){let t=e.data.length>u.value,n=e.data.length<u.value;(t||n)&&(s=this._getOrReturnCtx(e,s),t?v(s,{code:m.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):n&&v(s,{code:m.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),l.dirty())}else if("email"===u.kind)Z.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"email",code:m.invalid_string,message:u.message}),l.dirty());else if("emoji"===u.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"emoji",code:m.invalid_string,message:u.message}),l.dirty());else if("uuid"===u.kind)R.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"uuid",code:m.invalid_string,message:u.message}),l.dirty());else if("nanoid"===u.kind)P.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"nanoid",code:m.invalid_string,message:u.message}),l.dirty());else if("cuid"===u.kind)A.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"cuid",code:m.invalid_string,message:u.message}),l.dirty());else if("cuid2"===u.kind)N.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"cuid2",code:m.invalid_string,message:u.message}),l.dirty());else if("ulid"===u.kind)$.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"ulid",code:m.invalid_string,message:u.message}),l.dirty());else if("url"===u.kind)try{new URL(e.data)}catch{v(s=this._getOrReturnCtx(e,s),{validation:"url",code:m.invalid_string,message:u.message}),l.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"regex",code:m.invalid_string,message:u.message}),l.dirty())):"trim"===u.kind?e.data=e.data.trim():"includes"===u.kind?e.data.includes(u.value,u.position)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),l.dirty()):"toLowerCase"===u.kind?e.data=e.data.toLowerCase():"toUpperCase"===u.kind?e.data=e.data.toUpperCase():"startsWith"===u.kind?e.data.startsWith(u.value)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:{startsWith:u.value},message:u.message}),l.dirty()):"endsWith"===u.kind?e.data.endsWith(u.value)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:{endsWith:u.value},message:u.message}),l.dirty()):"datetime"===u.kind?(function(e){let t=`${H}T${W(e)}`,n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,RegExp(`^${t}$`)})(u).test(e.data)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:"datetime",message:u.message}),l.dirty()):"date"===u.kind?G.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:"date",message:u.message}),l.dirty()):"time"===u.kind?RegExp(`^${W(u)}$`).test(e.data)||(v(s=this._getOrReturnCtx(e,s),{code:m.invalid_string,validation:"time",message:u.message}),l.dirty()):"duration"===u.kind?U.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"duration",code:m.invalid_string,message:u.message}),l.dirty()):"ip"===u.kind?(t=e.data,!(("v4"===(n=u.version)||!n)&&q.test(t)||("v6"===n||!n)&&D.test(t))&&1&&(v(s=this._getOrReturnCtx(e,s),{validation:"ip",code:m.invalid_string,message:u.message}),l.dirty())):"jwt"===u.kind?!function(e,t){if(!M.test(e))return!1;try{let[n]=e.split(".");if(!n)return!1;let r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,u.alg)&&(v(s=this._getOrReturnCtx(e,s),{validation:"jwt",code:m.invalid_string,message:u.message}),l.dirty()):"cidr"===u.kind?(o=e.data,!(("v4"===(a=u.version)||!a)&&L.test(o)||("v6"===a||!a)&&B.test(o))&&1&&(v(s=this._getOrReturnCtx(e,s),{validation:"cidr",code:m.invalid_string,message:u.message}),l.dirty())):"base64"===u.kind?F.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"base64",code:m.invalid_string,message:u.message}),l.dirty()):"base64url"===u.kind?V.test(e.data)||(v(s=this._getOrReturnCtx(e,s),{validation:"base64url",code:m.invalid_string,message:u.message}),l.dirty()):i.assertNever(u);return{status:l.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:m.invalid_string,...a.errToObj(n)})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...a.errToObj(e)})}url(e){return this._addCheck({kind:"url",...a.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...a.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...a.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...a.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...a.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...a.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...a.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...a.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...a.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...a.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...a.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...a.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...a.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...a.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...a.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...a.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...a.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...a.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...a.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...a.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...a.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...a.errToObj(t)})}nonempty(e){return this.min(1,a.errToObj(e))}trim(){return new K({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}K.create=e=>new K({checks:[],typeName:s.ZodString,coerce:e?.coerce??!1,...C(e)});class J extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.number,received:t.parsedType}),z}let n=new b;for(let r of this._def.checks)"int"===r.kind?i.isInteger(e.data)||(v(t=this._getOrReturnCtx(e,t),{code:m.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,r.value)&&(v(t=this._getOrReturnCtx(e,t),{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(v(t=this._getOrReturnCtx(e,t),{code:m.not_finite,message:r.message}),n.dirty()):i.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,n,r){return new J({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:a.toString(r)}]})}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:a.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:a.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&i.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks)if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;else"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value);return Number.isFinite(t)&&Number.isFinite(e)}}J.create=e=>new J({checks:[],typeName:s.ZodNumber,coerce:e?.coerce||!1,...C(e)});class Q extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==h.bigint)return this._getInvalidInput(e);let n=new b;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(v(t=this._getOrReturnCtx(e,t),{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):i.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.bigint,received:t.parsedType}),z}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,n,r){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:a.toString(r)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Q.create=e=>new Q({checks:[],typeName:s.ZodBigInt,coerce:e?.coerce??!1,...C(e)});class Y extends O{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.boolean){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.boolean,received:t.parsedType}),z}return k(e.data)}}Y.create=e=>new Y({typeName:s.ZodBoolean,coerce:e?.coerce||!1,...C(e)});class X extends O{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.date,received:t.parsedType}),z}if(Number.isNaN(e.data.getTime()))return v(this._getOrReturnCtx(e),{code:m.invalid_date}),z;let n=new b;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(v(t=this._getOrReturnCtx(e,t),{code:m.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):i.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:a.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:a.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}X.create=e=>new X({checks:[],coerce:e?.coerce||!1,typeName:s.ZodDate,...C(e)});class ee extends O{_parse(e){if(this._getType(e)!==h.symbol){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.symbol,received:t.parsedType}),z}return k(e.data)}}ee.create=e=>new ee({typeName:s.ZodSymbol,...C(e)});class et extends O{_parse(e){if(this._getType(e)!==h.undefined){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.undefined,received:t.parsedType}),z}return k(e.data)}}et.create=e=>new et({typeName:s.ZodUndefined,...C(e)});class en extends O{_parse(e){if(this._getType(e)!==h.null){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.null,received:t.parsedType}),z}return k(e.data)}}en.create=e=>new en({typeName:s.ZodNull,...C(e)});class er extends O{constructor(){super(...arguments),this._any=!0}_parse(e){return k(e.data)}}er.create=e=>new er({typeName:s.ZodAny,...C(e)});class ei extends O{constructor(){super(...arguments),this._unknown=!0}_parse(e){return k(e.data)}}ei.create=e=>new ei({typeName:s.ZodUnknown,...C(e)});class eo extends O{_parse(e){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.never,received:t.parsedType}),z}}eo.create=e=>new eo({typeName:s.ZodNever,...C(e)});class ea extends O{_parse(e){if(this._getType(e)!==h.undefined){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.void,received:t.parsedType}),z}return k(e.data)}}ea.create=e=>new ea({typeName:s.ZodVoid,...C(e)});class es extends O{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==h.array)return v(t,{code:m.invalid_type,expected:h.array,received:t.parsedType}),z;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(v(t,{code:e?m.too_big:m.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(v(t,{code:m.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(v(t,{code:m.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new E(t,e,t.path,n)))).then(e=>b.mergeArray(n,e));let i=[...t.data].map((e,n)=>r.type._parseSync(new E(t,e,t.path,n)));return b.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new es({...this._def,minLength:{value:e,message:a.toString(t)}})}max(e,t){return new es({...this._def,maxLength:{value:e,message:a.toString(t)}})}length(e,t){return new es({...this._def,exactLength:{value:e,message:a.toString(t)}})}nonempty(e){return this.min(1,e)}}es.create=(e,t)=>new es({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...C(t)});class el extends O{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=i.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==h.object){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.object,received:t.parsedType}),z}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof eo&&"strip"===this._def.unknownKeys))for(let e in n.data)i.includes(e)||o.push(e);let a=[];for(let e of i){let t=r[e],i=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new E(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof eo){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)o.length>0&&(v(n,{code:m.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new E(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>b.mergeObjectSync(t,e)):b.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return a.errToObj,new el({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{let r=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:a.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new el({...this._def,unknownKeys:"strip"})}passthrough(){return new el({...this._def,unknownKeys:"passthrough"})}extend(e){return new el({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new el({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new el({...this._def,catchall:e})}pick(e){let t={};for(let n of i.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new el({...this._def,shape:()=>t})}omit(e){let t={};for(let n of i.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new el({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof el){let n={};for(let r in t.shape){let i=t.shape[r];n[r]=eI.create(e(i))}return new el({...t._def,shape:()=>n})}if(t instanceof es)return new es({...t._def,type:e(t.element)});if(t instanceof eI)return eI.create(e(t.unwrap()));if(t instanceof eT)return eT.create(e(t.unwrap()));if(t instanceof eh)return eh.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let n of i.objectKeys(this.shape)){let r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new el({...this._def,shape:()=>t})}required(e){let t={};for(let n of i.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof eI;)e=e._def.innerType;t[n]=e}return new el({...this._def,shape:()=>t})}keyof(){return eb(i.objectKeys(this.shape))}}el.create=(e,t)=>new el({shape:()=>e,unknownKeys:"strip",catchall:eo.create(),typeName:s.ZodObject,...C(t)}),el.strictCreate=(e,t)=>new el({shape:()=>e,unknownKeys:"strict",catchall:eo.create(),typeName:s.ZodObject,...C(t)}),el.lazycreate=(e,t)=>new el({shape:e,unknownKeys:"strip",catchall:eo.create(),typeName:s.ZodObject,...C(t)});class eu extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new g(e.ctx.common.issues));return v(t,{code:m.invalid_union,unionErrors:n}),z});{let e,r=[];for(let i of n){let n={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=r.map(e=>new g(e));return v(t,{code:m.invalid_union,unionErrors:i}),z}}get options(){return this._def.options}}eu.create=(e,t)=>new eu({options:e,typeName:s.ZodUnion,...C(t)});let ec=e=>{if(e instanceof e_)return ec(e.schema);if(e instanceof ex)return ec(e.innerType());if(e instanceof ev)return[e.value];if(e instanceof ez)return e.options;if(e instanceof ew)return i.objectValues(e.enum);else if(e instanceof ej)return ec(e._def.innerType);else if(e instanceof et)return[void 0];else if(e instanceof en)return[null];else if(e instanceof eI)return[void 0,...ec(e.unwrap())];else if(e instanceof eT)return[null,...ec(e.unwrap())];else if(e instanceof eC)return ec(e.unwrap());else if(e instanceof eA)return ec(e.unwrap());else if(e instanceof eE)return ec(e._def.innerType);else return[]};class ed extends O{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return v(t,{code:m.invalid_type,expected:h.object,received:t.parsedType}),z;let n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(v(t,{code:m.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let r=new Map;for(let n of t){let t=ec(n.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(r.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new ed({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...C(n)})}}class ep extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(x(e)||x(r))return z;let o=function e(t,n){let r=f(t),o=f(n);if(t===n)return{valid:!0,data:t};if(r===h.object&&o===h.object){let r=i.objectKeys(n),o=i.objectKeys(t).filter(e=>-1!==r.indexOf(e)),a={...t,...n};for(let r of o){let i=e(t[r],n[r]);if(!i.valid)return{valid:!1};a[r]=i.data}return{valid:!0,data:a}}if(r===h.array&&o===h.array){if(t.length!==n.length)return{valid:!1};let r=[];for(let i=0;i<t.length;i++){let o=e(t[i],n[i]);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}if(r===h.date&&o===h.date&&+t==+n)return{valid:!0,data:t};return{valid:!1}}(e.value,r.value);return o.valid?((I(e)||I(r))&&t.dirty(),{status:t.value,value:o.data}):(v(n,{code:m.invalid_intersection_types}),z)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ep.create=(e,t,n)=>new ep({left:e,right:t,typeName:s.ZodIntersection,...C(n)});class eh extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.array)return v(n,{code:m.invalid_type,expected:h.array,received:n.parsedType}),z;if(n.data.length<this._def.items.length)return v(n,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&n.data.length>this._def.items.length&&(v(n,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new E(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>b.mergeArray(t,e)):b.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new eh({...this._def,rest:e})}}eh.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eh({items:e,typeName:s.ZodTuple,rest:null,...C(t)})};class ef extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.object)return v(n,{code:m.invalid_type,expected:h.object,received:n.parsedType}),z;let r=[],i=this._def.keyType,o=this._def.valueType;for(let e in n.data)r.push({key:i._parse(new E(n,e,n.path,e)),value:o._parse(new E(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?b.mergeObjectAsync(t,r):b.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ef(t instanceof O?{keyType:e,valueType:t,typeName:s.ZodRecord,...C(n)}:{keyType:K.create(),valueType:e,typeName:s.ZodRecord,...C(t)})}}class em extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.map)return v(n,{code:m.invalid_type,expected:h.map,received:n.parsedType}),z;let r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([e,t],o)=>({key:r._parse(new E(n,e,n.path,[o,"key"])),value:i._parse(new E(n,t,n.path,[o,"value"]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of o){let r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return z;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let n of o){let r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return z;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}em.create=(e,t,n)=>new em({valueType:t,keyType:e,typeName:s.ZodMap,...C(n)});class eg extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.set)return v(n,{code:m.invalid_type,expected:h.set,received:n.parsedType}),z;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(v(n,{code:m.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(v(n,{code:m.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let i=this._def.valueType;function o(e){let n=new Set;for(let r of e){if("aborted"===r.status)return z;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let a=[...n.data.values()].map((e,t)=>i._parse(new E(n,e,n.path,t)));return n.common.async?Promise.all(a).then(e=>o(e)):o(a)}min(e,t){return new eg({...this._def,minSize:{value:e,message:a.toString(t)}})}max(e,t){return new eg({...this._def,maxSize:{value:e,message:a.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eg.create=(e,t)=>new eg({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...C(t)});class ey extends O{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.function)return v(t,{code:m.invalid_type,expected:h.function,received:t.parsedType}),z;function n(e,n){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y,y].filter(e=>!!e),issueData:{code:m.invalid_arguments,argumentsError:n}})}function r(e,n){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y,y].filter(e=>!!e),issueData:{code:m.invalid_return_type,returnTypeError:n}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ek){let e=this;return k(async function(...t){let a=new g([]),s=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(n(t,e)),a}),l=await Reflect.apply(o,this,s);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(r(l,e)),a})})}{let e=this;return k(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new g([n(t,a.error)]);let s=Reflect.apply(o,this,a.data),l=e._def.returns.safeParse(s,i);if(!l.success)throw new g([r(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ey({...this._def,args:eh.create(e).rest(ei.create())})}returns(e){return new ey({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ey({args:e||eh.create([]).rest(ei.create()),returns:t||ei.create(),typeName:s.ZodFunction,...C(n)})}}class e_ extends O{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}e_.create=(e,t)=>new e_({getter:e,typeName:s.ZodLazy,...C(t)});class ev extends O{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:m.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eb(e,t){return new ez({values:e,typeName:s.ZodEnum,...C(t)})}ev.create=(e,t)=>new ev({value:e,typeName:s.ZodLiteral,...C(t)});class ez extends O{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{expected:i.joinValues(n),received:t.parsedType,code:m.invalid_type}),z}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{received:t.data,code:m.invalid_enum_value,options:n}),z}return k(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ez.create(e,{...this._def,...t})}exclude(e,t=this._def){return ez.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ez.create=eb;class ew extends O{_parse(e){let t=i.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==h.string&&n.parsedType!==h.number){let e=i.objectValues(t);return v(n,{expected:i.joinValues(e),received:n.parsedType,code:m.invalid_type}),z}if(this._cache||(this._cache=new Set(i.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=i.objectValues(t);return v(n,{received:n.data,code:m.invalid_enum_value,options:e}),z}return k(e.data)}get enum(){return this._def.values}}ew.create=(e,t)=>new ew({values:e,typeName:s.ZodNativeEnum,...C(t)});class ek extends O{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==h.promise&&!1===t.common.async?(v(t,{code:m.invalid_type,expected:h.promise,received:t.parsedType}),z):k((t.parsedType===h.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ek.create=(e,t)=>new ek({type:e,typeName:s.ZodPromise,...C(t)});class ex extends O{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,o={addIssue:e=>{v(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===r.type){let e=r.transform(n.data,o);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return z;let r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?z:"dirty"===r.status||"dirty"===t.value?w(r.value):r});{if("aborted"===t.value)return z;let r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?z:"dirty"===r.status||"dirty"===t.value?w(r.value):r}}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,o);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?z:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?z:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type)if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>T(e)?Promise.resolve(r.transform(e.value,o)).then(e=>({status:t.value,value:e})):z);else{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!T(e))return z;let i=r.transform(e.value,o);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}i.assertNever(r)}}ex.create=(e,t,n)=>new ex({schema:e,typeName:s.ZodEffects,effect:t,...C(n)}),ex.createWithPreprocess=(e,t,n)=>new ex({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...C(n)});class eI extends O{_parse(e){return this._getType(e)===h.undefined?k(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eI.create=(e,t)=>new eI({innerType:e,typeName:s.ZodOptional,...C(t)});class eT extends O{_parse(e){return this._getType(e)===h.null?k(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eT.create=(e,t)=>new eT({innerType:e,typeName:s.ZodNullable,...C(t)});class ej extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===h.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ej.create=(e,t)=>new ej({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...C(t)});class eE extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return j(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...C(t)});class eS extends O{_parse(e){if(this._getType(e)!==h.nan){let t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:h.nan,received:t.parsedType}),z}return{status:"valid",value:e.data}}}eS.create=e=>new eS({typeName:s.ZodNaN,...C(e)}),Symbol("zod_brand");class eC extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class eO extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?z:"dirty"===e.status?(t.dirty(),w(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?z:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new eO({in:e,out:t,typeName:s.ZodPipeline})}}class eA extends O{_parse(e){let t=this._def.innerType._parse(e),n=e=>(T(e)&&(e.value=Object.freeze(e.value)),e);return j(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}eA.create=(e,t)=>new eA({innerType:e,typeName:s.ZodReadonly,...C(t)}),el.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(s||(s={})),K.create,J.create,eS.create,Q.create,Y.create,X.create,ee.create,et.create,en.create,er.create,ei.create,eo.create,ea.create,es.create,el.create,el.strictCreate,eu.create,ed.create,ep.create,eh.create,ef.create,em.create,eg.create,ey.create,e_.create,ev.create,ez.create,ew.create,ek.create,ex.create,eI.create,eT.create,ex.createWithPreprocess,eO.create;var eN=n(24338);function e$(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}async function eR(e,t){if(null==e)return Promise.resolve();let n=null==t?void 0:t.abortSignal;return new Promise((t,r)=>{if(null==n?void 0:n.aborted)return void r(eP());let i=setTimeout(()=>{o(),t()},e),o=()=>{clearTimeout(i),null==n||n.removeEventListener("abort",a)},a=()=>{o(),r(eP())};null==n||n.addEventListener("abort",a)})}function eP(){return new DOMException("Delay was aborted","AbortError")}function eM(e){return Object.fromEntries([...e.headers])}var eU=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{let i=()=>{let e=n.length,r=Array(t);for(let i=0;i<t;i++)r[i]=n[Math.random()*e|0];return r.join("")};if(null==e)return i;if(n.includes(r))throw new l.Di({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${i()}`},eZ=eU();function eq(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function eL(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var eD=["fetch failed","failed to fetch"];function eB({error:e,url:t,requestBodyValues:n}){if(eL(e))return e;if(e instanceof TypeError&&eD.includes(e.message.toLowerCase())){let r=e.cause;if(null!=r)return new l.hL({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function eF(e=globalThis){var t,n,r;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(r=null==(n=e.process)?void 0:n.versions)?void 0:r.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function eV(e,...t){let n=new Headers(Object.fromEntries(Object.entries(null!=e?e:{}).filter(([e,t])=>null!=t))),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n)}var eH="3.0.12",eG=()=>globalThis.fetch,eW=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:i,fetch:o=eG()})=>{try{let a=await o(e,{method:"GET",headers:eV(t,`ai-sdk/provider-utils/${eH}`,eF()),signal:i}),s=eM(a);if(!a.ok){let t;try{t=await r({response:a,url:e,requestBodyValues:{}})}catch(t){if(eL(t)||l.hL.isInstance(t))throw t;throw new l.hL({message:"Failed to process error response",cause:t,statusCode:a.status,url:e,responseHeaders:s,requestBodyValues:{}})}throw t.value}try{return await n({response:a,url:e,requestBodyValues:{}})}catch(t){if(t instanceof Error&&(eL(t)||l.hL.isInstance(t)))throw t;throw new l.hL({message:"Failed to process successful response",cause:t,statusCode:a.status,url:e,responseHeaders:s,requestBodyValues:{}})}}catch(t){throw eB({error:t,url:e,requestBodyValues:{}})}};function eK({messages:e,schema:t,schemaPrefix:n,schemaSuffix:r}){var i,o;let a=(null==(i=e[0])?void 0:i.role)==="system"?{...e[0]}:{role:"system",content:""};return a.content=function({prompt:e,schema:t,schemaPrefix:n=null!=t?"JSON schema:":void 0,schemaSuffix:r=null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON."}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,n,null!=t?JSON.stringify(t):void 0,r].filter(e=>null!=e).join("\n")}({prompt:a.content,schema:t,schemaPrefix:n,schemaSuffix:r}),[a,...(null==(o=e[0])?void 0:o.role)==="system"?e.slice(1):e]}function eJ({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([e,t])=>{let n=e.toLowerCase();return"*"===n||"*/*"===n?{mediaTypePrefix:"",regexes:t}:{mediaTypePrefix:n.replace(/\*/,""),regexes:t}}).filter(({mediaTypePrefix:t})=>e.startsWith(t)).flatMap(({regexes:e})=>e).some(e=>e.test(t))}function eQ({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if("string"==typeof e)return e;if(null!=e)throw new l.Kq({message:`${r} API key must be a string.`});if(void 0===eN)throw new l.Kq({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(null==(e=eN.env[t]))throw new l.Kq({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new l.Kq({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function eY({settingValue:e,environmentVariableName:t}){return"string"==typeof e?e:null!=e||void 0===eN?void 0:null!=(e=eN.env[t])&&"string"==typeof e?e:void 0}function eX(e){var t;let[n,r=""]=e.toLowerCase().split("/");return null!=(t=({mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"})[r])?t:r}var e0=/"__proto__"\s*:/,e1=/"constructor"\s*:/;function e2(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===e0.test(e)&&!1===e1.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let n of(t=[],e)){if(Object.prototype.hasOwnProperty.call(n,"__proto__")||Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in n){let r=n[e];r&&"object"==typeof r&&t.push(r)}}}return e}(t)}finally{Error.stackTraceLimit=t}}var e4=Symbol.for("vercel.ai.validator");function e5(e){let t;return()=>(null==t&&(t=e()),t)}async function e9({value:e,schema:t}){let n=await e6({value:e,schema:t});if(!n.success)throw l.iM.wrap({value:e,cause:n.error});return n.value}async function e6({value:e,schema:t}){var n;let r="object"==typeof t&&null!==t&&e4 in t&&!0===t[e4]&&"validate"in t?t:"function"==typeof t?t():(n=t,{[e4]:!0,validate:async e=>{let t=await n["~standard"].validate(e);return null==t.issues?{success:!0,value:t.value}:{success:!1,error:new l.iM({value:e,cause:t.issues})}}});try{if(null==r.validate)return{success:!0,value:e,rawValue:e};let t=await r.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:l.iM.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:l.iM.wrap({value:e,cause:t}),rawValue:e}}}async function e8({text:e,schema:t}){try{let n=e2(e);if(null==t)return n;return e9({value:n,schema:t})}catch(t){if(l.u6.isInstance(t)||l.iM.isInstance(t))throw t;throw new l.u6({text:e,cause:t})}}async function e3({text:e,schema:t}){try{let n=e2(e);if(null==t)return{success:!0,value:n,rawValue:n};return await e6({value:n,schema:t})}catch(t){return{success:!1,error:l.u6.isInstance(t)?t:new l.u6({text:e,cause:t}),rawValue:void 0}}}function e7(e){try{return e2(e),!0}catch(e){return!1}}function te({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new d).pipeThrough(new TransformStream({async transform({data:e},n){"[DONE]"!==e&&n.enqueue(await e3({text:e,schema:t}))}}))}async function tt({provider:e,providerOptions:t,schema:n}){if((null==t?void 0:t[e])==null)return;let r=await e6({value:t[e],schema:n});if(!r.success)throw new l.Di({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var tn=()=>globalThis.fetch,tr=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>to({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),ti=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>to({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),to=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:o,fetch:a=tn()})=>{try{let s=await a(e,{method:"POST",headers:eV(t,`ai-sdk/provider-utils/${eH}`,eF()),body:n.content,signal:o}),u=eM(s);if(!s.ok){let t;try{t=await i({response:s,url:e,requestBodyValues:n.values})}catch(t){if(eL(t)||l.hL.isInstance(t))throw t;throw new l.hL({message:"Failed to process error response",cause:t,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw t.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(t){if(t instanceof Error&&(eL(t)||l.hL.isInstance(t)))throw t;throw new l.hL({message:"Failed to process successful response",cause:t,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(t){throw eB({error:t,url:e,requestBodyValues:n.values})}};function ta({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:i,toModelOutput:o,onInputStart:a,onInputDelta:s,onInputAvailable:l,...u})=>({type:"provider-defined",id:e,name:t,args:u,inputSchema:n,outputSchema:i,execute:r,toModelOutput:o,onInputStart:a,onInputDelta:s,onInputAvailable:l})}function ts({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:i,toModelOutput:o,onInputStart:a,onInputDelta:s,onInputAvailable:l,...u})=>({type:"provider-defined",id:e,name:t,args:u,inputSchema:n,outputSchema:r,execute:i,toModelOutput:o,onInputStart:a,onInputDelta:s,onInputAvailable:l})}async function tl(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var tu=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:o})=>{let a=await r.text(),s=eM(r);if(""===a.trim())return{responseHeaders:s,value:new l.hL({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})};try{let u=await e8({text:a,schema:e});return{responseHeaders:s,value:new l.hL({message:t(u),url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,data:u,isRetryable:null==n?void 0:n(r,u)})}}catch(e){return{responseHeaders:s,value:new l.hL({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})}}},tc=e=>async({response:t})=>{let n=eM(t);if(null==t.body)throw new l.Tt({});return{responseHeaders:n,value:te({stream:t.body,schema:e})}},td=e=>async({response:t,url:n,requestBodyValues:r})=>{let i=await t.text(),o=await e3({text:i,schema:e}),a=eM(t);if(!o.success)throw new l.hL({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:o.value,rawValue:o.rawValue}},tp=()=>async({response:e,url:t,requestBodyValues:n})=>{let r=eM(e);if(!e.body)throw new l.hL({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{let t=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(t)}}catch(i){throw new l.hL({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:i})}},th=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},tf=Symbol("Let zodToJsonSchema decide on which parser to use"),tm={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},tg=e=>"string"==typeof e?{...tm,name:e}:{...tm,...e};function ty(e,t){return tP(e.type._def,t)}var t_=(e,t)=>tP(e.innerType._def,t),tv=e=>{let t={type:"integer",format:"unix-time"};for(let n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value}return t},tb=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,tz=void 0,tw={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===tz&&(tz=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),tz),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function tk(e,t){let n={type:"string"};if(e.checks)for(let r of e.checks)switch(r.kind){case"min":n.minLength="number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength="number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":tT(n,"email",r.message,t);break;case"format:idn-email":tT(n,"idn-email",r.message,t);break;case"pattern:zod":tj(n,tw.email,r.message,t)}break;case"url":tT(n,"uri",r.message,t);break;case"uuid":tT(n,"uuid",r.message,t);break;case"regex":tj(n,r.regex,r.message,t);break;case"cuid":tj(n,tw.cuid,r.message,t);break;case"cuid2":tj(n,tw.cuid2,r.message,t);break;case"startsWith":tj(n,RegExp(`^${tx(r.value,t)}`),r.message,t);break;case"endsWith":tj(n,RegExp(`${tx(r.value,t)}$`),r.message,t);break;case"datetime":tT(n,"date-time",r.message,t);break;case"date":tT(n,"date",r.message,t);break;case"time":tT(n,"time",r.message,t);break;case"duration":tT(n,"duration",r.message,t);break;case"length":n.minLength="number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,n.maxLength="number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value;break;case"includes":tj(n,RegExp(tx(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&tT(n,"ipv4",r.message,t),"v4"!==r.version&&tT(n,"ipv6",r.message,t);break;case"base64url":tj(n,tw.base64url,r.message,t);break;case"jwt":tj(n,tw.jwt,r.message,t);break;case"cidr":"v6"!==r.version&&tj(n,tw.ipv4Cidr,r.message,t),"v4"!==r.version&&tj(n,tw.ipv6Cidr,r.message,t);break;case"emoji":tj(n,tw.emoji(),r.message,t);break;case"ulid":tj(n,tw.ulid,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":tT(n,"binary",r.message,t);break;case"contentEncoding:base64":n.contentEncoding="base64";break;case"pattern:zod":tj(n,tw.base64,r.message,t)}break;case"nanoid":tj(n,tw.nanoid,r.message,t)}return n}function tx(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)tI.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}var tI=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function tT(e,t,n,r){var i;e.format||(null==(i=e.anyOf)?void 0:i.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function tj(e,t,n,r){var i;e.pattern||(null==(i=e.allOf)?void 0:i.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:tE(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=tE(t,r)}function tE(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},i=r.i?e.source.toLowerCase():e.source,o="",a=!1,s=!1,l=!1;for(let e=0;e<i.length;e++){if(a){o+=i[e],a=!1;continue}if(r.i){if(s){if(i[e].match(/[a-z]/)){l?(o+=i[e],o+=`${i[e-2]}-${i[e]}`.toUpperCase(),l=!1):"-"===i[e+1]&&(null==(n=i[e+2])?void 0:n.match(/[a-z]/))?(o+=i[e],l=!0):o+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){o+=`[${i[e]}${i[e].toUpperCase()}]`;continue}}if(r.m){if("^"===i[e]){o+=`(^|(?<=[\r
]))`;continue}else if("$"===i[e]){o+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===i[e]){o+=s?`${i[e]}\r
`:`[${i[e]}\r
]`;continue}o+=i[e],"\\"===i[e]?a=!0:s&&"]"===i[e]?s=!1:s||"["!==i[e]||(s=!0)}try{new RegExp(o)}catch(n){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function tS(e,t){var n,r,i,o,a,l;let u={type:"object",additionalProperties:null!=(n=tP(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?n:t.allowedAdditionalProperties};if((null==(r=e.keyType)?void 0:r._def.typeName)===s.ZodString&&(null==(i=e.keyType._def.checks)?void 0:i.length)){let{type:n,...r}=tk(e.keyType._def,t);return{...u,propertyNames:r}}if((null==(o=e.keyType)?void 0:o._def.typeName)===s.ZodEnum)return{...u,propertyNames:{enum:e.keyType._def.values}};if((null==(a=e.keyType)?void 0:a._def.typeName)===s.ZodBranded&&e.keyType._def.type._def.typeName===s.ZodString&&(null==(l=e.keyType._def.type._def.checks)?void 0:l.length)){let{type:n,...r}=ty(e.keyType._def,t);return{...u,propertyNames:r}}return u}var tC={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},tO=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>tP(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0},tA=(e,t)=>{var n;if(t.currentPath.toString()===(null==(n=t.propertyPath)?void 0:n.toString()))return tP(e.innerType._def,t);let r=tP(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},tN=(e,t)=>{if("input"===t.pipeStrategy)return tP(e.in._def,t);if("output"===t.pipeStrategy)return tP(e.out._def,t);let n=tP(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=tP(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(e=>void 0!==e)}},t$=(e,t)=>tP(e.innerType._def,t),tR=(e,t,n)=>{switch(t){case s.ZodString:return tk(e,n);case s.ZodNumber:return function(e){let t={type:"number"};if(!e.checks)return t;for(let n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value}return t}(e);case s.ZodObject:return function(e,t){let n={type:"object",properties:{}},r=[],i=e.shape();for(let e in i){let o=i[e];if(void 0===o||void 0===o._def)continue;let a=function(e){try{return e.isOptional()}catch(e){return!0}}(o),s=tP(o._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==s&&(n.properties[e]=s,a||r.push(e))}r.length&&(n.required=r);let o=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return tP(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==o&&(n.additionalProperties=o),n}(e,n);case s.ZodBigInt:return function(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value}return t}(e);case s.ZodBoolean:return{type:"boolean"};case s.ZodDate:return function e(t,n,r){let i=null!=r?r:n.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((r,i)=>e(t,n,r))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return tv(t)}}(e,n);case s.ZodUndefined:return{not:{}};case s.ZodNull:return{type:"null"};case s.ZodArray:return function(e,t){var n,r,i;let o={type:"array"};return(null==(n=e.type)?void 0:n._def)&&(null==(i=null==(r=e.type)?void 0:r._def)?void 0:i.typeName)!==s.ZodAny&&(o.items=tP(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}(e,n);case s.ZodUnion:case s.ZodDiscriminatedUnion:return function(e,t){let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in tC&&(!e._def.checks||!e._def.checks.length))){let e=n.reduce((e,t)=>{let n=tC[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=n.reduce((e,t)=>{let n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return tO(e,t)}(e,n);case s.ZodIntersection:return function(e,t){let n=[tP(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),tP(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),r=[];return n.forEach(e=>{if(tb(e))r.push(...e.allOf);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:n,...r}=e;t=r}r.push(t)}}),r.length?{allOf:r}:void 0}(e,n);case s.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,n)=>tP(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:tP(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,n)=>tP(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,n);case s.ZodRecord:return tS(e,n);case s.ZodLiteral:return function(e){let t=typeof e.value;return"bigint"!==t&&"number"!==t&&"boolean"!==t&&"string"!==t?{type:Array.isArray(e.value)?"array":"object"}:{type:"bigint"===t?"integer":t,const:e.value}}(e);case s.ZodEnum:return{type:"string",enum:Array.from(e.values)};case s.ZodNativeEnum:return function(e){let t=e.values,n=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case s.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[tC[e.innerType._def.typeName],"null"]};let n=tP(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case s.ZodOptional:return tA(e,n);case s.ZodMap:return function(e,t){return"record"===t.mapStrategy?tS(e,t):{type:"array",maxItems:125,items:{type:"array",items:[tP(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},tP(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,n);case s.ZodSet:return function(e,t){let n={type:"array",uniqueItems:!0,items:tP(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}(e,n);case s.ZodLazy:return()=>e.getter()._def;case s.ZodPromise:return tP(e.type._def,n);case s.ZodNaN:case s.ZodNever:return{not:{}};case s.ZodEffects:return function(e,t){return"input"===t.effectStrategy?tP(e.schema._def,t):{}}(e,n);case s.ZodAny:case s.ZodUnknown:return{};case s.ZodDefault:return function(e,t){return{...tP(e.innerType._def,t),default:e.defaultValue()}}(e,n);case s.ZodBranded:return ty(e,n);case s.ZodReadonly:return t$(e,n);case s.ZodCatch:return t_(e,n);case s.ZodPipeline:return tN(e,n);case s.ZodFunction:case s.ZodVoid:case s.ZodSymbol:default:return}};function tP(e,t,n=!1){var r;let i=t.seen.get(e);if(t.override){let o=null==(r=t.override)?void 0:r.call(t,e,t,i,n);if(o!==tf)return o}if(i&&!n){let e=tM(i,t);if(void 0!==e)return e}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let a=tR(e,e.typeName,t),s="function"==typeof a?tP(a(),t):a;if(s&&tU(e,t,s),t.postProcess){let n=t.postProcess(s,e,t);return o.jsonSchema=s,n}return o.jsonSchema=s,s}var tM=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:th(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},tU=(e,t,n)=>(e.description&&(n.description=e.description),n),tZ=e=>{let t=tg(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}},tq=(e,t)=>{var n;let r=tZ(t),i="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>{var i;return{...e,[t]:null!=(i=tP(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0))?i:{}}},{}):void 0,o="string"==typeof t?t:(null==t?void 0:t.nameStrategy)==="title"||null==t?void 0:t.name,a=null!=(n=tP(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1))?n:{},s="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(a.title=s);let l=void 0===o?i?{...a,[r.definitionPath]:i}:a:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...i,[o]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l};function tL(e,t){var n,r;if("_zod"in e){let r=null!=(n=null==t?void 0:t.useReferences)&&n;return tF(()=>p.blZ(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async t=>{let n=await p.bpZ(e,t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}let i=null!=(r=null==t?void 0:t.useReferences)&&r;return tF(()=>tq(e,{$refStrategy:i?"root":"none"}),{validate:async t=>{let n=await e.safeParseAsync(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}var tD=Symbol.for("vercel.ai.schema");function tB(e){let t;return()=>(null==t&&(t=e()),t)}function tF(e,{validate:t}={}){return{[tD]:!0,_type:void 0,[e4]:!0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}function tV(e){return null==e?tF({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&tD in e&&!0===e[tD]&&"jsonSchema"in e&&"validate"in e?e:"function"==typeof e?e():tL(e)}var{btoa:tH,atob:tG}=globalThis;function tW(e){let t=tG(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function tK(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return tH(t)}function tJ(e){return e instanceof Uint8Array?tK(e):e}function tQ(e){return null==e?void 0:e.replace(/\/$/,"")}async function*tY({execute:e,input:t,options:n}){let r=e(t,n);if(null!=r&&"function"==typeof r[Symbol.asyncIterator]){let e;for await(let t of r)e=t,yield{type:"preliminary",output:t};yield{type:"final",output:e}}else yield{type:"final",output:await r}}},83794:(e,t,n)=>{"use strict";n.d(t,{u:()=>Q});var r,i,o="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},a="1.9.0",s=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,l=function(e){var t=new Set([e]),n=new Set,r=e.match(s);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=i.prerelease)return function(t){return t===e};function o(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(s);if(!r)return o(e);var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease||i.major!==a.major)return o(e);if(0===i.major)return i.minor===a.minor&&i.patch<=a.patch?(t.add(e),!0):o(e);return i.minor<=a.minor?(t.add(e),!0):o(e)}}(a),u=Symbol.for("opentelemetry.js.api."+a.split(".")[0]);function c(e,t,n,r){void 0===r&&(r=!1);var i,s=o[u]=null!=(i=o[u])?i:{version:a};if(!r&&s[e]){var l=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(l.stack||l.message),!1}if(s.version!==a){var l=Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+a);return n.error(l.stack||l.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+a+"."),!0}function d(e){var t,n,r=null==(t=o[u])?void 0:t.version;if(r&&l(r))return null==(n=o[u])?void 0:n[e]}function p(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+a+".");var n=o[u];n&&delete n[e]}var h=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},m=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},g=function(){function e(){}return e.prototype.active=function(){return h},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,m([n],f(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},_=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},v=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("verbose",this._namespace,e)},e}();function b(e,t,n){var r=d("diag");if(r)return n.unshift(t),r[e].apply(r,_([],y(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}));var z=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},w=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},k=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=d("diag");if(r)return r[e].apply(r,w([],z(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:r.INFO}),e===t){var i,o,a,s=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(i=s.stack)?i:s.message),!1}"number"==typeof n&&(n={logLevel:n});var l=d("diag"),u=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<r.NONE?e=r.NONE:e>r.ALL&&(e=r.ALL),t=t||{},{error:n("error",r.ERROR),warn:n("warn",r.WARN),info:n("info",r.INFO),debug:n("debug",r.DEBUG),verbose:n("verbose",r.VERBOSE)}}(null!=(o=n.logLevel)?o:r.INFO,e);if(l&&!n.suppressOverrideMessage){var p=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),u.warn("Current logger will overwrite one already registered from "+p)}return c("diag",u,t,!0)},t.disable=function(){p("diag",t)},t.createComponentLogger=function(e){return new v(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),x=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},I=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},T="context",j=new g,E=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return c(T,e,k.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,I([e,t,n],x(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return d(T)||j},e.prototype.disable=function(){this._getContextManager().disable(),p(T,k.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(i||(i={}));var S="0000000000000000",C="00000000000000000000000000000000",O={traceId:C,spanId:S,traceFlags:i.NONE},A=function(){function e(e){void 0===e&&(e=O),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),N=Symbol.for("OpenTelemetry Context Key SPAN");function $(e){return e.getValue(N)||void 0}function R(){return $(E.getInstance().active())}function P(e,t){return e.setValue(N,t)}function M(e){return e.deleteValue(N)}function U(e,t){return P(e,new A(t))}function Z(e){var t;return null==(t=$(e))?void 0:t.spanContext()}var q=/^([0-9a-f]{32})$/i,L=/^[0-9a-f]{16}$/i;function D(e){var t,n;return t=e.traceId,q.test(t)&&t!==C&&(n=e.spanId,L.test(n)&&n!==S)}function B(e){return new A(e)}var F=E.getInstance(),V=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=F.active()),null==t?void 0:t.root)return new A;var r,i=n&&Z(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&D(i)?new A(i):new A},e.prototype.startActiveSpan=function(e,t,n,r){if(!(arguments.length<2)){2==arguments.length?a=t:3==arguments.length?(i=t,a=n):(i=t,o=n,a=r);var i,o,a,s=null!=o?o:F.active(),l=this.startSpan(e,i,s),u=P(s,l);return F.with(u,a,void 0,l)}},e}(),H=new V,G=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):H},e}(),W=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new V},e}()),K=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!=(r=this.getDelegateTracer(e,t,n))?r:new G(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:W},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},e}(),J="trace",Q=(function(){function e(){this._proxyTracerProvider=new K,this.wrapSpanContext=B,this.isSpanContextValid=D,this.deleteSpan=M,this.getSpan=$,this.getActiveSpan=R,this.getSpanContext=Z,this.setSpan=P,this.setSpanContext=U}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=c(J,this._proxyTracerProvider,k.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return d(J)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){p(J,k.instance()),this._proxyTracerProvider=new K},e})().getInstance()},83908:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},85706:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},85958:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},93385:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},93425:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},93765:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,p=5960464477539062e-23*(23===i),h=r?0:o-1,f=r?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=p/l:t+=p*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=f,a/=256,u-=8);e[n+h-f]|=128*m}},95125:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(98889).A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])}}]);