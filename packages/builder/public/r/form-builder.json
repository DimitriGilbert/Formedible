{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-builder",
  "type": "registry:component",
  "title": "Form Builder",
  "description": "A visual form builder component for creating forms with drag-and-drop interface",
  "dependencies": [
    "@tanstack/react-form",
    "@radix-ui/react-accordion",
    "@radix-ui/react-checkbox",
    "@radix-ui/react-dialog",
    "@radix-ui/react-label",
    "@radix-ui/react-popover",
    "@radix-ui/react-progress",
    "@radix-ui/react-radio-group",
    "@radix-ui/react-select",
    "@radix-ui/react-slider",
    "@radix-ui/react-slot",
    "@radix-ui/react-switch",
    "@radix-ui/react-tabs",
    "lucide-react",
    "zod"
  ],
  "registryDependencies": [
    "button",
    "input",
    "textarea",
    "select",
    "checkbox",
    "switch",
    "label",
    "card",
    "tabs",
    "accordion",
    "dialog",
    "popover",
    "progress",
    "radio-group",
    "slider",
    "badge",
    "alert",
    "skeleton",
    "https://formedible.dev/r/use-formedible.json"
  ],
  "files": [
    {
      "path": "src/components/formedible/builder/form-builder.tsx",
      "content": "\"use client\";\nimport React, { useState, useCallback } from \"react\";\nimport { useFormedible } from \"@/hooks/use-formedible\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Plus,\n  Eye,\n  Code,\n  Settings,\n  Download,\n  Upload,\n  Trash2,\n  Copy,\n  Move,\n  Edit,\n  FileText,\n} from \"lucide-react\";\nimport { z } from \"zod\";\nimport { CodeBlock } from \"@/components/ui/code-block\";\nimport { FieldConfigurator } from \"./field-configurator\";\nimport { FormPreview } from \"./form-preview\";\n\n// Types for the form builder\ninterface FormField {\n  id: string;\n  name: string;\n  type: string;\n  label: string;\n  placeholder?: string;\n  description?: string;\n  required?: boolean;\n  options?: Array<{ value: string; label: string }>;\n  validation?: any;\n  page?: number;\n  group?: string;\n  section?: {\n    title: string;\n    description?: string;\n    collapsible?: boolean;\n    defaultExpanded?: boolean;\n  };\n  help?: {\n    text?: string;\n    tooltip?: string;\n    position?: \"top\" | \"bottom\" | \"left\" | \"right\";\n    link?: { url: string; text: string };\n  };\n  inlineValidation?: {\n    enabled?: boolean;\n    debounceMs?: number;\n    showSuccess?: boolean;\n  };\n  // Field-specific configs\n  arrayConfig?: any;\n  datalist?: any;\n  multiSelectConfig?: any;\n  colorConfig?: any;\n  ratingConfig?: any;\n  phoneConfig?: any;\n}\n\ninterface FormConfiguration {\n  title: string;\n  description?: string;\n  fields: FormField[];\n  pages: Array<{\n    page: number;\n    title: string;\n    description?: string;\n  }>;\n  settings: {\n    submitLabel: string;\n    nextLabel: string;\n    previousLabel: string;\n    showProgress: boolean;\n    allowPageNavigation: boolean;\n    resetOnSubmit: boolean;\n  };\n}\n\nconst FIELD_TYPES = [\n  { value: \"text\", label: \"Text Input\", icon: \"üìù\" },\n  { value: \"email\", label: \"Email\", icon: \"üìß\" },\n  { value: \"password\", label: \"Password\", icon: \"üîí\" },\n  { value: \"textarea\", label: \"Textarea\", icon: \"üìÑ\" },\n  { value: \"number\", label: \"Number\", icon: \"üî¢\" },\n  { value: \"select\", label: \"Select\", icon: \"üìã\" },\n  { value: \"radio\", label: \"Radio Group\", icon: \"‚ö™\" },\n  { value: \"multiSelect\", label: \"Multi-Select\", icon: \"‚òëÔ∏è\" },\n  { value: \"checkbox\", label: \"Checkbox\", icon: \"‚úÖ\" },\n  { value: \"switch\", label: \"Switch\", icon: \"üîò\" },\n  { value: \"date\", label: \"Date Picker\", icon: \"üìÖ\" },\n  { value: \"slider\", label: \"Slider\", icon: \"üéöÔ∏è\" },\n  { value: \"rating\", label: \"Rating\", icon: \"‚≠ê\" },\n  { value: \"colorPicker\", label: \"Color Picker\", icon: \"üé®\" },\n  { value: \"phone\", label: \"Phone Number\", icon: \"üìû\" },\n  { value: \"file\", label: \"File Upload\", icon: \"üìé\" },\n  { value: \"array\", label: \"Array Field\", icon: \"üìö\" },\n];\n\nexport const FormBuilder: React.FC = () => {\n  const [formConfig, setFormConfig] = useState<FormConfiguration>({\n    title: \"My Form\",\n    description: \"A form built with Formedible\",\n    fields: [],\n    pages: [{ page: 1, title: \"Page 1\", description: \"First page\" }],\n    settings: {\n      submitLabel: \"Submit\",\n      nextLabel: \"Next\",\n      previousLabel: \"Previous\",\n      showProgress: true,\n      allowPageNavigation: false,\n      resetOnSubmit: false,\n    },\n  });\n\n  const [selectedFieldId, setSelectedFieldId] = useState<string | null>(null);\n  const [selectedPageId, setSelectedPageId] = useState<number | null>(null);\n  const [editingPageId, setEditingPageId] = useState<number | null>(null);\n  const [activeTab, setActiveTab] = useState<string>(\"builder\");\n  const [previewMode, setPreviewMode] = useState<\n    \"desktop\" | \"tablet\" | \"mobile\"\n  >(\"desktop\");\n\n  // Form configuration form using formedible\n  const configFormSchema = z.object({\n    title: z.string().min(1, \"Title is required\"),\n    description: z.string().optional(),\n  });\n\n  const { Form: ConfigForm } = useFormedible({\n    schema: configFormSchema,\n    fields: [\n      {\n        name: \"title\",\n        type: \"text\",\n        label: \"Form Title\",\n        placeholder: \"Enter form title\",\n      },\n      {\n        name: \"description\",\n        type: \"textarea\",\n        label: \"Description\",\n        placeholder: \"Enter form description\",\n      },\n    ],\n    formOptions: {\n      defaultValues: {\n        title: formConfig.title,\n        description: formConfig.description || \"\",\n      },\n      onChange: ({ value }) => {\n        setFormConfig(prev => ({\n          ...prev,\n          title: value.title,\n          description: value.description,\n        }));\n      },\n    },\n    showSubmitButton: false,\n  });\n\n  // Page editing form using formedible\n  const pageFormSchema = z.object({\n    title: z.string().min(1, \"Page title is required\"),\n    description: z.string().optional(),\n  });\n\n  const { Form: PageForm } = useFormedible({\n    schema: pageFormSchema,\n    fields: [\n      {\n        name: \"title\",\n        type: \"text\",\n        label: \"Page Title\",\n        placeholder: \"Enter page title\",\n      },\n      {\n        name: \"description\",\n        type: \"textarea\",\n        label: \"Description (optional)\",\n        placeholder: \"Enter page description\",\n      },\n    ],\n    formOptions: {\n      defaultValues: editingPageId ? {\n        title: formConfig.pages.find(p => p.page === editingPageId)?.title || \"\",\n        description: formConfig.pages.find(p => p.page === editingPageId)?.description || \"\",\n      } : { title: \"\", description: \"\" },\n      onChange: ({ value }) => {\n        if (editingPageId) {\n          setFormConfig(prev => ({\n            ...prev,\n            pages: prev.pages.map(p =>\n              p.page === editingPageId\n                ? { ...p, title: value.title, description: value.description }\n                : p\n            ),\n          }));\n        }\n      },\n    },\n    showSubmitButton: false,\n  });\n\n  // Add a new field\n  const addField = useCallback(\n    (type: string) => {\n      const newField: FormField = {\n        id: `field_${Date.now()}`,\n        name: `field_${formConfig.fields.length + 1}`,\n        type,\n        label: `${\n          FIELD_TYPES.find((t) => t.value === type)?.label || type\n        } Field`,\n        required: false,\n        page: selectedPageId || 1,\n      };\n\n      setFormConfig((prev) => ({\n        ...prev,\n        fields: [...prev.fields, newField],\n      }));\n\n      setSelectedFieldId(newField.id);\n    },\n    [formConfig.fields.length, selectedPageId]\n  );\n\n  // Update a field\n  const updateField = useCallback(\n    (fieldId: string, updates: Partial<FormField>) => {\n      setFormConfig((prev) => ({\n        ...prev,\n        fields: prev.fields.map((field) =>\n          field.id === fieldId ? { ...field, ...updates } : field\n        ),\n      }));\n    },\n    []\n  );\n\n  // Delete a field\n  const deleteField = useCallback((fieldId: string) => {\n    setFormConfig((prev) => ({\n      ...prev,\n      fields: prev.fields.filter((field) => field.id !== fieldId),\n    }));\n    setSelectedFieldId(null);\n  }, []);\n\n  // Duplicate a field\n  const duplicateField = useCallback(\n    (fieldId: string) => {\n      const field = formConfig.fields.find((f) => f.id === fieldId);\n      if (field) {\n        const newField: FormField = {\n          ...field,\n          id: `field_${Date.now()}`,\n          name: `${field.name}_copy`,\n          label: `${field.label} (Copy)`,\n        };\n        setFormConfig((prev) => ({\n          ...prev,\n          fields: [...prev.fields, newField],\n        }));\n        setSelectedFieldId(newField.id);\n      }\n    },\n    [formConfig.fields]\n  );\n\n  // Generate formedible configuration\n  const generateFormedibleConfig = useCallback(() => {\n    const schemaFields: Record<string, any> = {};\n\n    formConfig.fields.forEach((field) => {\n      let fieldSchema: any;\n\n      // Create appropriate schema based on field type\n      switch (field.type) {\n        case \"number\":\n        case \"slider\":\n        case \"rating\":\n          fieldSchema = z.number();\n          break;\n        case \"checkbox\":\n        case \"switch\":\n          fieldSchema = z.boolean();\n          break;\n        case \"date\":\n          fieldSchema = z.string(); // or z.date() if you parse the string\n          break;\n        case \"multiSelect\":\n        case \"array\":\n          fieldSchema = z.array(z.string());\n          break;\n        default:\n          fieldSchema = z.string();\n      }\n\n      if (field.required) {\n        if (\n          field.type === \"number\" ||\n          field.type === \"slider\" ||\n          field.type === \"rating\"\n        ) {\n          // For numbers, required means not null/undefined\n          fieldSchema = fieldSchema;\n        } else if (field.type === \"checkbox\" || field.type === \"switch\") {\n          fieldSchema = fieldSchema.refine((val: boolean) => val === true, {\n            message: `${field.label} is required`,\n          });\n        } else if (typeof fieldSchema.min === \"function\") {\n          fieldSchema = fieldSchema.min(1, `${field.label} is required`);\n        }\n      } else {\n        fieldSchema = fieldSchema.optional();\n      }\n\n      schemaFields[field.name] = fieldSchema;\n    });\n    return {\n      schema: z.object(schemaFields),\n      fields: formConfig.fields.map((field) => ({\n        name: field.name,\n        type: field.type,\n        label: field.label,\n        placeholder: field.placeholder,\n        description: field.description,\n        page: field.page || 1,\n        group: field.group,\n        section: field.section,\n        help: field.help,\n        inlineValidation: field.inlineValidation,\n        ...(field.options && { options: field.options }),\n        ...(field.arrayConfig && { arrayConfig: field.arrayConfig }),\n        ...(field.datalist && { datalist: field.datalist }),\n        ...(field.multiSelectConfig && {\n          multiSelectConfig: field.multiSelectConfig,\n        }),\n        ...(field.colorConfig && { colorConfig: field.colorConfig }),\n        ...(field.ratingConfig && { ratingConfig: field.ratingConfig }),\n        ...(field.phoneConfig && { phoneConfig: field.phoneConfig }),\n      })),\n      pages: formConfig.pages,\n      submitLabel: formConfig.settings.submitLabel,\n      nextLabel: formConfig.settings.nextLabel,\n      previousLabel: formConfig.settings.previousLabel,\n      progress: formConfig.settings.showProgress\n        ? { showSteps: true, showPercentage: true }\n        : undefined,\n      formOptions: {\n        onSubmit: async ({ value }: any) => {\n          console.log(\"Form submitted:\", value);\n          alert(\"Form submitted! Check console for values.\");\n        },\n      },\n    };\n  }, [formConfig]);\n\n  // Export configuration as JSON\n  const exportConfig = useCallback(() => {\n    const config = generateFormedibleConfig();\n    const blob = new Blob([JSON.stringify(config, null, 2)], {\n      type: \"application/json\",\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${formConfig.title\n      .toLowerCase()\n      .replace(/\\s+/g, \"-\")}-form.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }, [formConfig, generateFormedibleConfig]);\n\n  // Import configuration from JSON\n  const importConfig = useCallback(() => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \".json\";\n    input.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) return;\n\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const config = JSON.parse(e.target?.result as string);\n\n          // Convert imported config back to form configuration\n          const importedFields: FormField[] = (config.fields || []).map(\n            (field: any, index: number) => ({\n              id: `field_${Date.now()}_${index}`,\n              name: field.name,\n              type: field.type,\n              label: field.label,\n              placeholder: field.placeholder,\n              description: field.description,\n              required: false, // Will be determined by schema\n              page: field.page || 1,\n              group: field.group,\n              section: field.section,\n              help: field.help,\n              inlineValidation: field.inlineValidation,\n              options: field.options,\n              arrayConfig: field.arrayConfig,\n              datalist: field.datalist,\n              multiSelectConfig: field.multiSelectConfig,\n              colorConfig: field.colorConfig,\n              ratingConfig: field.ratingConfig,\n              phoneConfig: field.phoneConfig,\n            })\n          );\n\n          setFormConfig({\n            title: \"Imported Form\",\n            description: \"Imported from JSON\",\n            fields: importedFields,\n            pages: config.pages || [\n              { page: 1, title: \"Page 1\", description: \"\" },\n            ],\n            settings: {\n              submitLabel: config.submitLabel || \"Submit\",\n              nextLabel: config.nextLabel || \"Next\",\n              previousLabel: config.previousLabel || \"Previous\",\n              showProgress: !!config.progress,\n              allowPageNavigation: false,\n              resetOnSubmit: false,\n            },\n          });\n        } catch (error) {\n          alert(\"Error importing configuration. Please check the file format.\");\n        }\n      };\n      reader.readAsText(file);\n    };\n    input.click();\n  }, []);\n\n  // Generate code preview\n  const generateCode = useCallback(() => {\n    const config = generateFormedibleConfig();\n    return `import { useFormedible } from 'formedible';\nimport { z } from 'zod';\n\nconst formConfig = ${JSON.stringify(config, null, 2)};\n\nexport const MyForm = () => {\n  const { Form } = useFormedible(formConfig);\n  \n  return <Form />;\n};`;\n  }, [generateFormedibleConfig]);\n\n  const selectedField = formConfig.fields.find((f) => f.id === selectedFieldId);\n\n  return (\n    <div className=\"w-full min-h-[800px] flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <h1 className=\"text-2xl font-bold\">Formedible Builder</h1>\n            <div className=\"text-foreground\">\n              Build forms with forms! üöÄ\n            </div>\n          </div>\n          <div className=\"ml-auto flex items-center space-x-4\">\n            <Button variant=\"secondary\" onClick={exportConfig}>\n              <Download className=\"h-4 w-4 mr-2\" />\n              Export\n            </Button>\n            <Button variant=\"secondary\" onClick={importConfig}>\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Import\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex min-h-0\">\n        {/* Sidebar - Field Types */}\n        <div className=\"w-72 border-r bg-card overflow-y-auto\">\n          <div className=\"p-6\">\n            <h3 className=\"font-semibold text-lg mb-6\">Field Types</h3>\n            <div className=\"grid grid-cols-1 gap-3\">\n              {FIELD_TYPES.map((fieldType) => (\n                <Button\n                  key={fieldType.value}\n                  variant=\"outline\"\n                  size=\"default\"\n                  className=\"justify-start h-auto p-4\"\n                  onClick={() => addField(fieldType.value)}\n                >\n                  <span className=\"mr-3 text-lg\">{fieldType.icon}</span>\n                  <span>{fieldType.label}</span>\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col\">\n          <Tabs\n            value={activeTab}\n            onValueChange={setActiveTab}\n            className=\"flex-1 flex flex-col\"\n          >\n            <TabsList className=\"w-full justify-start border-b rounded-none h-14 bg-card p-0\">\n              <TabsTrigger\n                value=\"builder\"\n                className=\"flex items-center gap-2 h-full px-6\"\n              >\n                <Settings className=\"h-4 w-4\" />\n                Builder\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"preview\"\n                className=\"flex items-center gap-2 h-full px-6\"\n              >\n                <Eye className=\"h-4 w-4\" />\n                Preview\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"code\"\n                className=\"flex items-center gap-2 h-full px-6\"\n              >\n                <Code className=\"h-4 w-4\" />\n                Code\n              </TabsTrigger>\n            </TabsList>\n\n            <div className=\"flex-1 min-h-0\">\n              <TabsContent value=\"builder\" className=\"h-full m-0\">\n                <div className=\"h-full flex min-h-0\">\n                  {/* Form Structure */}\n                  <div className=\"flex-1 p-4 overflow-y-auto min-h-0\">\n                    <div className=\"mx-auto space-y-4\">\n                      <Card className=\"hover:shadow-lg transition-shadow py-3 gap-2\">\n                        <CardHeader>\n                          <CardTitle className=\"text-xl\">Form Configuration</CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-2 p-4\">\n                          <ConfigForm />\n                        </CardContent>\n                      </Card>\n\n                      {/* Page Management */}\n                      <Card className=\"hover:shadow-lg transition-shadow gap-2\">\n                        <CardHeader>\n                          <CardTitle className=\"flex items-center justify-between text-xl\">\n                            Pages ({formConfig.pages.length})\n                            {selectedPageId && (\n                              <span className=\"text-sm font-normal text-primary\">\n                                Page {selectedPageId} selected\n                              </span>\n                            )}\n                            <Button\n                              onClick={() => {\n                                const newPageNumber =\n                                  Math.max(\n                                    ...formConfig.pages.map((p) => p.page)\n                                  ) + 1;\n                                setFormConfig((prev) => ({\n                                  ...prev,\n                                  pages: [\n                                    ...prev.pages,\n                                    {\n                                      page: newPageNumber,\n                                      title: `Page ${newPageNumber}`,\n                                      description: \"\",\n                                    },\n                                  ],\n                                }));\n                                setEditingPageId(newPageNumber);\n                              }}\n                            >\n                              <Plus className=\"h-4 w-4 mr-2\" />\n                              Add Page\n                            </Button>\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-2 p-4\">\n                          <div className=\"space-y-2\">\n                            {formConfig.pages.map((page, index) => (\n                              <div\n                                key={page.page}\n                                className={cn(\n                                  \"border rounded-lg transition-all cursor-pointer\",\n                                  selectedPageId === page.page\n                                    ? \"border-primary bg-primary/5 shadow-sm\"\n                                    : \"border-border hover:border-primary/50\",\n                                  editingPageId === page.page &&\n                                    \"ring-2 ring-primary/20\"\n                                )}\n                                onClick={() => {\n                                  if (editingPageId === page.page) return;\n                                  setSelectedPageId(\n                                    selectedPageId === page.page\n                                      ? null\n                                      : page.page\n                                  );\n                                }}\n                              >\n                                {editingPageId === page.page ? (\n                                  <div className=\"p-8 space-y-6\">\n                                    <PageForm />\n                                    <div className=\"flex items-center gap-3\">\n                                      <Button\n                                        onClick={() => setEditingPageId(null)}\n                                      >\n                                        Done\n                                      </Button>\n                                      <Button\n                                        variant=\"outline\"\n                                        onClick={() => setEditingPageId(null)}\n                                      >\n                                        Cancel\n                                      </Button>\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <div className=\"flex items-center justify-between p-8\">\n                                    <div className=\"flex items-center space-x-4\">\n                                      <FileText\n                                        className={cn(\n                                          \"h-5 w-5\",\n                                          selectedPageId === page.page\n                                            ? \"text-primary\"\n                                            : \"text-muted-foreground\"\n                                        )}\n                                      />\n                                      <div>\n                                        <div\n                                          className={cn(\n                                            \"font-medium text-lg\",\n                                            selectedPageId === page.page &&\n                                              \"text-primary\"\n                                          )}\n                                        >\n                                          {page.title}\n                                        </div>\n                                        {page.description && (\n                                          <div className=\"text-muted-foreground\">\n                                            {page.description}\n                                          </div>\n                                        )}\n                                        <div className=\"text-sm text-muted-foreground\">\n                                          {\n                                            formConfig.fields.filter(\n                                              (f) => (f.page || 1) === page.page\n                                            ).length\n                                          }{\" \"}\n                                          fields\n                                        </div>\n                                      </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                      <Button\n                                        variant=\"ghost\"\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setEditingPageId(page.page);\n                                        }}\n                                      >\n                                        <Edit className=\"h-4 w-4\" />\n                                      </Button>\n                                      {formConfig.pages.length > 1 && (\n                                        <Button\n                                          variant=\"ghost\"\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            if (\n                                              confirm(\n                                                `Delete ${page.title}? Fields on this page will be moved to Page 1.`\n                                              )\n                                            ) {\n                                              setFormConfig((prev) => {\n                                                const filteredPages =\n                                                  prev.pages.filter(\n                                                    (p) => p.page !== page.page\n                                                  );\n                                                const renumberedPages =\n                                                  filteredPages.map(\n                                                    (p, index) => ({\n                                                      ...p,\n                                                      page: index + 1,\n                                                    })\n                                                  );\n\n                                                const updatedFields =\n                                                  prev.fields.map((f) => {\n                                                    if (\n                                                      (f.page || 1) ===\n                                                      page.page\n                                                    ) {\n                                                      return { ...f, page: 1 };\n                                                    }\n                                                    if (\n                                                      (f.page || 1) > page.page\n                                                    ) {\n                                                      return {\n                                                        ...f,\n                                                        page: (f.page || 1) - 1,\n                                                      };\n                                                    }\n                                                    return f;\n                                                  });\n\n                                                return {\n                                                  ...prev,\n                                                  pages: renumberedPages,\n                                                  fields: updatedFields,\n                                                };\n                                              });\n                                              if (\n                                                selectedPageId === page.page\n                                              ) {\n                                                setSelectedPageId(null);\n                                              }\n                                            }\n                                          }}\n                                        >\n                                          <Trash2 className=\"h-4 w-4\" />\n                                        </Button>\n                                      )}\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        </CardContent>\n                      </Card>\n\n                      {/* Fields List */}\n                      <Card className=\"hover:shadow-lg transition-shadow gap-2\">\n                        <CardHeader>\n                          <CardTitle className=\"flex items-center justify-between text-xl\">\n                            {selectedPageId ? (\n                              <>\n                                {\n                                  formConfig.pages.find(\n                                    (p) => p.page === selectedPageId\n                                  )?.title\n                                }{\" \"}\n                                Fields\n                                <span className=\"text-sm font-normal text-muted-foreground\">\n                                  (\n                                  {\n                                    formConfig.fields.filter(\n                                      (f) => (f.page || 1) === selectedPageId\n                                    ).length\n                                  }{\" \"}\n                                  fields)\n                                </span>\n                              </>\n                            ) : (\n                              <>\n                                All Fields ({formConfig.fields.length})\n                                {formConfig.fields.length === 0 && (\n                                  <span className=\"text-sm font-normal text-muted-foreground\">\n                                    Add fields from the sidebar ‚Üí\n                                  </span>\n                                )}\n                              </>\n                            )}\n                          </CardTitle>\n                          {selectedPageId && (\n                            <p className=\"text-muted-foreground\">\n                              New fields will be added to this page. Click the\n                              page again to deselect.\n                            </p>\n                          )}\n                        </CardHeader>\n                        <CardContent className=\"space-y-2 p-4\">\n                          {(() => {\n                            const fieldsToShow = selectedPageId\n                              ? formConfig.fields.filter(\n                                  (f) => (f.page || 1) === selectedPageId\n                                )\n                              : formConfig.fields;\n\n                            if (fieldsToShow.length === 0) {\n                              return (\n                                <div className=\"text-center py-12 text-muted-foreground\">\n                                  <Plus className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                                  <p className=\"text-lg\">\n                                    {selectedPageId\n                                      ? `No fields on this page yet. Add some from the sidebar!`\n                                      : `No fields yet. Add some from the sidebar!`}\n                                  </p>\n                                </div>\n                              );\n                            }\n\n                            if (selectedPageId) {\n                              // Show only selected page fields in a simple list\n                              return (\n                                <div className=\"space-y-4\">\n                                  {fieldsToShow.map((field, index) => (\n                                    <div\n                                      key={field.id}\n                                      className={cn(\n                                        \"flex items-center justify-between p-6 border rounded-lg cursor-pointer transition-colors hover:shadow-md\",\n                                        selectedFieldId === field.id\n                                          ? \"border-primary bg-primary/5\"\n                                          : \"border-border hover:border-primary/50\"\n                                      )}\n                                      onClick={() =>\n                                        setSelectedFieldId(field.id)\n                                      }\n                                    >\n                                      <div className=\"flex items-center space-x-4\">\n                                        <span className=\"text-2xl\">\n                                          {FIELD_TYPES.find(\n                                            (t) => t.value === field.type\n                                          )?.icon || \"üìù\"}\n                                        </span>\n                                        <div>\n                                          <div className=\"font-medium text-lg\">\n                                            {field.label}\n                                          </div>\n                                          <div className=\"text-muted-foreground\">\n                                            {field.type} ‚Ä¢ {field.name}\n                                          </div>\n                                        </div>\n                                      </div>\n                                      <div className=\"flex items-center space-x-2\">\n                                        <Button\n                                          variant=\"ghost\"\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            duplicateField(field.id);\n                                          }}\n                                        >\n                                          <Copy className=\"h-4 w-4\" />\n                                        </Button>\n                                        <Button\n                                          variant=\"ghost\"\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            deleteField(field.id);\n                                          }}\n                                        >\n                                          <Trash2 className=\"h-4 w-4\" />\n                                        </Button>\n                                      </div>\n                                    </div>\n                                  ))}\n                                </div>\n                              );\n                            } else {\n                              // Show all fields grouped by page\n                              return (\n                                <div className=\"space-y-8\">\n                                  {formConfig.pages.map((page) => {\n                                    const pageFields = formConfig.fields.filter(\n                                      (f) => (f.page || 1) === page.page\n                                    );\n                                    return (\n                                      <div key={page.page}>\n                                        <div className=\"flex items-center gap-3 mb-4\">\n                                          <FileText className=\"h-5 w-5 text-muted-foreground\" />\n                                          <span className=\"font-medium text-lg\">\n                                            {page.title}\n                                          </span>\n                                          <span className=\"text-sm text-muted-foreground\">\n                                            ({pageFields.length} fields)\n                                          </span>\n                                        </div>\n                                        <div className=\"space-y-4 ml-8\">\n                                          {pageFields.length === 0 ? (\n                                            <div className=\"text-muted-foreground italic\">\n                                              No fields on this page\n                                            </div>\n                                          ) : (\n                                            pageFields.map((field, index) => (\n                                              <div\n                                                key={field.id}\n                                                className={cn(\n                                                  \"flex items-center justify-between p-6 border rounded-lg cursor-pointer transition-colors hover:shadow-md\",\n                                                  selectedFieldId === field.id\n                                                    ? \"border-primary bg-primary/5\"\n                                                    : \"border-border hover:border-primary/50\"\n                                                )}\n                                                onClick={() =>\n                                                  setSelectedFieldId(field.id)\n                                                }\n                                              >\n                                                <div className=\"flex items-center space-x-4\">\n                                                  <span className=\"text-2xl\">\n                                                    {FIELD_TYPES.find(\n                                                      (t) =>\n                                                        t.value === field.type\n                                                    )?.icon || \"üìù\"}\n                                                  </span>\n                                                  <div>\n                                                    <div className=\"font-medium text-lg\">\n                                                      {field.label}\n                                                    </div>\n                                                    <div className=\"text-muted-foreground\">\n                                                      {field.type} ‚Ä¢{\" \"}\n                                                      {field.name}\n                                                    </div>\n                                                  </div>\n                                                </div>\n                                                <div className=\"flex items-center space-x-2\">\n                                                  <Button\n                                                    variant=\"ghost\"\n                                                    onClick={(e) => {\n                                                      e.stopPropagation();\n                                                      duplicateField(field.id);\n                                                    }}\n                                                  >\n                                                    <Copy className=\"h-4 w-4\" />\n                                                  </Button>\n                                                  <Button\n                                                    variant=\"ghost\"\n                                                    onClick={(e) => {\n                                                      e.stopPropagation();\n                                                      deleteField(field.id);\n                                                    }}\n                                                  >\n                                                    <Trash2 className=\"h-4 w-4\" />\n                                                  </Button>\n                                                </div>\n                                              </div>\n                                            ))\n                                          )}\n                                        </div>\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              );\n                            }\n                          })()}\n                        </CardContent>\n                      </Card>\n                    </div>\n                  </div>\n\n                  {/* Field Configuration Panel */}\n                  {selectedField && (\n                    <div className=\"w-96 border-l bg-card overflow-y-auto min-h-0\">\n                      <div className=\"p-6\">\n                        <h3 className=\"font-semibold text-lg mb-6\">Configure Field</h3>\n                        <FieldConfigurator\n                          field={selectedField}\n                          onUpdate={updateField}\n                          availablePages={formConfig.pages.map((p) => p.page)}\n                        />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </TabsContent>\n\n              <TabsContent\n                value=\"preview\"\n                className=\"h-full m-0 p-8 overflow-y-auto min-h-0\"\n              >\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"mb-8 flex items-center justify-between\">\n                    <h2 className=\"text-2xl font-bold\">Live Preview</h2>\n                    <div className=\"flex items-center space-x-3\">\n                      {([\"desktop\", \"tablet\", \"mobile\"] as const).map(\n                        (mode) => (\n                          <Button\n                            key={mode}\n                            variant={\n                              previewMode === mode ? \"default\" : \"outline\"\n                            }\n                            onClick={() => setPreviewMode(mode)}\n                          >\n                            {mode === \"desktop\" && \"üñ•Ô∏è\"}\n                            {mode === \"tablet\" && \"üì±\"}\n                            {mode === \"mobile\" && \"üì±\"}\n                            <span className=\"ml-2 capitalize\">{mode}</span>\n                          </Button>\n                        )\n                      )}\n                    </div>\n                  </div>\n                  <div\n                    className={cn(\n                      \"mx-auto transition-all\",\n                      previewMode === \"mobile\"\n                        ? \"max-w-sm\"\n                        : previewMode === \"tablet\"\n                        ? \"max-w-md\"\n                        : \"max-w-4xl\"\n                    )}\n                  >\n                    <FormPreview config={formConfig} />\n                  </div>\n                </div>\n              </TabsContent>\n\n              <TabsContent\n                value=\"code\"\n                className=\"h-full m-0 p-8 overflow-y-auto min-h-0\"\n              >\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"mb-8\">\n                    <h2 className=\"text-2xl font-bold\">Generated Code</h2>\n                    <p className=\"text-muted-foreground text-lg\">\n                      Copy this code to use your form in your application\n                    </p>\n                  </div>\n                  <CodeBlock\n                    code={generateCode()}\n                    language=\"tsx\"\n                    title=\"MyForm.tsx\"\n                    showCopyButton={true}\n                    showLineNumbers={true}\n                  />\n                </div>\n              </TabsContent>\n            </div>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n};",
      "type": "registry:component",
      "target": "components/formedible/builder/form-builder.tsx"
    },
    {
      "path": "src/components/formedible/builder/field-configurator.tsx",
      "content": "'use client';\nimport React, { useCallback, useMemo } from 'react';\nimport { useFormedible } from '@/hooks/use-formedible';\nimport { z } from 'zod';\n\ninterface FormField {\n  id: string;\n  name: string;\n  type: string;\n  label: string;\n  placeholder?: string;\n  description?: string;\n  required?: boolean;\n  options?: Array<{ value: string; label: string }>;\n  validation?: any;\n  page?: number;\n  group?: string;\n  section?: {\n    title: string;\n    description?: string;\n    collapsible?: boolean;\n    defaultExpanded?: boolean;\n  };\n  help?: {\n    text?: string;\n    tooltip?: string;\n    position?: 'top' | 'bottom' | 'left' | 'right';\n    link?: { url: string; text: string };\n  };\n  inlineValidation?: {\n    enabled?: boolean;\n    debounceMs?: number;\n    showSuccess?: boolean;\n  };\n  arrayConfig?: any;\n  datalist?: any;\n  multiSelectConfig?: any;\n  colorConfig?: any;\n  ratingConfig?: any;\n  phoneConfig?: any;\n}\n\ninterface FieldConfiguratorProps {\n  field: FormField;\n  onUpdate: (fieldId: string, updates: Partial<FormField>) => void;\n  availablePages: number[];\n}\n\nexport const FieldConfigurator: React.FC<FieldConfiguratorProps> = ({\n  field,\n  onUpdate,\n  availablePages,\n}) => {\n  const updateField = useCallback((updates: Partial<FormField>) => {\n    onUpdate(field.id, updates);\n  }, [field.id, onUpdate]);\n\n  // Base configuration fields\n  const baseFields = useMemo(() => [\n    {\n      name: 'name',\n      type: 'text',\n      label: 'Field Name',\n      placeholder: 'e.g., firstName, email',\n      validation: z.string().min(1, 'Field name is required'),\n      help: {\n        text: 'Unique identifier for this field',\n        tooltip: 'Used as the key in form data'\n      }\n    },\n    {\n      name: 'label',\n      type: 'text',\n      label: 'Label',\n      placeholder: 'e.g., First Name, Email Address',\n      validation: z.string().min(1, 'Label is required'),\n    },\n    {\n      name: 'placeholder',\n      type: 'text',\n      label: 'Placeholder',\n      placeholder: 'e.g., Enter your name...',\n    },\n    {\n      name: 'description',\n      type: 'textarea',\n      label: 'Description',\n      placeholder: 'Optional description or help text',\n    },\n    {\n      name: 'required',\n      type: 'switch',\n      label: 'Required Field',\n      description: 'Make this field mandatory',\n    },\n    {\n      name: 'page',\n      type: 'select',\n      label: 'Page',\n      options: availablePages.map(p => ({ value: p.toString(), label: `Page ${p}` })),\n      description: 'Which page should this field appear on?',\n    },\n  ], [availablePages]);\n\n  // Advanced configuration fields\n  const advancedFields = useMemo(() => [\n    {\n      name: 'group',\n      type: 'text',\n      label: 'Group',\n      placeholder: 'e.g., personal, contact, preferences',\n      description: 'Group related fields together',\n      help: {\n        text: 'Fields with the same group will be visually grouped',\n        tooltip: 'Use groups to organize related fields'\n      }\n    },\n    {\n      name: 'section.title',\n      type: 'text',\n      label: 'Section Title',\n      placeholder: 'e.g., Personal Information',\n      description: 'Create a new section with this title',\n    },\n    {\n      name: 'section.description',\n      type: 'text',\n      label: 'Section Description',\n      placeholder: 'Brief description of this section',\n    },\n    {\n      name: 'section.collapsible',\n      type: 'switch',\n      label: 'Collapsible Section',\n      description: 'Allow users to collapse/expand this section',\n    },\n    {\n      name: 'section.defaultExpanded',\n      type: 'switch',\n      label: 'Default Expanded',\n      description: 'Section starts expanded',\n      conditional: (values: any) => values['section.collapsible'],\n    },\n  ], []);\n\n  // Help & validation fields\n  const helpFields = useMemo(() => [\n    {\n      name: 'help.text',\n      type: 'text',\n      label: 'Help Text',\n      placeholder: 'Additional help information',\n      description: 'Shown below the field',\n    },\n    {\n      name: 'help.tooltip',\n      type: 'text',\n      label: 'Tooltip',\n      placeholder: 'Tooltip text on hover',\n      description: 'Shows on hover/focus',\n    },\n    {\n      name: 'help.position',\n      type: 'select',\n      label: 'Tooltip Position',\n      options: [\n        { value: 'top', label: 'Top' },\n        { value: 'bottom', label: 'Bottom' },\n        { value: 'left', label: 'Left' },\n        { value: 'right', label: 'Right' },\n      ],\n      conditional: (values: any) => values['help.tooltip'],\n    },\n    {\n      name: 'help.link.text',\n      type: 'text',\n      label: 'Help Link Text',\n      placeholder: 'e.g., Learn more',\n    },\n    {\n      name: 'help.link.url',\n      type: 'text',\n      label: 'Help Link URL',\n      placeholder: 'https://example.com/help',\n      conditional: (values: any) => values['help.link.text'],\n    },\n    {\n      name: 'inlineValidation.enabled',\n      type: 'switch',\n      label: 'Enable Inline Validation',\n      description: 'Show validation feedback as user types',\n    },\n    {\n      name: 'inlineValidation.showSuccess',\n      type: 'switch',\n      label: 'Show Success State',\n      description: 'Show checkmark when valid',\n      conditional: (values: any) => values['inlineValidation.enabled'],\n    },\n    {\n      name: 'inlineValidation.debounceMs',\n      type: 'number',\n      label: 'Validation Delay (ms)',\n      placeholder: '300',\n      description: 'Delay before validating',\n      conditional: (values: any) => values['inlineValidation.enabled'],\n    },\n  ], []);\n\n  // Field-specific configuration\n  const getFieldSpecificConfig = useCallback(() => {\n    switch (field.type) {\n      case 'select':\n      case 'radio':\n        return [\n          {\n            name: 'options',\n            type: 'array',\n            label: 'Options',\n            arrayConfig: {\n              itemType: 'text',\n              itemLabel: 'Option',\n              itemPlaceholder: 'Option value',\n              minItems: 1,\n              addButtonLabel: 'Add Option',\n              removeButtonLabel: 'Remove',\n            },\n            validation: z.array(z.string()).min(1, 'At least one option is required'),\n          },\n        ];\n\n      case 'multiSelect':\n        return [\n          {\n            name: 'options',\n            type: 'array',\n            label: 'Options',\n            arrayConfig: {\n              itemType: 'text',\n              itemLabel: 'Option',\n              minItems: 1,\n              addButtonLabel: 'Add Option',\n            },\n            validation: z.array(z.string()).min(1, 'At least one option is required'),\n          },\n          {\n            name: 'multiSelectConfig.maxSelections',\n            type: 'number',\n            label: 'Max Selections',\n            placeholder: '5',\n            description: 'Maximum number of selections allowed',\n          },\n          {\n            name: 'multiSelectConfig.searchable',\n            type: 'switch',\n            label: 'Searchable',\n            description: 'Allow users to search options',\n          },\n          {\n            name: 'multiSelectConfig.creatable',\n            type: 'switch',\n            label: 'Allow Creating New Options',\n            description: 'Users can add custom options',\n          },\n        ];\n\n      case 'rating':\n        return [\n          {\n            name: 'ratingConfig.max',\n            type: 'number',\n            label: 'Maximum Rating',\n            placeholder: '5',\n            description: 'Highest rating value',\n          },\n          {\n            name: 'ratingConfig.allowHalf',\n            type: 'switch',\n            label: 'Allow Half Ratings',\n            description: 'Enable half-star ratings',\n          },\n          {\n            name: 'ratingConfig.icon',\n            type: 'select',\n            label: 'Icon Type',\n            options: [\n              { value: 'star', label: 'Star' },\n              { value: 'heart', label: 'Heart' },\n              { value: 'thumbs', label: 'Thumbs Up' },\n            ],\n          },\n          {\n            name: 'ratingConfig.size',\n            type: 'select',\n            label: 'Icon Size',\n            options: [\n              { value: 'sm', label: 'Small' },\n              { value: 'md', label: 'Medium' },\n              { value: 'lg', label: 'Large' },\n            ],\n          },\n          {\n            name: 'ratingConfig.showValue',\n            type: 'switch',\n            label: 'Show Numeric Value',\n            description: 'Display the rating number',\n          },\n        ];\n\n      case 'colorPicker':\n        return [\n          {\n            name: 'colorConfig.format',\n            type: 'select',\n            label: 'Color Format',\n            options: [\n              { value: 'hex', label: 'HEX (#FF0000)' },\n              { value: 'rgb', label: 'RGB (rgb(255, 0, 0))' },\n              { value: 'hsl', label: 'HSL (hsl(0, 100%, 50%))' },\n            ],\n          },\n          {\n            name: 'colorConfig.showPreview',\n            type: 'switch',\n            label: 'Show Color Preview',\n            description: 'Display selected color preview',\n          },\n          {\n            name: 'colorConfig.allowCustom',\n            type: 'switch',\n            label: 'Allow Custom Colors',\n            description: 'Users can enter custom color values',\n          },\n          {\n            name: 'colorConfig.presetColors',\n            type: 'array',\n            label: 'Preset Colors',\n            arrayConfig: {\n              itemType: 'text',\n              itemLabel: 'Color',\n              itemPlaceholder: '#FF0000',\n              addButtonLabel: 'Add Color',\n            },\n            description: 'Predefined color options',\n          },\n        ];\n\n      case 'phone':\n        return [\n          {\n            name: 'phoneConfig.defaultCountry',\n            type: 'select',\n            label: 'Default Country',\n            options: [\n              { value: 'US', label: 'United States' },\n              { value: 'CA', label: 'Canada' },\n              { value: 'GB', label: 'United Kingdom' },\n              { value: 'FR', label: 'France' },\n              { value: 'DE', label: 'Germany' },\n              { value: 'AU', label: 'Australia' },\n              { value: 'JP', label: 'Japan' },\n            ],\n          },\n          {\n            name: 'phoneConfig.format',\n            type: 'select',\n            label: 'Phone Format',\n            options: [\n              { value: 'national', label: 'National ((555) 123-4567)' },\n              { value: 'international', label: 'International (+1 555 123 4567)' },\n            ],\n          },\n        ];\n\n      case 'array':\n        return [\n          {\n            name: 'arrayConfig.itemType',\n            type: 'select',\n            label: 'Item Type',\n            options: [\n              { value: 'text', label: 'Text' },\n              { value: 'email', label: 'Email' },\n              { value: 'number', label: 'Number' },\n              { value: 'phone', label: 'Phone' },\n              { value: 'url', label: 'URL' },\n            ],\n          },\n          {\n            name: 'arrayConfig.itemLabel',\n            type: 'text',\n            label: 'Item Label',\n            placeholder: 'e.g., Email Address',\n          },\n          {\n            name: 'arrayConfig.minItems',\n            type: 'number',\n            label: 'Minimum Items',\n            placeholder: '0',\n          },\n          {\n            name: 'arrayConfig.maxItems',\n            type: 'number',\n            label: 'Maximum Items',\n            placeholder: '10',\n          },\n          {\n            name: 'arrayConfig.addButtonLabel',\n            type: 'text',\n            label: 'Add Button Text',\n            placeholder: 'Add Item',\n          },\n        ];\n\n      case 'text':\n      case 'email':\n      case 'url':\n        return [\n          {\n            name: 'datalist.options',\n            type: 'array',\n            label: 'Autocomplete Options',\n            arrayConfig: {\n              itemType: 'text',\n              itemLabel: 'Option',\n              addButtonLabel: 'Add Option',\n            },\n            description: 'Static autocomplete suggestions',\n          },\n        ];\n\n      case 'number':\n      case 'slider':\n        return [\n          {\n            name: 'min',\n            type: 'number',\n            label: 'Minimum Value',\n            placeholder: '0',\n          },\n          {\n            name: 'max',\n            type: 'number',\n            label: 'Maximum Value',\n            placeholder: '100',\n          },\n          {\n            name: 'step',\n            type: 'number',\n            label: 'Step',\n            placeholder: '1',\n            description: 'Increment/decrement step',\n          },\n        ];\n\n      default:\n        return [];\n    }\n  }, [field.type]);\n\n  // Convert nested object paths to flat form values\n  const getFormValues = useCallback(() => {\n    const values: any = {\n      name: field.name,\n      label: field.label,\n      placeholder: field.placeholder || '',\n      description: field.description || '',\n      required: field.required || false,\n      page: field.page?.toString() || '1',\n      group: field.group || '',\n    };\n\n    // Handle nested objects\n    if (field.section) {\n      values['section.title'] = field.section.title || '';\n      values['section.description'] = field.section.description || '';\n      values['section.collapsible'] = field.section.collapsible || false;\n      values['section.defaultExpanded'] = field.section.defaultExpanded || false;\n    }\n\n    if (field.help) {\n      values['help.text'] = field.help.text || '';\n      values['help.tooltip'] = field.help.tooltip || '';\n      values['help.position'] = field.help.position || 'top';\n      if (field.help.link) {\n        values['help.link.text'] = field.help.link.text || '';\n        values['help.link.url'] = field.help.link.url || '';\n      }\n    }\n\n    if (field.inlineValidation) {\n      values['inlineValidation.enabled'] = field.inlineValidation.enabled || false;\n      values['inlineValidation.showSuccess'] = field.inlineValidation.showSuccess || false;\n      values['inlineValidation.debounceMs'] = field.inlineValidation.debounceMs || 300;\n    }\n\n    // Handle field-specific configs\n    if (field.options) {\n      values.options = field.options.map(opt => typeof opt === 'string' ? opt : opt.value);\n    }\n\n    // Add field-specific config values\n    const configs = ['arrayConfig', 'multiSelectConfig', 'colorConfig', 'ratingConfig', 'phoneConfig', 'datalist'];\n    configs.forEach(configKey => {\n      const config = (field as any)[configKey];\n      if (config) {\n        Object.keys(config).forEach(key => {\n          values[`${configKey}.${key}`] = config[key];\n        });\n      }\n    });\n\n    return values;\n  }, [field]);\n\n  // Convert flat form values back to nested object\n  const handleFormChange = useCallback(({ value }: any) => {\n    const updates: Partial<FormField> = {\n      name: value.name,\n      label: value.label,\n      placeholder: value.placeholder || undefined,\n      description: value.description || undefined,\n      required: value.required,\n      page: parseInt(value.page) || 1,\n      group: value.group || undefined,\n    };\n\n    // Handle section\n    if (value['section.title']) {\n      updates.section = {\n        title: value['section.title'],\n        description: value['section.description'] || undefined,\n        collapsible: value['section.collapsible'] || false,\n        defaultExpanded: value['section.defaultExpanded'] || false,\n      };\n    }\n\n    // Handle help\n    if (value['help.text'] || value['help.tooltip'] || value['help.link.text']) {\n      updates.help = {\n        text: value['help.text'] || undefined,\n        tooltip: value['help.tooltip'] || undefined,\n        position: value['help.position'] || 'top',\n        link: value['help.link.text'] ? {\n          text: value['help.link.text'],\n          url: value['help.link.url'] || '',\n        } : undefined,\n      };\n    }\n\n    // Handle inline validation\n    if (value['inlineValidation.enabled']) {\n      updates.inlineValidation = {\n        enabled: value['inlineValidation.enabled'],\n        showSuccess: value['inlineValidation.showSuccess'],\n        debounceMs: value['inlineValidation.debounceMs'] || 300,\n      };\n    }\n\n    // Handle options\n    if (value.options) {\n      updates.options = value.options.map((opt: string) => ({ value: opt, label: opt }));\n    }\n\n    // Handle field-specific configs\n    const configKeys = ['arrayConfig', 'multiSelectConfig', 'colorConfig', 'ratingConfig', 'phoneConfig', 'datalist'];\n    configKeys.forEach(configKey => {\n      const configValues: any = {};\n      let hasValues = false;\n\n      Object.keys(value).forEach(key => {\n        if (key.startsWith(`${configKey}.`)) {\n          const subKey = key.replace(`${configKey}.`, '');\n          configValues[subKey] = value[key];\n          hasValues = true;\n        }\n      });\n\n      if (hasValues) {\n        (updates as any)[configKey] = configValues;\n      }\n    });\n\n    updateField(updates);\n  }, [updateField]);\n\n  const allFields = [\n    ...baseFields,\n    ...getFieldSpecificConfig(),\n    ...advancedFields,\n    ...helpFields,\n  ];\n\n  const { Form } = useFormedible({\n    fields: allFields,\n    formOptions: {\n      defaultValues: getFormValues(),\n      onChange: handleFormChange,\n    },\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center space-x-2 pb-4 border-b\">\n        <div className=\"text-lg\">\n          {field.type === 'text' && 'üìù'}\n          {field.type === 'email' && 'üìß'}\n          {field.type === 'password' && 'üîí'}\n          {field.type === 'textarea' && 'üìÑ'}\n          {field.type === 'number' && 'üî¢'}\n          {field.type === 'select' && 'üìã'}\n          {field.type === 'radio' && '‚ö™'}\n          {field.type === 'multiSelect' && '‚òëÔ∏è'}\n          {field.type === 'checkbox' && '‚úÖ'}\n          {field.type === 'switch' && 'üîò'}\n          {field.type === 'date' && 'üìÖ'}\n          {field.type === 'slider' && 'üéöÔ∏è'}\n          {field.type === 'rating' && '‚≠ê'}\n          {field.type === 'colorPicker' && 'üé®'}\n          {field.type === 'phone' && 'üìû'}\n          {field.type === 'file' && 'üìé'}\n          {field.type === 'array' && 'üìö'}\n        </div>\n        <div>\n          <div className=\"font-medium\">{field.label}</div>\n          <div className=\"text-sm text-muted-foreground\">{field.type}</div>\n        </div>\n      </div>\n      \n      <Form />\n    </div>\n  );\n};",
      "type": "registry:component",
      "target": "components/formedible/builder/field-configurator.tsx"
    },
    {
      "path": "src/components/formedible/builder/form-preview.tsx",
      "content": "'use client';\nimport React, { useMemo } from 'react';\nimport { useFormedible } from 'formedible';\nimport { z } from 'zod';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface FormField {\n  id: string;\n  name: string;\n  type: string;\n  label: string;\n  placeholder?: string;\n  description?: string;\n  required?: boolean;\n  options?: Array<{ value: string; label: string }>;\n  validation?: any;\n  page?: number;\n  group?: string;\n  section?: {\n    title: string;\n    description?: string;\n    collapsible?: boolean;\n    defaultExpanded?: boolean;\n  };\n  help?: {\n    text?: string;\n    tooltip?: string;\n    position?: 'top' | 'bottom' | 'left' | 'right';\n    link?: { url: string; text: string };\n  };\n  inlineValidation?: {\n    enabled?: boolean;\n    debounceMs?: number;\n    showSuccess?: boolean;\n  };\n  arrayConfig?: any;\n  datalist?: any;\n  multiSelectConfig?: any;\n  colorConfig?: any;\n  ratingConfig?: any;\n  phoneConfig?: any;\n}\n\ninterface FormConfiguration {\n  title: string;\n  description?: string;\n  fields: FormField[];\n  pages: Array<{\n    page: number;\n    title: string;\n    description?: string;\n  }>;\n  settings: {\n    submitLabel: string;\n    nextLabel: string;\n    previousLabel: string;\n    showProgress: boolean;\n    allowPageNavigation: boolean;\n    resetOnSubmit: boolean;\n  };\n}\n\ninterface FormPreviewProps {\n  config: FormConfiguration;\n  className?: string;\n}\n\nexport const FormPreview: React.FC<FormPreviewProps> = ({\n  config,\n  className,\n}) => {\n  // Convert form configuration to formedible configuration\n  const formedibleConfig = useMemo(() => {\n    if (config.fields.length === 0) {\n      return {\n        fields: [],\n        schema: z.object({})\n      };\n    }\n\n    try {\n      return {\n        fields: config.fields.map(field => {\n          const fieldConfig: any = {\n            name: field.name,\n            type: field.type,\n            label: field.label,\n            placeholder: field.placeholder,\n            description: field.description,\n            page: field.page || 1,\n            group: field.group,\n            section: field.section,\n            help: field.help,\n            inlineValidation: field.inlineValidation,\n          };\n\n          // Add validation if field is required\n          if (field.required) {\n            switch (field.type) {\n              case 'text':\n              case 'email':\n              case 'password':\n              case 'textarea':\n                fieldConfig.validation = z.string().min(1, `${field.label} is required`);\n                break;\n              case 'number':\n              case 'slider':\n              case 'rating':\n                fieldConfig.validation = z.number().min(0, `${field.label} is required`);\n                break;\n              case 'select':\n              case 'radio':\n                fieldConfig.validation = z.string().min(1, `Please select ${field.label}`);\n                break;\n              case 'multiSelect':\n                fieldConfig.validation = z.array(z.string()).min(1, `Please select at least one ${field.label}`);\n                break;\n              case 'checkbox':\n              case 'switch':\n                fieldConfig.validation = z.boolean().refine(val => val === true, `${field.label} is required`);\n                break;\n              case 'date':\n                fieldConfig.validation = z.date();\n                break;\n              case 'array':\n                fieldConfig.validation = z.array(z.string()).min(1, `At least one ${field.label} is required`);\n                break;\n              case 'colorPicker':\n                fieldConfig.validation = z.string().regex(/^#[0-9A-Fa-f]{6}$/, 'Please select a color');\n                break;\n              case 'phone':\n                fieldConfig.validation = z.string().min(10, 'Please enter a valid phone number');\n                break;\n              case 'file':\n                fieldConfig.validation = z.any().refine(val => val && val.length > 0, `${field.label} is required`);\n                break;\n            }\n          }\n\n          // Add options for select/radio/multiSelect fields\n          if (['select', 'radio', 'multiSelect'].includes(field.type) && field.options) {\n            fieldConfig.options = field.options;\n          }\n\n          // Add field-specific configurations\n          if (field.arrayConfig) fieldConfig.arrayConfig = field.arrayConfig;\n          if (field.datalist) fieldConfig.datalist = field.datalist;\n          if (field.multiSelectConfig) fieldConfig.multiSelectConfig = field.multiSelectConfig;\n          if (field.colorConfig) fieldConfig.colorConfig = field.colorConfig;\n          if (field.ratingConfig) fieldConfig.ratingConfig = field.ratingConfig;\n          if (field.phoneConfig) fieldConfig.phoneConfig = field.phoneConfig;\n\n          return fieldConfig;\n        }),\n        pages: config.pages.length > 1 ? config.pages : undefined,\n        submitLabel: config.settings.submitLabel,\n        nextLabel: config.settings.nextLabel,\n        previousLabel: config.settings.previousLabel,\n        progress: config.settings.showProgress ? { \n          showSteps: true, \n          showPercentage: true \n        } : undefined,\n        formOptions: {\n          onSubmit: async ({ value }: any) => {\n            console.log('Preview form submitted:', value);\n            alert('Form submitted successfully! Check the console for form data.');\n          },\n        },\n      };\n    } catch (error) {\n      console.error('Error converting form configuration:', error);\n      return {\n        fields: [],\n        schema: z.object({})\n      };\n    }\n  }, [config]);\n\n  // Create the form using formedible - call hook at top level\n  const formResult = useFormedible(formedibleConfig);\n\n  // Handle configuration errors or empty fields\n  if (!formResult || !formResult.Form || config.fields.length === 0) {\n    if (config.fields.length === 0) {\n      return (\n        <Card className={cn(\"bg-muted/30\", className)}>\n          <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n            <div className=\"text-4xl mb-4\">üìù</div>\n            <h3 className=\"text-lg font-medium mb-2\">No Fields Added</h3>\n            <p className=\"text-muted-foreground\">\n              Add some fields from the sidebar to see your form preview\n            </p>\n          </CardContent>\n        </Card>\n      );\n    }\n    return (\n      <Card className={cn(\"bg-muted/30\", className)}>\n        <CardContent className=\"py-6\">\n          <Alert variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              There was an error generating the form preview. Please check your field configurations.\n            </AlertDescription>\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const { Form } = formResult;\n\n  return (\n    <Card className={cn(\"bg-muted/30\", className)}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <div>\n            <div>{config.title}</div>\n            {config.description && (\n              <div className=\"text-sm font-normal text-muted-foreground mt-1\">\n                {config.description}\n              </div>\n            )}\n          </div>\n          <div className=\"text-sm text-muted-foreground\">\n            {config.fields.length} field{config.fields.length !== 1 ? 's' : ''}\n            {config.pages.length > 1 && ` ‚Ä¢ ${config.pages.length} pages`}\n          </div>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          {/* Form stats */}\n          <div className=\"grid grid-cols-3 gap-4 p-4 bg-muted/50 border rounded-lg\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary\">{config.fields.length}</div>\n              <div className=\"text-xs text-muted-foreground\">Fields</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary\">{config.pages.length}</div>\n              <div className=\"text-xs text-muted-foreground\">Pages</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-primary\">\n                {config.fields.filter(f => f.required).length}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">Required</div>\n            </div>\n          </div>\n\n          {/* Live form preview */}\n          <div className=\"border-2 border-dashed border-muted-foreground/20 rounded-lg p-6 bg-background\">\n            <div className=\"text-xs text-muted-foreground mb-4 text-center\">\n              ‚ú® Live Preview - This form is fully functional!\n            </div>\n            <Form />\n          </div>\n\n          {/* Field breakdown */}\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-medium text-muted-foreground\">Field Types Used</h4>\n            <div className=\"flex flex-wrap gap-2\">\n              {Array.from(new Set(config.fields.map(f => f.type))).map(type => {\n                const count = config.fields.filter(f => f.type === type).length;\n                const icons: Record<string, string> = {\n                  text: 'üìù', email: 'üìß', password: 'üîí', textarea: 'üìÑ',\n                  number: 'üî¢', select: 'üìã', radio: '‚ö™', multiSelect: '‚òëÔ∏è',\n                  checkbox: '‚úÖ', switch: 'üîò', date: 'üìÖ', slider: 'üéöÔ∏è',\n                  rating: '‚≠ê', colorPicker: 'üé®', phone: 'üìû', file: 'üìé',\n                  array: 'üìö'\n                };\n                \n                return (\n                  <div\n                    key={type}\n                    className=\"inline-flex items-center gap-1 px-2 py-1 bg-muted rounded text-xs\"\n                  >\n                    <span>{icons[type] || 'üìù'}</span>\n                    <span>{type}</span>\n                    {count > 1 && (\n                      <span className=\"bg-primary text-primary-foreground rounded-full w-4 h-4 text-xs flex items-center justify-center\">\n                        {count}\n                      </span>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Advanced features used */}\n          {(config.fields.some(f => f.section) || \n            config.fields.some(f => f.group) ||\n            config.fields.some(f => f.help) ||\n            config.fields.some(f => f.inlineValidation?.enabled)) && (\n            <div className=\"space-y-2\">\n              <h4 className=\"text-sm font-medium text-muted-foreground\">Advanced Features</h4>\n              <div className=\"flex flex-wrap gap-2\">\n                {config.fields.some(f => f.section) && (\n                  <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary rounded text-xs\">\n                    üìë Sections\n                  </div>\n                )}\n                {config.fields.some(f => f.group) && (\n                  <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-accent/10 text-accent rounded text-xs\">\n                    üè∑Ô∏è Field Groups\n                  </div>\n                )}\n                {config.fields.some(f => f.help) && (\n                  <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-secondary/50 text-foreground rounded text-xs\">\n                    ‚ùì Help & Tooltips\n                  </div>\n                )}\n                {config.fields.some(f => f.inlineValidation?.enabled) && (\n                  <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground rounded text-xs\">\n                    ‚ö° Inline Validation\n                  </div>\n                )}\n                {config.settings.showProgress && (\n                  <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-primary/20 text-primary rounded text-xs\">\n                    üìä Progress Indicator\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};",
      "type": "registry:component",
      "target": "components/formedible/builder/form-preview.tsx"
    },
    {
      "path": "src/lib/utils.ts",
      "content": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}",
      "type": "registry:lib",
      "target": "lib/utils.ts"
    },
    {
      "path": "src/components/ui/code-block.tsx",
      "content": "\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Highlight, themes } from \"prism-react-renderer\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { Copy, Check } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\n/**\n * Unified CodeBlock component with syntax highlighting, copy functionality, and package manager tabs\n * \n * Features:\n * - Syntax highlighting using Prism.js with oneDark theme\n * - Floating copy button with animation feedback\n * - Optional line numbers\n * - Package manager tabs for installation commands (npx, pnpm, yarn, bunx)\n * - Optional title header\n * - Responsive design with proper overflow handling\n */\n\ninterface CodeBlockProps {\n  code: string;\n  language?: string;\n  showLineNumbers?: boolean;\n  showCopyButton?: boolean;\n  showPackageManagerTabs?: boolean;\n  className?: string;\n  title?: string;\n}\n\n// Copy Button Component\nconst CopyButton: React.FC<{ text: string; className?: string }> = ({\n  text,\n  className = \"\",\n}) => {\n  const [copied, setCopied] = useState(false);\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      toast.success(\"Copied to clipboard!\");\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast.error(\"Failed to copy\");\n    }\n  };\n\n  return (\n    <motion.button\n      onClick={copyToClipboard}\n      className={`relative inline-flex items-center justify-center p-2 rounded-md bg-muted/80 hover:bg-muted text-muted-foreground hover:text-foreground backdrop-blur-sm transition-colors shadow-lg ${className}`}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n    >\n      <AnimatePresence mode=\"wait\">\n        {copied ? (\n          <motion.div\n            key=\"check\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            exit={{ scale: 0 }}\n          >\n            <Check className=\"w-4 h-4 text-accent\" />\n          </motion.div>\n        ) : (\n          <motion.div\n            key=\"copy\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            exit={{ scale: 0 }}\n          >\n            <Copy className=\"w-4 h-4\" />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.button>\n  );\n};\n\nexport const CodeBlock: React.FC<CodeBlockProps> = ({\n  code,\n  language = \"tsx\",\n  showLineNumbers = false,\n  showCopyButton = true,\n  showPackageManagerTabs = false,\n  className = \"\",\n  title,\n}) => {\n  const [selectedPM, setSelectedPM] = useState(\"npx\");\n  \n  const packageManagers = {\n    npx: code,\n    pnpm: code.replace(\"npx shadcn@latest\", \"pnpm dlx shadcn@latest\"),\n    yarn: code.replace(\"npx shadcn@latest\", \"yarn dlx shadcn@latest\"),\n    bunx: code.replace(\"npx shadcn@latest\", \"bunx --bun shadcn@latest\"),\n  };\n\n  const currentCode = showPackageManagerTabs ? packageManagers[selectedPM as keyof typeof packageManagers] : code;\n\n  return (\n    <div className={`relative ${className}`}>\n      {title && (\n        <div className=\"bg-muted text-muted-foreground px-4 py-2 text-sm font-medium rounded-t-lg border-b\">\n          {title}\n        </div>\n      )}\n      \n      {showPackageManagerTabs && (\n        <div className=\"flex gap-1 mb-2\">\n          {Object.keys(packageManagers).map((pm) => (\n            <button\n              key={pm}\n              onClick={() => setSelectedPM(pm)}\n              className={`px-3 py-1 text-xs rounded-t-md transition-colors ${\n                selectedPM === pm\n                  ? \"bg-primary text-primary-foreground\"\n                  : \"bg-secondary text-secondary-foreground hover:bg-secondary/80\"\n              }`}\n            >\n              {pm}\n            </button>\n          ))}\n        </div>\n      )}\n      \n      <div className=\"relative group\">\n        <Highlight\n          theme={themes.oneDark}\n          code={currentCode.trim()}\n          language={language as any}\n        >\n          {({ className: highlightClassName, style, tokens, getLineProps, getTokenProps }) => (\n            <pre \n              className={`${highlightClassName} p-4 rounded-lg font-mono text-sm overflow-x-auto ${\n                showPackageManagerTabs ? 'rounded-tl-none' : ''\n              } ${title ? 'rounded-t-none' : ''}`}\n              style={style}\n            >\n              {tokens.map((line, i) => (\n                <div key={i} {...getLineProps({ line })} className={showLineNumbers ? \"table-row\" : \"\"}>\n                  {showLineNumbers && (\n                     <span className=\"table-cell text-right pr-4 text-muted-foreground select-none text-xs\">                      {i + 1}\n                    </span>\n                  )}\n                  <span className={showLineNumbers ? \"table-cell\" : \"\"}>\n                    {line.map((token, key) => (\n                      <span key={key} {...getTokenProps({ token })} />\n                    ))}\n                  </span>\n                </div>\n              ))}\n            </pre>\n          )}\n        </Highlight>\n        \n        {showCopyButton && (\n          <div className=\"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n            <CopyButton text={currentCode} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};",
      "type": "registry:component",
      "target": "components/ui/code-block.tsx"
    }
  ],
  "docs": "Make sure to install formedible and configure your shadcn/ui components before using this builder. This component provides a visual interface for creating forms that can be used with the formedible library.",
  "categories": [
    "form",
    "builder",
    "component"
  ]
}